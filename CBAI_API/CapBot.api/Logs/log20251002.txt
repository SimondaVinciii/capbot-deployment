2025-10-02 13:24:55.760 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 13:24:55.879 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 13:24:56.210 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.234 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.256 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.260 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.260 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.262 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.559 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.561 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.589 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.590 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.591 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.595 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.601 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.601 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:24:56.680 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 13:24:56.681 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 13:24:56.681 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 13:24:56.681 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 13:24:56.682 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 13:24:56.682 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 13:24:56.682 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 13:24:56.682 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 13:24:56.683 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 13:24:56.683 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 13:24:56.683 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 13:24:56.683 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 13:24:56.683 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 13:24:56.684 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 13:24:56.684 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 13:24:56.684 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 13:24:56.684 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 13:24:56.684 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 13:24:56.684 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 13:24:56.906 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:24:56.907 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:24:56.907 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:24:56.907 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:24:56.907 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:24:56.908 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:24:56.908 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:24:56.908 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:24:56.908 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:24:56.909 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:24:56.909 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:24:57.155 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:24:57.265 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 13:24:57.548 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 13:24:57.634 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:24:57.672 +07:00 [DBG] Created DbConnection. (35ms).
2025-10-02 13:24:57.679 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.536 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.541 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:24:58.551 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-10-02 13:24:58.562 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (22ms).
2025-10-02 13:24:58.577 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:24:58.760 +07:00 [INF] Executed DbCommand (186ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:24:58.835 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:24:58.871 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.883 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 114ms reading results.
2025-10-02 13:24:58.887 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.895 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (7ms).
2025-10-02 13:24:58.900 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.901 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.901 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:24:58.902 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:58.902 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:58.902 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:24:58.920 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:24:58.922 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:24:58.922 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.923 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 13:24:58.923 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.924 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:24:58.925 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.925 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.926 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:24:58.926 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:58.927 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:58.927 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:24:58.931 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:24:58.932 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:24:58.932 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.932 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:24:58.933 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.933 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:24:58.934 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.934 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.934 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:24:58.935 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:58.935 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:58.938 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:24:58.948 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:24:58.949 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:24:58.949 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.950 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:24:58.950 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.950 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:24:58.968 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 13:24:58.981 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 13:24:58.983 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.983 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:58.983 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:24:58.983 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:58.983 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:58.984 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:24:59.155 +07:00 [INF] Executed DbCommand (172ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:24:59.204 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:24:59.252 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.253 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 96ms reading results.
2025-10-02 13:24:59.253 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.253 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:24:59.257 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 13:24:59.262 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.263 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.263 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:24:59.264 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:59.264 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:59.264 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:24:59.268 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:24:59.269 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:24:59.269 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.269 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:24:59.269 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.270 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:24:59.270 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 13:24:59.271 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.272 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.272 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:24:59.273 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:59.273 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:59.273 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:24:59.276 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:24:59.277 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:24:59.278 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.278 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 13:24:59.278 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.278 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:24:59.279 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.279 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.279 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:24:59.279 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:59.279 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:24:59.280 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:24:59.281 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:24:59.282 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:24:59.282 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.282 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:24:59.282 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.283 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:24:59.283 +07:00 [INF] Data seeding completed successfully
2025-10-02 13:24:59.285 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:24:59.288 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:24:59.290 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 13:24:59.331 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 13:24:59.629 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 13:24:59.816 +07:00 [DBG] Hosting starting
2025-10-02 13:24:59.829 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 13:24:59.883 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 13:24:59.921 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 13:24:59.961 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 13:24:59.968 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 13:24:59.968 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 13:24:59.980 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 13:24:59.986 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 13:24:59.986 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 13:24:59.990 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 13:24:59.994 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 13:24:59.999 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 13:25:00.003 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 13:25:00.004 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 13:25:00.088 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 13:25:00.088 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 13:25:00.088 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 13:25:00.089 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 13:25:00.089 +07:00 [INF] Hosting environment: Development
2025-10-02 13:25:00.089 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 13:25:00.091 +07:00 [DBG] Hosting started
2025-10-02 13:25:00.251 +07:00 [DBG] Connection id "0HNG1FHL36CG6" accepted.
2025-10-02 13:25:00.254 +07:00 [DBG] Connection id "0HNG1FHL36CG6" started.
2025-10-02 13:25:00.379 +07:00 [DBG] Connection id "0HNG1FHL36CG7" accepted.
2025-10-02 13:25:00.584 +07:00 [DBG] Connection id "0HNG1FHL36CG7" started.
2025-10-02 13:25:00.662 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 13:25:00.729 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 13:25:01.129 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 13:25:01.148 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 13:25:01.148 +07:00 [DBG] Connection id "0HNG1FHL36CG6" completed keep alive response.
2025-10-02 13:25:01.151 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 512.0017ms
2025-10-02 13:25:01.188 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 13:25:01.206 +07:00 [DBG] Connection id "0HNG1FHL36CG6" completed keep alive response.
2025-10-02 13:25:01.209 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 19.4145ms
2025-10-02 13:25:01.347 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 13:25:01.842 +07:00 [DBG] Connection id "0HNG1FHL36CG6" completed keep alive response.
2025-10-02 13:25:01.842 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 495.1561ms
2025-10-02 13:25:04.252 +07:00 [DBG] Connection id "0HNG1FHL36CG6" received FIN.
2025-10-02 13:25:04.252 +07:00 [DBG] Connection id "0HNG1FHL36CG7" received FIN.
2025-10-02 13:25:04.254 +07:00 [DBG] Connection id "0HNG1FHL36CG6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:25:04.254 +07:00 [DBG] Connection id "0HNG1FHL36CG7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:25:04.255 +07:00 [DBG] Connection id "0HNG1FHL36CG7" disconnecting.
2025-10-02 13:25:04.255 +07:00 [DBG] Connection id "0HNG1FHL36CG6" disconnecting.
2025-10-02 13:25:04.256 +07:00 [DBG] Connection id "0HNG1FHL36CG7" stopped.
2025-10-02 13:25:04.256 +07:00 [DBG] Connection id "0HNG1FHL36CG6" stopped.
2025-10-02 13:27:06.934 +07:00 [DBG] Connection id "0HNG1FHL36CG8" accepted.
2025-10-02 13:27:06.936 +07:00 [DBG] Connection id "0HNG1FHL36CG8" started.
2025-10-02 13:27:06.938 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5207/api/auth/login - null null
2025-10-02 13:27:06.944 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:27:06.947 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 13:27:06.947 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:27:06.949 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:27:06.951 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:27:06.956 +07:00 [DBG] The request is a preflight request.
2025-10-02 13:27:06.960 +07:00 [DBG] Connection id "0HNG1FHL36CG8" completed keep alive response.
2025-10-02 13:27:06.961 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5207/api/auth/login - 204 null null 22.662ms
2025-10-02 13:27:06.966 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/auth/login - application/json 82
2025-10-02 13:27:06.966 +07:00 [DBG] POST requests are not supported
2025-10-02 13:27:06.967 +07:00 [DBG] POST requests are not supported
2025-10-02 13:27:06.968 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:27:06.968 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:27:07.057 +07:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2025-10-02 13:27:07.058 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2025-10-02 13:27:07.059 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 13:27:07.150 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-02 13:27:07.172 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 13:27:07.207 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Entities.DTOs.Auth.LoginDTO) on controller CapBot.api.Controllers.AuthController (CapBot.api).
2025-10-02 13:27:07.210 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:27:07.212 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 13:27:07.214 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:27:07.215 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:27:07.216 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 13:27:07.222 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-10-02 13:27:07.235 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-10-02 13:27:07.240 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-10-02 13:27:07.242 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' using the name '' in request data ...
2025-10-02 13:27:07.243 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 13:27:07.244 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 13:27:07.244 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 13:27:07.244 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 13:27:07.256 +07:00 [DBG] Connection id "0HNG1FHL36CG8", Request id "0HNG1FHL36CG8:00000002": started reading request body.
2025-10-02 13:27:07.256 +07:00 [DBG] Connection id "0HNG1FHL36CG8", Request id "0HNG1FHL36CG8:00000002": done reading request body.
2025-10-02 13:27:07.264 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.Auth.LoginDTO'
2025-10-02 13:27:07.265 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 13:27:07.265 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 13:27:07.265 +07:00 [DBG] Attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-10-02 13:27:07.272 +07:00 [DBG] Done attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 13:27:07.360 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:27:07.362 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:27:07.363 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 13:27:07.363 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.363 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.364 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:27:07.364 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:07.364 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:07.364 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:27:07.374 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:27:07.374 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:27:07.375 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.376 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 13:27:07.376 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.376 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:27:07.437 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .Join(
        inner: DbSet<Role>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-10-02 13:27:07.489 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Name
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 13:27:07.491 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.492 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.492 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:27:07.492 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:07.492 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:07.494 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-10-02 13:27:07.534 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-10-02 13:27:07.535 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.535 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 13:27:07.535 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.535 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:27:07.688 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:27:07.690 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:27:07.691 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 13:27:07.694 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:27:07.694 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:27:07.745 +07:00 [INF] Executed action CapBot.api.Controllers.AuthController.Login (CapBot.api) in 525.1955ms
2025-10-02 13:27:07.746 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 13:27:07.749 +07:00 [DBG] Connection id "0HNG1FHL36CG8" completed keep alive response.
2025-10-02 13:27:07.749 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:27:07.750 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.750 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:27:07.751 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/auth/login - 200 null application/json; charset=utf-8 785.6762ms
2025-10-02 13:27:07.753 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5207/api/user-profiles/me - null null
2025-10-02 13:27:07.753 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:27:07.753 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:27:07.754 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:27:07.754 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:27:07.754 +07:00 [DBG] The request is a preflight request.
2025-10-02 13:27:07.754 +07:00 [DBG] Connection id "0HNG1FHL36CG8" completed keep alive response.
2025-10-02 13:27:07.755 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5207/api/user-profiles/me - 204 null null 1.5208ms
2025-10-02 13:27:07.757 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/user-profiles/me - null null
2025-10-02 13:27:07.758 +07:00 [DBG] The request path /api/user-profiles/me does not match a supported file type
2025-10-02 13:27:07.758 +07:00 [DBG] The request path /api/user-profiles/me does not match a supported file type
2025-10-02 13:27:07.758 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:27:07.758 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:27:07.763 +07:00 [DBG] 2 candidate(s) found for the request path '/api/user-profiles/me'
2025-10-02 13:27:07.764 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)' with route pattern 'api/user-profiles/me' is valid for the request path '/api/user-profiles/me'
2025-10-02 13:27:07.764 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.UserProfileController.GetById (CapBot.api)' with route pattern 'api/user-profiles/{id}' is valid for the request path '/api/user-profiles/me'
2025-10-02 13:27:07.764 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:27:07.842 +07:00 [DBG] Successfully validated the token.
2025-10-02 13:27:07.844 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 13:27:07.849 +07:00 [DBG] Authorization was successful.
2025-10-02 13:27:07.850 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:27:07.858 +07:00 [INF] Route matched with {action = "GetMyProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyProfile() on controller CapBot.api.Controllers.UserProfileController (CapBot.api).
2025-10-02 13:27:07.858 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:27:07.859 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-02 13:27:07.859 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:27:07.859 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:27:07.859 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-02 13:27:07.859 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.UserProfileController (CapBot.api)
2025-10-02 13:27:07.865 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.UserProfileController (CapBot.api)
2025-10-02 13:27:07.889 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:27:07.903 +07:00 [DBG] Compiling query expression: 
'DbSet<UserProfile>()
    .AsNoTracking()
    .Where(x => x.UserId == __targetUserId_0 && x.IsActive && x.DeletedAt == null && x.DeletedAt == null)
    .FirstOrDefault()'
2025-10-02 13:27:07.917 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserProfile>(
    asyncEnumerable: new SingleQueryingEnumerable<UserProfile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserProfile.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserProfile.Address (string), 1], [Property: UserProfile.Avatar (string), 2], [Property: UserProfile.CoverImage (string), 3], [Property: UserProfile.CreatedAt (DateTime) Required, 4], [Property: UserProfile.CreatedBy (string), 5], [Property: UserProfile.DeletedAt (DateTime?), 6], [Property: UserProfile.FullName (string), 7], [Property: UserProfile.IsActive (bool) Required, 8], [Property: UserProfile.LastModifiedAt (DateTime?), 9], [Property: UserProfile.LastModifiedBy (string), 10], [Property: UserProfile.UserId (int) Required FK Index, 11] }
            SELECT TOP(1) p.Id, p.Address, p.Avatar, p.CoverImage, p.CreatedAt, p.CreatedBy, p.DeletedAt, p.FullName, p.IsActive, p.LastModifiedAt, p.LastModifiedBy, p.UserId
            FROM profiles AS p
            WHERE (((p.UserId == @__targetUserId_0) && p.IsActive) && (p.DeletedAt == NULL)) && (p.DeletedAt == NULL)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserProfile>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 13:27:07.925 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:27:07.925 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 13:27:07.925 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.925 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.925 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:27:07.926 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:07.926 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:07.926 +07:00 [DBG] Executing DbCommand [Parameters=[@__targetUserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Avatar], [p].[CoverImage], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[FullName], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[UserId]
FROM [profiles] AS [p]
WHERE [p].[UserId] = @__targetUserId_0 AND [p].[IsActive] = CAST(1 AS bit) AND [p].[DeletedAt] IS NULL AND [p].[DeletedAt] IS NULL
2025-10-02 13:27:07.959 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__targetUserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Avatar], [p].[CoverImage], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[FullName], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[UserId]
FROM [profiles] AS [p]
WHERE [p].[UserId] = @__targetUserId_0 AND [p].[IsActive] = CAST(1 AS bit) AND [p].[DeletedAt] IS NULL AND [p].[DeletedAt] IS NULL
2025-10-02 13:27:07.960 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.961 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 13:27:07.961 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.961 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:27:07.964 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:27:07.965 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:27:07.965 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-02 13:27:07.965 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-02 13:27:07.966 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:27:07.966 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:27:07.972 +07:00 [INF] Executed action CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api) in 112.5617ms
2025-10-02 13:27:07.972 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:27:07.973 +07:00 [DBG] Connection id "0HNG1FHL36CG8" completed keep alive response.
2025-10-02 13:27:07.974 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:27:07.974 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:07.974 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:27:07.974 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/user-profiles/me - 200 null application/json; charset=utf-8 217.3673ms
2025-10-02 13:27:08.622 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/user-profiles/me - null null
2025-10-02 13:27:08.622 +07:00 [DBG] The request path /api/user-profiles/me does not match a supported file type
2025-10-02 13:27:08.623 +07:00 [DBG] The request path /api/user-profiles/me does not match a supported file type
2025-10-02 13:27:08.623 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:27:08.623 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:27:08.625 +07:00 [DBG] 2 candidate(s) found for the request path '/api/user-profiles/me'
2025-10-02 13:27:08.625 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)' with route pattern 'api/user-profiles/me' is valid for the request path '/api/user-profiles/me'
2025-10-02 13:27:08.625 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.UserProfileController.GetById (CapBot.api)' with route pattern 'api/user-profiles/{id}' is valid for the request path '/api/user-profiles/me'
2025-10-02 13:27:08.626 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:27:08.630 +07:00 [DBG] Successfully validated the token.
2025-10-02 13:27:08.631 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 13:27:08.634 +07:00 [DBG] Authorization was successful.
2025-10-02 13:27:08.635 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:27:08.635 +07:00 [INF] Route matched with {action = "GetMyProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyProfile() on controller CapBot.api.Controllers.UserProfileController (CapBot.api).
2025-10-02 13:27:08.636 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:27:08.636 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-02 13:27:08.636 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:27:08.636 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:27:08.636 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-02 13:27:08.636 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.UserProfileController (CapBot.api)
2025-10-02 13:27:08.638 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.UserProfileController (CapBot.api)
2025-10-02 13:27:08.640 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:27:08.641 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:27:08.641 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 13:27:08.641 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:08.642 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:08.642 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:27:08.643 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:08.643 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:08.643 +07:00 [DBG] Executing DbCommand [Parameters=[@__targetUserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Avatar], [p].[CoverImage], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[FullName], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[UserId]
FROM [profiles] AS [p]
WHERE [p].[UserId] = @__targetUserId_0 AND [p].[IsActive] = CAST(1 AS bit) AND [p].[DeletedAt] IS NULL AND [p].[DeletedAt] IS NULL
2025-10-02 13:27:08.652 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__targetUserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Avatar], [p].[CoverImage], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[FullName], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[UserId]
FROM [profiles] AS [p]
WHERE [p].[UserId] = @__targetUserId_0 AND [p].[IsActive] = CAST(1 AS bit) AND [p].[DeletedAt] IS NULL AND [p].[DeletedAt] IS NULL
2025-10-02 13:27:08.655 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:27:08.655 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 13:27:08.656 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:08.656 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:27:08.656 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:27:08.657 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:27:08.657 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-02 13:27:08.657 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-02 13:27:08.657 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:27:08.657 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:27:08.658 +07:00 [INF] Executed action CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api) in 21.4687ms
2025-10-02 13:27:08.658 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:27:08.659 +07:00 [DBG] Connection id "0HNG1FHL36CG8" completed keep alive response.
2025-10-02 13:27:08.659 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:27:08.659 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:08.660 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:27:08.660 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/user-profiles/me - 200 null application/json; charset=utf-8 38.1378ms
2025-10-02 13:27:08.691 +07:00 [DBG] Connection id "0HNG1FHL36CG9" accepted.
2025-10-02 13:27:08.691 +07:00 [DBG] Connection id "0HNG1FHL36CG9" started.
2025-10-02 13:27:08.691 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg - null null
2025-10-02 13:27:08.694 +07:00 [DBG] The request path /images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg does not match an existing file
2025-10-02 13:27:08.698 +07:00 [DBG] The request path /images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg does not match an existing file
2025-10-02 13:27:08.698 +07:00 [DBG] No candidates found for the request path '/images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg'
2025-10-02 13:27:08.699 +07:00 [DBG] Request did not match any endpoints
2025-10-02 13:27:08.700 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-02 13:27:08.701 +07:00 [DBG] Connection id "0HNG1FHL36CG9" completed keep alive response.
2025-10-02 13:27:08.701 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg - 404 0 null 9.5196ms
2025-10-02 13:27:08.702 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5207/images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg, Response status code: 404
2025-10-02 13:27:14.462 +07:00 [DBG] Connection id "0HNG1FHL36CG8" received FIN.
2025-10-02 13:27:14.462 +07:00 [DBG] Connection id "0HNG1FHL36CG9" received FIN.
2025-10-02 13:27:14.463 +07:00 [DBG] Connection id "0HNG1FHL36CG8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:27:14.463 +07:00 [DBG] Connection id "0HNG1FHL36CG9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:27:14.463 +07:00 [DBG] Connection id "0HNG1FHL36CG9" disconnecting.
2025-10-02 13:27:14.463 +07:00 [DBG] Connection id "0HNG1FHL36CG8" disconnecting.
2025-10-02 13:27:14.464 +07:00 [DBG] Connection id "0HNG1FHL36CG9" stopped.
2025-10-02 13:27:14.464 +07:00 [DBG] Connection id "0HNG1FHL36CG8" stopped.
2025-10-02 13:27:15.366 +07:00 [DBG] Connection id "0HNG1FHL36CGA" accepted.
2025-10-02 13:27:15.366 +07:00 [DBG] Connection id "0HNG1FHL36CGA" started.
2025-10-02 13:27:15.366 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5207/api/user-profiles/me - null null
2025-10-02 13:27:15.367 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:27:15.367 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:27:15.367 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:27:15.367 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:27:15.367 +07:00 [DBG] The request is a preflight request.
2025-10-02 13:27:15.368 +07:00 [DBG] Connection id "0HNG1FHL36CGA" completed keep alive response.
2025-10-02 13:27:15.368 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5207/api/user-profiles/me - 204 null null 1.4005ms
2025-10-02 13:27:15.370 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/user-profiles/me - null null
2025-10-02 13:27:15.370 +07:00 [DBG] The request path /api/user-profiles/me does not match a supported file type
2025-10-02 13:27:15.370 +07:00 [DBG] The request path /api/user-profiles/me does not match a supported file type
2025-10-02 13:27:15.370 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:27:15.370 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:27:15.371 +07:00 [DBG] 2 candidate(s) found for the request path '/api/user-profiles/me'
2025-10-02 13:27:15.371 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)' with route pattern 'api/user-profiles/me' is valid for the request path '/api/user-profiles/me'
2025-10-02 13:27:15.371 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.UserProfileController.GetById (CapBot.api)' with route pattern 'api/user-profiles/{id}' is valid for the request path '/api/user-profiles/me'
2025-10-02 13:27:15.371 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:27:15.372 +07:00 [DBG] Successfully validated the token.
2025-10-02 13:27:15.372 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 13:27:15.375 +07:00 [DBG] Authorization was successful.
2025-10-02 13:27:15.376 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:27:15.376 +07:00 [INF] Route matched with {action = "GetMyProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyProfile() on controller CapBot.api.Controllers.UserProfileController (CapBot.api).
2025-10-02 13:27:15.377 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:27:15.377 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-02 13:27:15.377 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:27:15.377 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:27:15.377 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-02 13:27:15.377 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.UserProfileController (CapBot.api)
2025-10-02 13:27:15.400 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.UserProfileController (CapBot.api)
2025-10-02 13:27:15.406 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:27:15.408 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:27:15.408 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 13:27:15.409 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:15.410 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:15.411 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:27:15.411 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:15.411 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:15.412 +07:00 [DBG] Executing DbCommand [Parameters=[@__targetUserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Avatar], [p].[CoverImage], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[FullName], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[UserId]
FROM [profiles] AS [p]
WHERE [p].[UserId] = @__targetUserId_0 AND [p].[IsActive] = CAST(1 AS bit) AND [p].[DeletedAt] IS NULL AND [p].[DeletedAt] IS NULL
2025-10-02 13:27:15.422 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__targetUserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Avatar], [p].[CoverImage], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[FullName], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[UserId]
FROM [profiles] AS [p]
WHERE [p].[UserId] = @__targetUserId_0 AND [p].[IsActive] = CAST(1 AS bit) AND [p].[DeletedAt] IS NULL AND [p].[DeletedAt] IS NULL
2025-10-02 13:27:15.423 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:27:15.424 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 13:27:15.425 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:15.425 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:27:15.426 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:27:15.426 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:27:15.427 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-02 13:27:15.427 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-02 13:27:15.427 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:27:15.427 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:27:15.427 +07:00 [INF] Executed action CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api) in 50.134ms
2025-10-02 13:27:15.428 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:27:15.428 +07:00 [DBG] Connection id "0HNG1FHL36CGA" completed keep alive response.
2025-10-02 13:27:15.428 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:27:15.429 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:15.429 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:27:15.429 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/user-profiles/me - 200 null application/json; charset=utf-8 58.8882ms
2025-10-02 13:27:15.457 +07:00 [DBG] Connection id "0HNG1FHL36CGB" accepted.
2025-10-02 13:27:15.457 +07:00 [DBG] Connection id "0HNG1FHL36CGB" started.
2025-10-02 13:27:15.457 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg - null null
2025-10-02 13:27:15.458 +07:00 [DBG] The request path /images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg does not match an existing file
2025-10-02 13:27:15.459 +07:00 [DBG] The request path /images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg does not match an existing file
2025-10-02 13:27:15.459 +07:00 [DBG] No candidates found for the request path '/images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg'
2025-10-02 13:27:15.459 +07:00 [DBG] Request did not match any endpoints
2025-10-02 13:27:15.459 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-02 13:27:15.460 +07:00 [DBG] Connection id "0HNG1FHL36CGB" completed keep alive response.
2025-10-02 13:27:15.460 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg - 404 0 null 2.7873ms
2025-10-02 13:27:15.460 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5207/images/entities/z6454173892555_d71b9e5fa036823a5e4ce6ef4a629e37.jpg, Response status code: 404
2025-10-02 13:27:18.537 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5207/api/semester/all - null null
2025-10-02 13:27:18.540 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:27:18.541 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:27:18.541 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:27:18.541 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:27:18.541 +07:00 [DBG] The request is a preflight request.
2025-10-02 13:27:18.541 +07:00 [DBG] Connection id "0HNG1FHL36CGA" completed keep alive response.
2025-10-02 13:27:18.545 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5207/api/semester/all - 204 null null 5.1684ms
2025-10-02 13:27:18.549 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/semester/all - null null
2025-10-02 13:27:18.550 +07:00 [DBG] The request path /api/semester/all does not match a supported file type
2025-10-02 13:27:18.550 +07:00 [DBG] The request path /api/semester/all does not match a supported file type
2025-10-02 13:27:18.550 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:27:18.550 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:27:18.551 +07:00 [DBG] 1 candidate(s) found for the request path '/api/semester/all'
2025-10-02 13:27:18.551 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)' with route pattern 'api/semester/all' is valid for the request path '/api/semester/all'
2025-10-02 13:27:18.552 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:27:18.555 +07:00 [DBG] Successfully validated the token.
2025-10-02 13:27:18.555 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 13:27:18.556 +07:00 [DBG] Authorization was successful.
2025-10-02 13:27:18.557 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:27:18.564 +07:00 [INF] Route matched with {action = "GetAll", controller = "Semester"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller CapBot.api.Controllers.SemesterController (CapBot.api).
2025-10-02 13:27:18.564 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:27:18.564 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 13:27:18.564 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:27:18.564 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:27:18.565 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 13:27:18.565 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:27:18.567 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:27:18.586 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:27:18.609 +07:00 [DBG] Compiling query expression: 
'DbSet<Semester>()
    .AsNoTracking()
    .Where(x => x.IsActive && x.DeletedAt == null)'
2025-10-02 13:27:18.618 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Semester>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Semester.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Semester.CreatedAt (DateTime) Required, 1], [Property: Semester.CreatedBy (string), 2], [Property: Semester.DeletedAt (DateTime?), 3], [Property: Semester.Description (string), 4], [Property: Semester.EndDate (DateTime) Required, 5], [Property: Semester.IsActive (bool) Required, 6], [Property: Semester.LastModifiedAt (DateTime?), 7], [Property: Semester.LastModifiedBy (string), 8], [Property: Semester.Name (string) Required Index MaxLength(50), 9], [Property: Semester.StartDate (DateTime) Required, 10] }
        SELECT s.Id, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.Description, s.EndDate, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.Name, s.StartDate
        FROM semesters AS s
        WHERE s.IsActive && (s.DeletedAt == NULL)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Semester>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 13:27:18.621 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:27:18.622 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 13:27:18.622 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:18.623 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:18.624 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:27:18.624 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:18.626 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 13:27:18.628 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:27:18.704 +07:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:27:18.709 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:27:18.709 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 5ms reading results.
2025-10-02 13:27:18.710 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:18.710 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:27:18.714 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:27:18.714 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:27:18.715 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 13:27:18.715 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:27:18.715 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:27:18.739 +07:00 [INF] Executed action CapBot.api.Controllers.SemesterController.GetAll (CapBot.api) in 174.1634ms
2025-10-02 13:27:18.740 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:27:18.740 +07:00 [DBG] Connection id "0HNG1FHL36CGA" completed keep alive response.
2025-10-02 13:27:18.740 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:27:18.740 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:18.740 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:27:18.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/semester/all - 201 null application/json; charset=utf-8 191.7692ms
2025-10-02 13:27:19.474 +07:00 [DBG] Connection id "0HNG1FHL36CGB" received FIN.
2025-10-02 13:27:19.475 +07:00 [DBG] Connection id "0HNG1FHL36CGA" received FIN.
2025-10-02 13:27:19.475 +07:00 [DBG] Connection id "0HNG1FHL36CGB" disconnecting.
2025-10-02 13:27:19.475 +07:00 [DBG] Connection id "0HNG1FHL36CGB" stopped.
2025-10-02 13:27:19.475 +07:00 [DBG] Connection id "0HNG1FHL36CGA" disconnecting.
2025-10-02 13:27:19.475 +07:00 [DBG] Connection id "0HNG1FHL36CGA" stopped.
2025-10-02 13:27:19.475 +07:00 [DBG] Connection id "0HNG1FHL36CGB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:27:19.476 +07:00 [DBG] Connection id "0HNG1FHL36CGA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:27:26.069 +07:00 [DBG] Connection id "0HNG1FHL36CGC" accepted.
2025-10-02 13:27:26.070 +07:00 [DBG] Connection id "0HNG1FHL36CGC" started.
2025-10-02 13:27:26.072 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5207/api/semester/detail/1 - null null
2025-10-02 13:27:26.072 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:27:26.072 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:27:26.072 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:27:26.072 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:27:26.073 +07:00 [DBG] The request is a preflight request.
2025-10-02 13:27:26.073 +07:00 [DBG] Connection id "0HNG1FHL36CGC" completed keep alive response.
2025-10-02 13:27:26.073 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5207/api/semester/detail/1 - 204 null null 1.4036ms
2025-10-02 13:27:26.080 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/semester/detail/1 - null null
2025-10-02 13:27:26.082 +07:00 [DBG] The request path /api/semester/detail/1 does not match a supported file type
2025-10-02 13:27:26.082 +07:00 [DBG] The request path /api/semester/detail/1 does not match a supported file type
2025-10-02 13:27:26.082 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:27:26.082 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:27:26.085 +07:00 [DBG] 1 candidate(s) found for the request path '/api/semester/detail/1'
2025-10-02 13:27:26.086 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)' with route pattern 'api/semester/detail/{semesterId}' is valid for the request path '/api/semester/detail/1'
2025-10-02 13:27:26.086 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)'
2025-10-02 13:27:26.087 +07:00 [DBG] Successfully validated the token.
2025-10-02 13:27:26.088 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 13:27:26.088 +07:00 [DBG] Authorization was successful.
2025-10-02 13:27:26.089 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)'
2025-10-02 13:27:26.153 +07:00 [INF] Route matched with {action = "GetDetail", controller = "Semester"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDetail(Int32) on controller CapBot.api.Controllers.SemesterController (CapBot.api).
2025-10-02 13:27:26.154 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:27:26.155 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 13:27:26.155 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:27:26.157 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:27:26.157 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 13:27:26.158 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:27:26.162 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:27:26.163 +07:00 [DBG] Attempting to bind parameter 'semesterId' of type 'System.Int32' ...
2025-10-02 13:27:26.164 +07:00 [DBG] Attempting to bind parameter 'semesterId' of type 'System.Int32' using the name 'semesterId' in request data ...
2025-10-02 13:27:26.173 +07:00 [DBG] Done attempting to bind parameter 'semesterId' of type 'System.Int32'.
2025-10-02 13:27:26.175 +07:00 [DBG] Done attempting to bind parameter 'semesterId' of type 'System.Int32'.
2025-10-02 13:27:26.178 +07:00 [DBG] Attempting to validate the bound parameter 'semesterId' of type 'System.Int32' ...
2025-10-02 13:27:26.181 +07:00 [DBG] Done attempting to validate the bound parameter 'semesterId' of type 'System.Int32'.
2025-10-02 13:27:26.191 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:27:26.193 +07:00 [DBG] Compiling query expression: 
'DbSet<Semester>()
    .AsNoTracking()
    .Where(x => x.Id == __semesterId_0 && x.IsActive && x.DeletedAt == null)
    .FirstOrDefault()'
2025-10-02 13:27:26.207 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Semester>(
    asyncEnumerable: new SingleQueryingEnumerable<Semester>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Semester.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Semester.CreatedAt (DateTime) Required, 1], [Property: Semester.CreatedBy (string), 2], [Property: Semester.DeletedAt (DateTime?), 3], [Property: Semester.Description (string), 4], [Property: Semester.EndDate (DateTime) Required, 5], [Property: Semester.IsActive (bool) Required, 6], [Property: Semester.LastModifiedAt (DateTime?), 7], [Property: Semester.LastModifiedBy (string), 8], [Property: Semester.Name (string) Required Index MaxLength(50), 9], [Property: Semester.StartDate (DateTime) Required, 10] }
            SELECT TOP(1) s.Id, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.Description, s.EndDate, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.Name, s.StartDate
            FROM semesters AS s
            WHERE ((s.Id == @__semesterId_0) && s.IsActive) && (s.DeletedAt == NULL)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Semester>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 13:27:26.211 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:27:26.212 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 13:27:26.212 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:26.212 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:26.213 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:27:26.213 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:26.213 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:27:26.214 +07:00 [DBG] Executing DbCommand [Parameters=[@__semesterId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[Id] = @__semesterId_0 AND [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:27:26.225 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__semesterId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[Id] = @__semesterId_0 AND [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:27:26.226 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:27:26.227 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 13:27:26.227 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:26.227 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:27:26.229 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:27:26.230 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:27:26.230 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 13:27:26.230 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:27:26.230 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:27:26.244 +07:00 [INF] Executed action CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api) in 86.4753ms
2025-10-02 13:27:26.245 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)'
2025-10-02 13:27:26.246 +07:00 [DBG] Connection id "0HNG1FHL36CGC" completed keep alive response.
2025-10-02 13:27:26.246 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:27:26.246 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:27:26.247 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:27:26.247 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/semester/detail/1 - 200 null application/json; charset=utf-8 166.7445ms
2025-10-02 13:27:34.493 +07:00 [DBG] Connection id "0HNG1FHL36CGC" received FIN.
2025-10-02 13:27:34.493 +07:00 [DBG] Connection id "0HNG1FHL36CGC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:27:34.494 +07:00 [DBG] Connection id "0HNG1FHL36CGC" disconnecting.
2025-10-02 13:27:34.494 +07:00 [DBG] Connection id "0HNG1FHL36CGC" stopped.
2025-10-02 13:28:03.015 +07:00 [DBG] Connection id "0HNG1FHL36CGD" accepted.
2025-10-02 13:28:03.016 +07:00 [DBG] Connection id "0HNG1FHL36CGD" started.
2025-10-02 13:28:03.016 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5207/api/semester/all - null null
2025-10-02 13:28:03.016 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:28:03.017 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:28:03.017 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:28:03.017 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:28:03.017 +07:00 [DBG] The request is a preflight request.
2025-10-02 13:28:03.017 +07:00 [DBG] Connection id "0HNG1FHL36CGD" completed keep alive response.
2025-10-02 13:28:03.017 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5207/api/semester/all - 204 null null 0.8538ms
2025-10-02 13:28:03.021 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/semester/all - null null
2025-10-02 13:28:03.022 +07:00 [DBG] The request path /api/semester/all does not match a supported file type
2025-10-02 13:28:03.022 +07:00 [DBG] The request path /api/semester/all does not match a supported file type
2025-10-02 13:28:03.022 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:28:03.022 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:28:03.022 +07:00 [DBG] 1 candidate(s) found for the request path '/api/semester/all'
2025-10-02 13:28:03.022 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)' with route pattern 'api/semester/all' is valid for the request path '/api/semester/all'
2025-10-02 13:28:03.022 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:28:03.023 +07:00 [DBG] Successfully validated the token.
2025-10-02 13:28:03.023 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 13:28:03.023 +07:00 [DBG] Authorization was successful.
2025-10-02 13:28:03.024 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:28:03.025 +07:00 [INF] Route matched with {action = "GetAll", controller = "Semester"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller CapBot.api.Controllers.SemesterController (CapBot.api).
2025-10-02 13:28:03.025 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:28:03.026 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 13:28:03.026 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:28:03.026 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:28:03.026 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 13:28:03.026 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:28:03.030 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:28:03.041 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:28:03.044 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:28:03.045 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 13:28:03.047 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:03.048 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:03.048 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:28:03.048 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:28:03.048 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:28:03.048 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:28:03.085 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:28:03.088 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:28:03.088 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 13:28:03.089 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:03.089 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:28:03.090 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:28:03.090 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:28:03.090 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 13:28:03.091 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:28:03.091 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:28:03.092 +07:00 [INF] Executed action CapBot.api.Controllers.SemesterController.GetAll (CapBot.api) in 65.743ms
2025-10-02 13:28:03.092 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:28:03.095 +07:00 [DBG] Connection id "0HNG1FHL36CGD" completed keep alive response.
2025-10-02 13:28:03.095 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:28:03.095 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:03.095 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:28:03.096 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/semester/all - 201 null application/json; charset=utf-8 74.5955ms
2025-10-02 13:28:04.526 +07:00 [DBG] Connection id "0HNG1FHL36CGD" received FIN.
2025-10-02 13:28:04.526 +07:00 [DBG] Connection id "0HNG1FHL36CGD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:28:04.527 +07:00 [DBG] Connection id "0HNG1FHL36CGD" disconnecting.
2025-10-02 13:28:04.527 +07:00 [DBG] Connection id "0HNG1FHL36CGD" stopped.
2025-10-02 13:28:32.216 +07:00 [DBG] Connection id "0HNG1FHL36CGE" accepted.
2025-10-02 13:28:32.217 +07:00 [DBG] Connection id "0HNG1FHL36CGE" started.
2025-10-02 13:28:32.217 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5207/api/semester/all - null null
2025-10-02 13:28:32.218 +07:00 [DBG] Connection id "0HNG1FHL36CGF" accepted.
2025-10-02 13:28:32.218 +07:00 [DBG] Connection id "0HNG1FHL36CGF" started.
2025-10-02 13:28:32.219 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:28:32.219 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:28:32.219 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:28:32.219 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:28:32.219 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5207/api/semester/detail/1 - null null
2025-10-02 13:28:32.219 +07:00 [DBG] The request is a preflight request.
2025-10-02 13:28:32.219 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:28:32.219 +07:00 [DBG] Connection id "0HNG1FHL36CGE" completed keep alive response.
2025-10-02 13:28:32.219 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:28:32.219 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:28:32.219 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:28:32.219 +07:00 [DBG] The request is a preflight request.
2025-10-02 13:28:32.219 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5207/api/semester/all - 204 null null 2.1897ms
2025-10-02 13:28:32.220 +07:00 [DBG] Connection id "0HNG1FHL36CGF" completed keep alive response.
2025-10-02 13:28:32.220 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5207/api/semester/detail/1 - 204 null null 0.5792ms
2025-10-02 13:28:32.223 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/semester/all - null null
2025-10-02 13:28:32.223 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/semester/detail/1 - null null
2025-10-02 13:28:32.223 +07:00 [DBG] The request path /api/semester/detail/1 does not match a supported file type
2025-10-02 13:28:32.223 +07:00 [DBG] The request path /api/semester/all does not match a supported file type
2025-10-02 13:28:32.223 +07:00 [DBG] The request path /api/semester/detail/1 does not match a supported file type
2025-10-02 13:28:32.223 +07:00 [DBG] The request path /api/semester/all does not match a supported file type
2025-10-02 13:28:32.223 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:28:32.223 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:28:32.223 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:28:32.223 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:28:32.223 +07:00 [DBG] 1 candidate(s) found for the request path '/api/semester/detail/1'
2025-10-02 13:28:32.223 +07:00 [DBG] 1 candidate(s) found for the request path '/api/semester/all'
2025-10-02 13:28:32.223 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)' with route pattern 'api/semester/all' is valid for the request path '/api/semester/all'
2025-10-02 13:28:32.224 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)' with route pattern 'api/semester/detail/{semesterId}' is valid for the request path '/api/semester/detail/1'
2025-10-02 13:28:32.224 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:28:32.224 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)'
2025-10-02 13:28:32.225 +07:00 [DBG] Successfully validated the token.
2025-10-02 13:28:32.225 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 13:28:32.225 +07:00 [DBG] Successfully validated the token.
2025-10-02 13:28:32.225 +07:00 [DBG] Authorization was successful.
2025-10-02 13:28:32.226 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 13:28:32.226 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:28:32.226 +07:00 [DBG] Authorization was successful.
2025-10-02 13:28:32.226 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)'
2025-10-02 13:28:32.226 +07:00 [INF] Route matched with {action = "GetAll", controller = "Semester"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller CapBot.api.Controllers.SemesterController (CapBot.api).
2025-10-02 13:28:32.226 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:28:32.226 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 13:28:32.226 +07:00 [INF] Route matched with {action = "GetDetail", controller = "Semester"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDetail(Int32) on controller CapBot.api.Controllers.SemesterController (CapBot.api).
2025-10-02 13:28:32.226 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:28:32.226 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:28:32.226 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 13:28:32.226 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:28:32.227 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:28:32.227 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 13:28:32.227 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:28:32.227 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:28:32.227 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 13:28:32.227 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:28:32.227 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:28:32.229 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:28:32.229 +07:00 [DBG] Attempting to bind parameter 'semesterId' of type 'System.Int32' ...
2025-10-02 13:28:32.230 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:28:32.232 +07:00 [DBG] Attempting to bind parameter 'semesterId' of type 'System.Int32' using the name 'semesterId' in request data ...
2025-10-02 13:28:32.233 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:28:32.233 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 13:28:32.233 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:32.234 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:32.236 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:28:32.236 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:28:32.236 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:28:32.237 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:28:32.240 +07:00 [DBG] Done attempting to bind parameter 'semesterId' of type 'System.Int32'.
2025-10-02 13:28:32.241 +07:00 [DBG] Done attempting to bind parameter 'semesterId' of type 'System.Int32'.
2025-10-02 13:28:32.244 +07:00 [DBG] Attempting to validate the bound parameter 'semesterId' of type 'System.Int32' ...
2025-10-02 13:28:32.244 +07:00 [DBG] Done attempting to validate the bound parameter 'semesterId' of type 'System.Int32'.
2025-10-02 13:28:32.247 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:28:32.250 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:28:32.250 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 13:28:32.250 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:32.267 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:28:32.269 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:28:32.270 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 13:28:32.270 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:32.272 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-10-02 13:28:32.275 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:28:32.275 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:28:32.276 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 13:28:32.276 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:28:32.276 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:28:32.279 +07:00 [INF] Executed action CapBot.api.Controllers.SemesterController.GetAll (CapBot.api) in 51.9529ms
2025-10-02 13:28:32.280 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:28:32.281 +07:00 [DBG] Connection id "0HNG1FHL36CGF" completed keep alive response.
2025-10-02 13:28:32.283 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:28:32.286 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:32.286 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:28:32.287 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/semester/all - 201 null application/json; charset=utf-8 64.2085ms
2025-10-02 13:28:32.352 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:32.353 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:28:32.353 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:28:32.353 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:28:32.354 +07:00 [DBG] Executing DbCommand [Parameters=[@__semesterId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[Id] = @__semesterId_0 AND [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:28:32.360 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__semesterId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[Id] = @__semesterId_0 AND [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:28:32.362 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:28:32.363 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 13:28:32.363 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:32.364 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:28:32.364 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:28:32.364 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:28:32.364 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 13:28:32.365 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:28:32.365 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:28:32.365 +07:00 [INF] Executed action CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api) in 138.0889ms
2025-10-02 13:28:32.366 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)'
2025-10-02 13:28:32.366 +07:00 [DBG] Connection id "0HNG1FHL36CGE" completed keep alive response.
2025-10-02 13:28:32.366 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:28:32.366 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:28:32.366 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:28:32.367 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/semester/detail/1 - 200 null application/json; charset=utf-8 143.7543ms
2025-10-02 13:28:34.562 +07:00 [DBG] Connection id "0HNG1FHL36CGF" received FIN.
2025-10-02 13:28:34.563 +07:00 [DBG] Connection id "0HNG1FHL36CGE" received FIN.
2025-10-02 13:28:34.563 +07:00 [DBG] Connection id "0HNG1FHL36CGF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:28:34.563 +07:00 [DBG] Connection id "0HNG1FHL36CGE" disconnecting.
2025-10-02 13:28:34.564 +07:00 [DBG] Connection id "0HNG1FHL36CGE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:28:34.565 +07:00 [DBG] Connection id "0HNG1FHL36CGE" stopped.
2025-10-02 13:28:34.565 +07:00 [DBG] Connection id "0HNG1FHL36CGF" disconnecting.
2025-10-02 13:28:34.567 +07:00 [DBG] Connection id "0HNG1FHL36CGF" stopped.
2025-10-02 13:45:30.743 +07:00 [DBG] Connection id "0HNG1FHL36CGG" accepted.
2025-10-02 13:45:30.748 +07:00 [DBG] Connection id "0HNG1FHL36CGG" started.
2025-10-02 13:45:30.749 +07:00 [DBG] Connection id "0HNG1FHL36CGH" accepted.
2025-10-02 13:45:30.753 +07:00 [DBG] Connection id "0HNG1FHL36CGI" accepted.
2025-10-02 13:45:30.754 +07:00 [DBG] Connection id "0HNG1FHL36CGH" started.
2025-10-02 13:45:30.755 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5207/api/user-profiles/me - null null
2025-10-02 13:45:30.756 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5207/api/semester/all - null null
2025-10-02 13:45:30.760 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:45:30.760 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:45:30.761 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:45:30.761 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:45:30.762 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:45:30.762 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:45:30.763 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:45:30.763 +07:00 [DBG] Connection id "0HNG1FHL36CGI" started.
2025-10-02 13:45:30.763 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:45:30.764 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5207/api/semester/detail/1 - null null
2025-10-02 13:45:30.764 +07:00 [DBG] The request is a preflight request.
2025-10-02 13:45:30.764 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:45:30.764 +07:00 [DBG] The request is a preflight request.
2025-10-02 13:45:30.764 +07:00 [DBG] OPTIONS requests are not supported
2025-10-02 13:45:30.765 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:45:30.765 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:45:30.765 +07:00 [DBG] The request is a preflight request.
2025-10-02 13:45:30.765 +07:00 [DBG] Connection id "0HNG1FHL36CGG" completed keep alive response.
2025-10-02 13:45:30.766 +07:00 [DBG] Connection id "0HNG1FHL36CGI" completed keep alive response.
2025-10-02 13:45:30.766 +07:00 [DBG] Connection id "0HNG1FHL36CGH" completed keep alive response.
2025-10-02 13:45:30.767 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5207/api/semester/all - 204 null null 10.5926ms
2025-10-02 13:45:30.767 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5207/api/user-profiles/me - 204 null null 13.2066ms
2025-10-02 13:45:30.773 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5207/api/semester/detail/1 - 204 null null 3.3838ms
2025-10-02 13:45:30.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/semester/detail/1 - null null
2025-10-02 13:45:30.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/semester/all - null null
2025-10-02 13:45:30.788 +07:00 [DBG] The request path /api/semester/detail/1 does not match a supported file type
2025-10-02 13:45:30.789 +07:00 [DBG] The request path /api/semester/detail/1 does not match a supported file type
2025-10-02 13:45:30.789 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:45:30.790 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:45:30.790 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/user-profiles/me - null null
2025-10-02 13:45:30.790 +07:00 [DBG] The request path /api/semester/all does not match a supported file type
2025-10-02 13:45:30.792 +07:00 [DBG] The request path /api/semester/all does not match a supported file type
2025-10-02 13:45:30.794 +07:00 [DBG] 1 candidate(s) found for the request path '/api/semester/detail/1'
2025-10-02 13:45:30.793 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:45:30.795 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:45:30.795 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)' with route pattern 'api/semester/detail/{semesterId}' is valid for the request path '/api/semester/detail/1'
2025-10-02 13:45:30.796 +07:00 [DBG] 1 candidate(s) found for the request path '/api/semester/all'
2025-10-02 13:45:30.797 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)'
2025-10-02 13:45:30.798 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)' with route pattern 'api/semester/all' is valid for the request path '/api/semester/all'
2025-10-02 13:45:30.798 +07:00 [DBG] The request path /api/user-profiles/me does not match a supported file type
2025-10-02 13:45:30.798 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:45:30.798 +07:00 [DBG] The request path /api/user-profiles/me does not match a supported file type
2025-10-02 13:45:30.799 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2025-10-02 13:45:30.799 +07:00 [INF] CORS policy execution successful.
2025-10-02 13:45:30.799 +07:00 [DBG] 2 candidate(s) found for the request path '/api/user-profiles/me'
2025-10-02 13:45:30.799 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)' with route pattern 'api/user-profiles/me' is valid for the request path '/api/user-profiles/me'
2025-10-02 13:45:30.799 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.UserProfileController.GetById (CapBot.api)' with route pattern 'api/user-profiles/{id}' is valid for the request path '/api/user-profiles/me'
2025-10-02 13:45:30.800 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:45:30.815 +07:00 [DBG] Successfully validated the token.
2025-10-02 13:45:30.817 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 13:45:30.820 +07:00 [DBG] Authorization was successful.
2025-10-02 13:45:30.822 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)'
2025-10-02 13:45:30.823 +07:00 [DBG] Successfully validated the token.
2025-10-02 13:45:30.824 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 13:45:30.824 +07:00 [DBG] Authorization was successful.
2025-10-02 13:45:30.825 +07:00 [INF] Route matched with {action = "GetDetail", controller = "Semester"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDetail(Int32) on controller CapBot.api.Controllers.SemesterController (CapBot.api).
2025-10-02 13:45:30.825 +07:00 [DBG] Successfully validated the token.
2025-10-02 13:45:30.825 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:45:30.826 +07:00 [INF] Route matched with {action = "GetAll", controller = "Semester"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller CapBot.api.Controllers.SemesterController (CapBot.api).
2025-10-02 13:45:30.826 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 13:45:30.826 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:45:30.826 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:45:30.826 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 13:45:30.826 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 13:45:30.827 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:45:30.827 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:45:30.828 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:45:30.828 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:45:30.828 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 13:45:30.829 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 13:45:30.829 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:45:30.829 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:45:30.832 +07:00 [DBG] Authorization was successful.
2025-10-02 13:45:30.833 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:45:30.838 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:45:30.838 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.SemesterController (CapBot.api)
2025-10-02 13:45:30.838 +07:00 [INF] Route matched with {action = "GetMyProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyProfile() on controller CapBot.api.Controllers.UserProfileController (CapBot.api).
2025-10-02 13:45:30.839 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 13:45:30.839 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-02 13:45:30.839 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 13:45:30.839 +07:00 [DBG] Attempting to bind parameter 'semesterId' of type 'System.Int32' ...
2025-10-02 13:45:30.840 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 13:45:30.842 +07:00 [DBG] Attempting to bind parameter 'semesterId' of type 'System.Int32' using the name 'semesterId' in request data ...
2025-10-02 13:45:30.843 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-02 13:45:30.843 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.UserProfileController (CapBot.api)
2025-10-02 13:45:30.844 +07:00 [DBG] Done attempting to bind parameter 'semesterId' of type 'System.Int32'.
2025-10-02 13:45:30.849 +07:00 [DBG] Done attempting to bind parameter 'semesterId' of type 'System.Int32'.
2025-10-02 13:45:30.850 +07:00 [DBG] Attempting to validate the bound parameter 'semesterId' of type 'System.Int32' ...
2025-10-02 13:45:30.851 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.UserProfileController (CapBot.api)
2025-10-02 13:45:30.855 +07:00 [DBG] Done attempting to validate the bound parameter 'semesterId' of type 'System.Int32'.
2025-10-02 13:45:30.854 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:45:30.859 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:45:30.859 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:45:30.866 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:45:30.867 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:45:30.871 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:45:30.873 +07:00 [DBG] Created DbConnection. (1ms).
2025-10-02 13:45:30.873 +07:00 [DBG] Created DbConnection. (7ms).
2025-10-02 13:45:30.873 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:30.873 +07:00 [DBG] Created DbConnection. (5ms).
2025-10-02 13:45:30.874 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:30.873 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.097 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.097 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:45:31.097 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:45:31.097 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:45:31.098 +07:00 [DBG] Executing DbCommand [Parameters=[@__targetUserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Avatar], [p].[CoverImage], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[FullName], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[UserId]
FROM [profiles] AS [p]
WHERE [p].[UserId] = @__targetUserId_0 AND [p].[IsActive] = CAST(1 AS bit) AND [p].[DeletedAt] IS NULL AND [p].[DeletedAt] IS NULL
2025-10-02 13:45:31.103 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.104 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:45:31.104 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:45:31.104 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:45:31.104 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:45:31.108 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.108 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:45:31.109 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:45:31.109 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:45:31.109 +07:00 [DBG] Executing DbCommand [Parameters=[@__semesterId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[Id] = @__semesterId_0 AND [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:45:31.118 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__semesterId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[Id] = @__semesterId_0 AND [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:45:31.118 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__targetUserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Avatar], [p].[CoverImage], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[FullName], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[UserId]
FROM [profiles] AS [p]
WHERE [p].[UserId] = @__targetUserId_0 AND [p].[IsActive] = CAST(1 AS bit) AND [p].[DeletedAt] IS NULL AND [p].[DeletedAt] IS NULL
2025-10-02 13:45:31.119 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.119 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.119 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:45:31.119 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:45:31.119 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.119 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.119 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:45:31.119 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:45:31.120 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:45:31.120 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:45:31.120 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:45:31.120 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:45:31.120 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 13:45:31.120 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-02 13:45:31.120 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-02 13:45:31.120 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:45:31.120 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:45:31.120 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:45:31.120 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:45:31.121 +07:00 [INF] Executed action CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api) in 278.3563ms
2025-10-02 13:45:31.122 +07:00 [INF] Executed action CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api) in 293.0975ms
2025-10-02 13:45:31.122 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.UserProfileController.GetMyProfile (CapBot.api)'
2025-10-02 13:45:31.122 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.SemesterController.GetDetail (CapBot.api)'
2025-10-02 13:45:31.122 +07:00 [DBG] Connection id "0HNG1FHL36CGG" completed keep alive response.
2025-10-02 13:45:31.122 +07:00 [DBG] Connection id "0HNG1FHL36CGH" completed keep alive response.
2025-10-02 13:45:31.122 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:45:31.122 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.122 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:45:31.122 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:45:31.122 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.123 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 13:45:31.123 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/user-profiles/me - 200 null application/json; charset=utf-8 332.968ms
2025-10-02 13:45:31.123 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.123 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:45:31.123 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:45:31.124 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/semester/detail/1 - 200 null application/json; charset=utf-8 340.9761ms
2025-10-02 13:45:31.124 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.124 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:45:31.124 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 13:45:31.124 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 13:45:31.124 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 13:45:31.124 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 13:45:31.125 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 13:45:31.125 +07:00 [INF] Executed action CapBot.api.Controllers.SemesterController.GetAll (CapBot.api) in 296.5232ms
2025-10-02 13:45:31.126 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.SemesterController.GetAll (CapBot.api)'
2025-10-02 13:45:31.126 +07:00 [DBG] Connection id "0HNG1FHL36CGI" completed keep alive response.
2025-10-02 13:45:31.126 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:45:31.127 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:45:31.127 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 13:45:31.127 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/semester/all - 201 null application/json; charset=utf-8 344.7284ms
2025-10-02 13:47:42.345 +07:00 [DBG] Connection id "0HNG1FHL36CGG" disconnecting.
2025-10-02 13:47:42.345 +07:00 [DBG] Connection id "0HNG1FHL36CGG" stopped.
2025-10-02 13:47:42.345 +07:00 [DBG] Connection id "0HNG1FHL36CGG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:47:42.346 +07:00 [DBG] Connection id "0HNG1FHL36CGI" disconnecting.
2025-10-02 13:47:42.346 +07:00 [DBG] Connection id "0HNG1FHL36CGH" disconnecting.
2025-10-02 13:47:42.346 +07:00 [DBG] Connection id "0HNG1FHL36CGI" stopped.
2025-10-02 13:47:42.346 +07:00 [DBG] Connection id "0HNG1FHL36CGI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:47:42.346 +07:00 [DBG] Connection id "0HNG1FHL36CGH" stopped.
2025-10-02 13:47:42.346 +07:00 [DBG] Connection id "0HNG1FHL36CGH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:50:42.984 +07:00 [INF] Application is shutting down...
2025-10-02 13:50:42.986 +07:00 [DBG] Hosting stopping
2025-10-02 13:50:43.004 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 13:50:43.060 +07:00 [DBG] Hosting stopped
2025-10-02 13:51:35.682 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 13:51:35.775 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 13:51:36.026 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.048 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.067 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.069 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.070 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.071 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.326 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.327 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.354 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.355 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.355 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.356 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.364 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.364 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 13:51:36.420 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 13:51:36.421 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 13:51:36.421 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 13:51:36.421 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 13:51:36.421 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 13:51:36.422 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 13:51:36.422 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 13:51:36.422 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 13:51:36.422 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 13:51:36.422 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 13:51:36.422 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 13:51:36.423 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 13:51:36.423 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 13:51:36.423 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 13:51:36.423 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 13:51:36.423 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 13:51:36.424 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 13:51:36.424 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 13:51:36.424 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 13:51:36.607 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:51:36.608 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:51:36.608 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:51:36.609 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:51:36.609 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:51:36.609 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:51:36.609 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:51:36.609 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:51:36.609 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:51:36.610 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:51:36.610 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 13:51:36.797 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 13:51:36.878 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 13:51:37.048 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 13:51:37.087 +07:00 [DBG] Creating DbConnection.
2025-10-02 13:51:37.109 +07:00 [DBG] Created DbConnection. (20ms).
2025-10-02 13:51:37.114 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.346 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.349 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:51:37.354 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 13:51:37.365 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-10-02 13:51:37.371 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:51:37.435 +07:00 [INF] Executed DbCommand (59ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:51:37.487 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:51:37.508 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.515 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 74ms reading results.
2025-10-02 13:51:37.517 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.521 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-10-02 13:51:37.523 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.524 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.525 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:51:37.525 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.525 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.525 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:51:37.528 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:51:37.530 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:51:37.530 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.531 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 13:51:37.531 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.531 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:51:37.532 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.532 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.533 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:51:37.533 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.533 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.533 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:51:37.534 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:51:37.535 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:51:37.535 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.535 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:51:37.535 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.535 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:51:37.535 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.535 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.536 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:51:37.536 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.536 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.536 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:51:37.537 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 13:51:37.537 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:51:37.537 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.538 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:51:37.538 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.538 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:51:37.543 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 13:51:37.552 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 13:51:37.553 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.553 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.553 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:51:37.553 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.554 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.554 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:51:37.563 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:51:37.589 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:51:37.622 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.623 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 59ms reading results.
2025-10-02 13:51:37.623 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.623 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:51:37.626 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 13:51:37.630 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.630 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.631 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:51:37.631 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.631 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.632 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:51:37.633 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:51:37.634 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:51:37.634 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.634 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:51:37.634 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.634 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:51:37.634 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 13:51:37.635 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.635 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.635 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:51:37.635 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.635 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.635 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:51:37.636 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:51:37.637 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:51:37.637 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.637 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:51:37.637 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.638 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:51:37.638 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.638 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.638 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 13:51:37.638 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.638 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 13:51:37.638 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:51:37.639 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 13:51:37.640 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 13:51:37.640 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.640 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 13:51:37.640 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.640 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 13:51:37.640 +07:00 [INF] Data seeding completed successfully
2025-10-02 13:51:37.642 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 13:51:37.644 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 13:51:37.645 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 13:51:37.674 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 13:51:37.911 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 13:51:38.055 +07:00 [DBG] Hosting starting
2025-10-02 13:51:38.067 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 13:51:38.071 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 13:51:38.073 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 13:51:38.083 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 13:51:38.086 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 13:51:38.086 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 13:51:38.091 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 13:51:38.096 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 13:51:38.097 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 13:51:38.099 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 13:51:38.100 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 13:51:38.103 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 13:51:38.105 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 13:51:38.106 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 13:51:38.172 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 13:51:38.172 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 13:51:38.172 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 13:51:38.172 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 13:51:38.172 +07:00 [INF] Hosting environment: Development
2025-10-02 13:51:38.172 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 13:51:38.174 +07:00 [DBG] Hosting started
2025-10-02 13:51:38.406 +07:00 [DBG] Connection id "0HNG1G0HCCQPT" accepted.
2025-10-02 13:51:38.407 +07:00 [DBG] Connection id "0HNG1G0HCCQPT" started.
2025-10-02 13:51:38.475 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 13:51:38.506 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 13:51:38.603 +07:00 [DBG] Connection id "0HNG1G0HCCQPU" accepted.
2025-10-02 13:51:38.685 +07:00 [DBG] Connection id "0HNG1G0HCCQPU" started.
2025-10-02 13:51:38.949 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 13:51:38.965 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 13:51:38.965 +07:00 [DBG] Connection id "0HNG1G0HCCQPT" completed keep alive response.
2025-10-02 13:51:38.967 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 496.3161ms
2025-10-02 13:51:38.974 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 13:51:38.985 +07:00 [DBG] Connection id "0HNG1G0HCCQPT" completed keep alive response.
2025-10-02 13:51:38.986 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 11.6629ms
2025-10-02 13:51:39.080 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 13:51:39.406 +07:00 [DBG] Connection id "0HNG1G0HCCQPT" completed keep alive response.
2025-10-02 13:51:39.406 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 326.0666ms
2025-10-02 13:53:50.095 +07:00 [DBG] Connection id "0HNG1G0HCCQPU" disconnecting.
2025-10-02 13:53:50.096 +07:00 [DBG] Connection id "0HNG1G0HCCQPU" stopped.
2025-10-02 13:53:50.097 +07:00 [DBG] Connection id "0HNG1G0HCCQPU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 13:53:51.111 +07:00 [DBG] Connection id "0HNG1G0HCCQPT" disconnecting.
2025-10-02 13:53:51.111 +07:00 [DBG] Connection id "0HNG1G0HCCQPT" stopped.
2025-10-02 13:53:51.112 +07:00 [DBG] Connection id "0HNG1G0HCCQPT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 14:01:13.726 +07:00 [DBG] Connection id "0HNG1G0HCCQPV" accepted.
2025-10-02 14:01:13.727 +07:00 [DBG] Connection id "0HNG1G0HCCQPV" started.
2025-10-02 14:01:13.728 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/topic/check-duplicate/6?threshold=0.6 - null null
2025-10-02 14:01:13.730 +07:00 [DBG] The request path /api/topic/check-duplicate/6 does not match a supported file type
2025-10-02 14:01:13.732 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 14:01:13.732 +07:00 [DBG] The request path /api/topic/check-duplicate/6 does not match a supported file type
2025-10-02 14:01:13.787 +07:00 [DBG] 1 candidate(s) found for the request path '/api/topic/check-duplicate/6'
2025-10-02 14:01:13.788 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.TopicController.CheckDuplicate (CapBot.api)' with route pattern 'api/topic/check-duplicate/{topicId}' is valid for the request path '/api/topic/check-duplicate/6'
2025-10-02 14:01:13.789 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.TopicController.CheckDuplicate (CapBot.api)'
2025-10-02 14:01:13.833 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-02 14:01:13.835 +07:00 [DBG] Policy authentication schemes  did not succeed
2025-10-02 14:01:13.837 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-02 14:01:13.840 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-02 14:01:13.841 +07:00 [DBG] Connection id "0HNG1G0HCCQPV" completed keep alive response.
2025-10-02 14:01:13.842 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/topic/check-duplicate/6?threshold=0.6 - 401 0 null 113.8511ms
2025-10-02 14:02:07.573 +07:00 [DBG] Connection id "0HNG1G0HCCQPV" received FIN.
2025-10-02 14:02:07.574 +07:00 [DBG] Connection id "0HNG1G0HCCQPV" disconnecting.
2025-10-02 14:02:07.574 +07:00 [DBG] Connection id "0HNG1G0HCCQPV" stopped.
2025-10-02 14:02:07.574 +07:00 [DBG] Connection id "0HNG1G0HCCQPV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 14:02:12.667 +07:00 [INF] Application is shutting down...
2025-10-02 14:02:12.668 +07:00 [DBG] Hosting stopping
2025-10-02 14:02:12.674 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 14:02:12.698 +07:00 [DBG] Hosting stopped
2025-10-02 14:17:38.279 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 14:17:38.446 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 14:17:38.881 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:38.934 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:38.972 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:38.975 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:38.976 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:38.979 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:39.456 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:39.458 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:39.500 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:39.501 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:39.501 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:39.504 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:39.527 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:39.528 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:17:39.646 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 14:17:39.646 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 14:17:39.647 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 14:17:39.647 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 14:17:39.647 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 14:17:39.648 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 14:17:39.648 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 14:17:39.648 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 14:17:39.648 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 14:17:39.649 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 14:17:39.649 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 14:17:39.649 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 14:17:39.650 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 14:17:39.650 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 14:17:39.650 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 14:17:39.650 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 14:17:39.651 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 14:17:39.651 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 14:17:39.651 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 14:17:39.975 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:17:39.976 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:17:39.976 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:17:39.977 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:17:39.977 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:17:39.977 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:17:39.978 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:17:39.978 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:17:39.978 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:17:39.979 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:17:39.979 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:17:40.262 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 14:17:40.370 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 14:17:40.670 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 14:17:40.736 +07:00 [DBG] Creating DbConnection.
2025-10-02 14:17:40.770 +07:00 [DBG] Created DbConnection. (30ms).
2025-10-02 14:17:40.778 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.030 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.034 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:17:41.042 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-02 14:17:41.054 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-10-02 14:17:41.068 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:17:41.151 +07:00 [INF] Executed DbCommand (86ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:17:41.216 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:17:41.248 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.256 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 99ms reading results.
2025-10-02 14:17:41.262 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.269 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (7ms).
2025-10-02 14:17:41.275 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.277 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.277 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:17:41.278 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.279 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 14:17:41.279 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:17:41.283 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:17:41.285 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:17:41.285 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.286 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 14:17:41.286 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.286 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:17:41.287 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.288 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.288 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:17:41.288 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.288 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.288 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:17:41.292 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:17:41.292 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:17:41.293 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.293 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 14:17:41.294 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.294 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:17:41.297 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.299 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.300 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:17:41.300 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.300 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.300 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:17:41.302 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:17:41.303 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:17:41.303 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.304 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 14:17:41.304 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.304 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:17:41.323 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 14:17:41.335 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 14:17:41.337 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.337 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.338 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:17:41.338 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.338 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.338 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:17:41.351 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:17:41.390 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:17:41.440 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.441 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 88ms reading results.
2025-10-02 14:17:41.441 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.441 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:17:41.446 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 14:17:41.451 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.452 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.452 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:17:41.452 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.452 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.453 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:17:41.458 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:17:41.459 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:17:41.460 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.460 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 14:17:41.460 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.461 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:17:41.463 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 14:17:41.465 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.465 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.466 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:17:41.466 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.466 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.467 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:17:41.469 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:17:41.471 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:17:41.471 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.472 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 14:17:41.472 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.473 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:17:41.475 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.476 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.476 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:17:41.476 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.477 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:17:41.477 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:17:41.480 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:17:41.481 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:17:41.482 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.483 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 14:17:41.483 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.483 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:17:41.485 +07:00 [INF] Data seeding completed successfully
2025-10-02 14:17:41.488 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 14:17:41.493 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:17:41.495 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 14:17:41.603 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 14:17:42.038 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 14:17:42.290 +07:00 [DBG] Hosting starting
2025-10-02 14:17:42.313 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 14:17:42.316 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 14:17:42.317 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 14:17:42.326 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 14:17:42.333 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 14:17:42.333 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 14:17:42.342 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 14:17:42.349 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 14:17:42.350 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 14:17:42.354 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 14:17:42.355 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 14:17:42.362 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 14:17:42.367 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 14:17:42.368 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 14:17:42.470 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 14:17:42.470 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 14:17:42.470 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 14:17:42.470 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 14:17:42.471 +07:00 [INF] Hosting environment: Development
2025-10-02 14:17:42.471 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 14:17:42.474 +07:00 [DBG] Hosting started
2025-10-02 14:17:43.286 +07:00 [DBG] Connection id "0HNG1GF3O86C9" accepted.
2025-10-02 14:17:43.290 +07:00 [DBG] Connection id "0HNG1GF3O86C9" started.
2025-10-02 14:17:43.795 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 14:17:43.823 +07:00 [DBG] Connection id "0HNG1GF3O86CA" accepted.
2025-10-02 14:17:43.823 +07:00 [DBG] Connection id "0HNG1GF3O86CA" started.
2025-10-02 14:17:43.880 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 14:17:44.183 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 14:17:44.207 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 14:17:44.207 +07:00 [DBG] Connection id "0HNG1GF3O86C9" completed keep alive response.
2025-10-02 14:17:44.213 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 425.2225ms
2025-10-02 14:17:44.323 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 14:17:44.327 +07:00 [DBG] Connection id "0HNG1GF3O86C9" completed keep alive response.
2025-10-02 14:17:44.328 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 4.8258ms
2025-10-02 14:17:44.619 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 14:17:45.116 +07:00 [DBG] Connection id "0HNG1GF3O86C9" completed keep alive response.
2025-10-02 14:17:45.117 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 497.5977ms
2025-10-02 14:17:49.411 +07:00 [DBG] Connection id "0HNG1GF3O86CA" received FIN.
2025-10-02 14:17:49.411 +07:00 [DBG] Connection id "0HNG1GF3O86C9" received FIN.
2025-10-02 14:17:49.414 +07:00 [DBG] Connection id "0HNG1GF3O86C9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 14:17:49.414 +07:00 [DBG] Connection id "0HNG1GF3O86CA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 14:17:49.415 +07:00 [DBG] Connection id "0HNG1GF3O86CA" disconnecting.
2025-10-02 14:17:49.415 +07:00 [DBG] Connection id "0HNG1GF3O86C9" disconnecting.
2025-10-02 14:17:49.417 +07:00 [DBG] Connection id "0HNG1GF3O86CA" stopped.
2025-10-02 14:17:49.417 +07:00 [DBG] Connection id "0HNG1GF3O86C9" stopped.
2025-10-02 14:18:15.623 +07:00 [DBG] Connection id "0HNG1GF3O86CB" accepted.
2025-10-02 14:18:15.623 +07:00 [DBG] Connection id "0HNG1GF3O86CB" started.
2025-10-02 14:18:15.625 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/Account/my-user-roles - null null
2025-10-02 14:18:15.630 +07:00 [DBG] The request path /api/Account/my-user-roles does not match a supported file type
2025-10-02 14:18:15.634 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 14:18:15.635 +07:00 [DBG] The request path /api/Account/my-user-roles does not match a supported file type
2025-10-02 14:18:15.695 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Account/my-user-roles'
2025-10-02 14:18:15.696 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)' with route pattern 'api/Account/my-user-roles' is valid for the request path '/api/Account/my-user-roles'
2025-10-02 14:18:15.697 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)'
2025-10-02 14:18:15.812 +07:00 [DBG] Successfully validated the token.
2025-10-02 14:18:15.813 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 14:18:15.818 +07:00 [DBG] Authorization was successful.
2025-10-02 14:18:15.828 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)'
2025-10-02 14:18:15.851 +07:00 [INF] Route matched with {action = "GetMyUserRoles", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyUserRoles() on controller CapBot.api.Controllers.AccountController (CapBot.api).
2025-10-02 14:18:15.856 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 14:18:15.857 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 14:18:15.857 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 14:18:15.857 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 14:18:15.858 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 14:18:15.861 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.AccountController (CapBot.api)
2025-10-02 14:18:15.866 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.AccountController (CapBot.api)
2025-10-02 14:18:15.931 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 14:18:15.950 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2025-10-02 14:18:15.978 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 14:18:15.979 +07:00 [DBG] Creating DbConnection.
2025-10-02 14:18:15.980 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 14:18:15.980 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:18:15.981 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:18:15.981 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:18:15.981 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:18:15.982 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:18:15.983 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[Id] = @__p_0
2025-10-02 14:18:16.000 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[Id] = @__p_0
2025-10-02 14:18:16.001 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:18:16.001 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:18:16.001 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 14:18:16.002 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:18:16.002 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:18:16.017 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .Join(
        inner: DbSet<Role>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-10-02 14:18:16.059 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Name
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 14:18:16.061 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:18:16.061 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:18:16.062 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:18:16.062 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:18:16.062 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:18:16.062 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-10-02 14:18:16.076 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-10-02 14:18:16.079 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:18:16.079 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 14:18:16.079 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:18:16.079 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:18:16.082 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .Where(r => __roleNames_0.Contains(r.Name))'
2025-10-02 14:18:16.141 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Role>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
        SELECT r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM roles AS r
        WHERE r.Name IN (
            SELECT r0.value
            FROM OPENJSON(@__roleNames_0) WITH (value nvarchar(max) '') AS r0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 14:18:16.150 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:18:16.150 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:18:16.150 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:18:16.151 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:18:16.162 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-10-02 14:18:16.163 +07:00 [DBG] Executing DbCommand [Parameters=[@__roleNames_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleNames_0) WITH ([value] nvarchar(max) '$') AS [r0]
)
2025-10-02 14:18:16.187 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__roleNames_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleNames_0) WITH ([value] nvarchar(max) '$') AS [r0]
)
2025-10-02 14:18:16.189 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:18:16.190 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:18:16.190 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:18:16.191 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 14:18:16.192 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:18:16.192 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:18:16.198 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 14:18:16.200 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 14:18:16.201 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 14:18:16.206 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 14:18:16.208 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 14:18:16.258 +07:00 [INF] Executed action CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api) in 394.8184ms
2025-10-02 14:18:16.259 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)'
2025-10-02 14:18:16.261 +07:00 [DBG] Connection id "0HNG1GF3O86CB" completed keep alive response.
2025-10-02 14:18:16.262 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 14:18:16.262 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:18:16.262 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 14:18:16.264 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/Account/my-user-roles - 200 null application/json; charset=utf-8 639.4782ms
2025-10-02 14:18:19.463 +07:00 [DBG] Connection id "0HNG1GF3O86CB" received FIN.
2025-10-02 14:18:19.463 +07:00 [DBG] Connection id "0HNG1GF3O86CB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 14:18:19.464 +07:00 [DBG] Connection id "0HNG1GF3O86CB" disconnecting.
2025-10-02 14:18:19.464 +07:00 [DBG] Connection id "0HNG1GF3O86CB" stopped.
2025-10-02 14:19:34.287 +07:00 [DBG] Connection id "0HNG1GF3O86CC" accepted.
2025-10-02 14:19:34.287 +07:00 [DBG] Connection id "0HNG1GF3O86CC" started.
2025-10-02 14:19:34.289 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-10-02 14:19:34.289 +07:00 [DBG] POST requests are not supported
2025-10-02 14:19:34.289 +07:00 [DBG] POST requests are not supported
2025-10-02 14:19:34.291 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 14:19:34.292 +07:00 [INF] CORS policy execution successful.
2025-10-02 14:19:34.300 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 14:19:34.300 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 14:19:34.300 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 14:19:34.302 +07:00 [DBG] Successfully validated the token.
2025-10-02 14:19:34.303 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 14:19:34.312 +07:00 [DBG] Authorization was successful.
2025-10-02 14:19:34.313 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 14:19:34.334 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 14:19:34.335 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 14:19:34.335 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 14:19:34.335 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 14:19:34.335 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 14:19:34.335 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 14:19:34.336 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 14:19:34.536 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 14:19:34.545 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 14:19:34.547 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 14:19:34.548 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 14:19:34.549 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 14:19:34.549 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 14:19:34.549 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 14:19:34.568 +07:00 [DBG] Connection id "0HNG1GF3O86CC", Request id "0HNG1GF3O86CC:00000001": started reading request body.
2025-10-02 14:19:34.568 +07:00 [DBG] Connection id "0HNG1GF3O86CC", Request id "0HNG1GF3O86CC:00000001": done reading request body.
2025-10-02 14:19:34.581 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 14:19:34.581 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 14:19:34.582 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 14:19:34.582 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 14:19:34.596 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 14:19:34.597 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 14:19:34.599 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 14:19:34.600 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 14:19:34.600 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 14:19:34.600 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 14:19:34.601 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 14:19:34.608 +07:00 [INF] Processing AI suggestion for SubmissionId: 116
2025-10-02 14:19:34.615 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":116,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T07:18:33.2840000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 14:19:34.647 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 14:19:34.660 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 14:19:34.672 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 14:19:34.710 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 14:19:34.713 +07:00 [DBG] Creating DbConnection.
2025-10-02 14:19:34.713 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 14:19:34.713 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:19:34.714 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:19:34.714 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:19:34.714 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:19:34.714 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:19:34.715 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 14:19:34.751 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 14:19:34.752 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:19:34.752 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 14:19:34.752 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:19:34.753 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:19:34.758 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 14:19:34.761 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 14:19:34.764 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 14:19:34.768 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 14:19:34.768 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 14:19:34.773 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 436.5976ms
2025-10-02 14:19:34.774 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 14:19:34.777 +07:00 [DBG] Connection id "0HNG1GF3O86CC" completed keep alive response.
2025-10-02 14:19:34.778 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 14:19:34.778 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:19:34.780 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 14:19:34.784 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 404 null application/json; charset=utf-8 495.1048ms
2025-10-02 14:19:39.620 +07:00 [DBG] Connection id "0HNG1GF3O86CC" received FIN.
2025-10-02 14:19:39.621 +07:00 [DBG] Connection id "0HNG1GF3O86CC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 14:19:39.621 +07:00 [DBG] Connection id "0HNG1GF3O86CC" disconnecting.
2025-10-02 14:19:39.621 +07:00 [DBG] Connection id "0HNG1GF3O86CC" stopped.
2025-10-02 14:21:07.097 +07:00 [DBG] Connection id "0HNG1GF3O86CD" accepted.
2025-10-02 14:21:07.097 +07:00 [DBG] Connection id "0HNG1GF3O86CD" started.
2025-10-02 14:21:07.098 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 14:21:07.098 +07:00 [DBG] POST requests are not supported
2025-10-02 14:21:07.098 +07:00 [DBG] POST requests are not supported
2025-10-02 14:21:07.099 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 14:21:07.099 +07:00 [INF] CORS policy execution successful.
2025-10-02 14:21:07.102 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 14:21:07.102 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 14:21:07.103 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 14:21:07.108 +07:00 [DBG] Successfully validated the token.
2025-10-02 14:21:07.108 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 14:21:07.116 +07:00 [DBG] Authorization was successful.
2025-10-02 14:21:07.117 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 14:21:07.118 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 14:21:07.118 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 14:21:07.119 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 14:21:07.119 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 14:21:07.119 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 14:21:07.119 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 14:21:07.120 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 14:21:07.126 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 14:21:07.128 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 14:21:07.129 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 14:21:07.129 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 14:21:07.129 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 14:21:07.130 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 14:21:07.131 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 14:21:07.135 +07:00 [DBG] Connection id "0HNG1GF3O86CD", Request id "0HNG1GF3O86CD:00000001": started reading request body.
2025-10-02 14:21:07.136 +07:00 [DBG] Connection id "0HNG1GF3O86CD", Request id "0HNG1GF3O86CD:00000001": done reading request body.
2025-10-02 14:21:07.139 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 14:21:07.141 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 14:21:07.142 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 14:21:07.142 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 14:21:07.143 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 14:21:07.144 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 14:21:07.144 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 14:21:07.144 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 14:21:07.145 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 14:21:07.145 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 14:21:07.145 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 14:21:07.145 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 14:21:07.147 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T07:18:33.2840000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 14:21:07.151 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 14:21:07.153 +07:00 [DBG] Creating DbConnection.
2025-10-02 14:21:07.153 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 14:21:07.153 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:21:07.154 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:21:07.154 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:21:07.154 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:21:07.154 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:21:07.154 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 14:21:07.181 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 14:21:07.189 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:21:07.189 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 7ms reading results.
2025-10-02 14:21:07.189 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:21:07.190 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:21:07.194 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 14:21:07.207 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 14:21:07.207 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 14:21:07.208 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 14:21:07.208 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 14:21:07.281 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 14:21:07.292 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 14:21:07.302 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:21:07.302 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:21:07.302 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:21:07.302 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:21:07.303 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:21:07.303 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 14:21:07.513 +07:00 [INF] Executed DbCommand (210ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 14:21:07.525 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:21:07.525 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 11ms reading results.
2025-10-02 14:21:07.525 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:21:07.525 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:21:09.756 +07:00 [DBG] Reviewer 4 skill 'AI' sim=0.5446 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:21:13.994 +07:00 [DBG] Reviewer 4 semantic breakdown: maxSim=0.5446 matchedSkills=[]
2025-10-02 14:21:47.964 +07:00 [DBG] Reviewer 4: skillScore=0.5446 matched=
2025-10-02 14:21:47.968 +07:00 [DBG] Reviewer 4 field scores: Title:0.5593, VN_Title:0.5477, Category:0, Description:0.5454, Objectives:0.5604, Problem:0.5388, Content:0.5483, Context:0.5501
2025-10-02 14:21:49.252 +07:00 [DBG] Reviewer 7 skill 'SE' sim=0.5399 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:21:49.253 +07:00 [DBG] Reviewer 7 semantic breakdown: maxSim=0.5399 matchedSkills=[]
2025-10-02 14:21:49.260 +07:00 [DBG] Reviewer 7: skillScore=0.5399 matched=
2025-10-02 14:21:49.261 +07:00 [DBG] Reviewer 7 field scores: Title:0.5436, VN_Title:0.4988, Category:0, Description:0.5591, Objectives:0.5587, Problem:0.5201, Content:0.5366, Context:0.5509
2025-10-02 14:21:50.449 +07:00 [DBG] Reviewer 9 skill 'E-learning' sim=0.5276 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:21:50.450 +07:00 [DBG] Reviewer 9 semantic breakdown: maxSim=0.5276 matchedSkills=[]
2025-10-02 14:21:50.453 +07:00 [DBG] Reviewer 9: skillScore=0.5276 matched=
2025-10-02 14:21:50.453 +07:00 [DBG] Reviewer 9 field scores: Title:0.5353, VN_Title:0.5107, Category:0, Description:0.5176, Objectives:0.5447, Problem:0.5022, Content:0.5266, Context:0.5259
2025-10-02 14:21:51.578 +07:00 [DBG] Reviewer 18 skill 'Chuyên gia về trí tuệ nhân tạo và học máy AI' sim=0.5892 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:21:51.579 +07:00 [DBG] Reviewer 18 semantic breakdown: maxSim=0.5892 matchedSkills=[]
2025-10-02 14:21:51.582 +07:00 [DBG] Reviewer 18: skillScore=0.5892 matched=
2025-10-02 14:21:51.582 +07:00 [DBG] Reviewer 18 field scores: Title:0.5346, VN_Title:0.5703, Category:0, Description:0.5206, Objectives:0.5360, Problem:0.5227, Content:0.5486, Context:0.5322
2025-10-02 14:21:52.752 +07:00 [DBG] Reviewer 19 skill 'Chuyên môn về phát triển ứng dụng web full-stack' sim=0.6420 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:21:52.753 +07:00 [DBG] Reviewer 19 semantic breakdown: maxSim=0.6420 matchedSkills=[Chuyên môn về phát triển ứng dụng web full-stack]
2025-10-02 14:21:52.763 +07:00 [DBG] Reviewer 19: skillScore=0.6420 matched=Chuyên môn về phát triển ứng dụng web full-stack
2025-10-02 14:21:52.763 +07:00 [DBG] Reviewer 19 field scores: Title:0.5389, VN_Title:0.5562, Category:0, Description:0.5945, Objectives:0.5704, Problem:0.5038, Content:0.6052, Context:0.5234
2025-10-02 14:21:53.940 +07:00 [DBG] Reviewer 20 skill 'Nghiên cứu về Internet of Things và hệ thống nhúng' sim=0.6099 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:21:53.942 +07:00 [DBG] Reviewer 20 semantic breakdown: maxSim=0.6099 matchedSkills=[Nghiên cứu về Internet of Things và hệ thống nhúng]
2025-10-02 14:21:53.945 +07:00 [DBG] Reviewer 20: skillScore=0.6099 matched=Nghiên cứu về Internet of Things và hệ thống nhúng
2025-10-02 14:21:53.945 +07:00 [DBG] Reviewer 20 field scores: Title:0.5444, VN_Title:0.5661, Category:0, Description:0.5345, Objectives:0.5326, Problem:0.5319, Content:0.5516, Context:0.5405
2025-10-02 14:21:55.083 +07:00 [DBG] Reviewer 21 skill 'Chuyên gia xử lý dữ liệu lớn và phân tích dữ liệu' sim=0.5815 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:21:55.083 +07:00 [DBG] Reviewer 21 semantic breakdown: maxSim=0.5815 matchedSkills=[]
2025-10-02 14:21:55.087 +07:00 [DBG] Reviewer 21: skillScore=0.5815 matched=
2025-10-02 14:21:55.088 +07:00 [DBG] Reviewer 21 field scores: Title:0.5038, VN_Title:0.5286, Category:0, Description:0.5449, Objectives:0.5390, Problem:0.4965, Content:0.5537, Context:0.5585
2025-10-02 14:21:56.238 +07:00 [DBG] Reviewer 22 skill 'Phát triển ứng dụng di động và trải nghiệm người dùng' sim=0.6272 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:21:56.238 +07:00 [DBG] Reviewer 22 semantic breakdown: maxSim=0.6272 matchedSkills=[Phát triển ứng dụng di động và trải nghiệm người dùng]
2025-10-02 14:21:56.243 +07:00 [DBG] Reviewer 22: skillScore=0.6272 matched=Phát triển ứng dụng di động và trải nghiệm người dùng
2025-10-02 14:21:56.244 +07:00 [DBG] Reviewer 22 field scores: Title:0.5600, VN_Title:0.5888, Category:0, Description:0.5839, Objectives:0.5534, Problem:0.5617, Content:0.5884, Context:0.5689
2025-10-02 14:21:57.462 +07:00 [DBG] Reviewer 23 skill 'Nghiên cứu về blockchain và hệ thống phi tập trung' sim=0.5937 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:21:57.463 +07:00 [DBG] Reviewer 23 semantic breakdown: maxSim=0.5937 matchedSkills=[]
2025-10-02 14:21:57.465 +07:00 [DBG] Reviewer 23: skillScore=0.5937 matched=
2025-10-02 14:21:57.466 +07:00 [DBG] Reviewer 23 field scores: Title:0.5268, VN_Title:0.5633, Category:0, Description:0.5315, Objectives:0.5631, Problem:0.5449, Content:0.5510, Context:0.5573
2025-10-02 14:21:58.621 +07:00 [DBG] Reviewer 24 skill 'Chuyên môn về robot và tự động hóa công nghiệp' sim=0.5579 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:21:58.622 +07:00 [DBG] Reviewer 24 semantic breakdown: maxSim=0.5579 matchedSkills=[]
2025-10-02 14:21:58.625 +07:00 [DBG] Reviewer 24: skillScore=0.5579 matched=
2025-10-02 14:21:58.625 +07:00 [DBG] Reviewer 24 field scores: Title:0.5027, VN_Title:0.5348, Category:0, Description:0.4956, Objectives:0.5227, Problem:0.4929, Content:0.5178, Context:0.5047
2025-10-02 14:21:59.757 +07:00 [DBG] Reviewer 25 skill 'Phát triển giải pháp thực tế ảo (VR) và tăng cường (AR)' sim=0.6353 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:21:59.758 +07:00 [DBG] Reviewer 25 semantic breakdown: maxSim=0.6353 matchedSkills=[Phát triển giải pháp thực tế ảo (VR) và tăng cường (AR)]
2025-10-02 14:21:59.760 +07:00 [DBG] Reviewer 25: skillScore=0.6353 matched=Phát triển giải pháp thực tế ảo (VR) và tăng cường (AR)
2025-10-02 14:21:59.760 +07:00 [DBG] Reviewer 25 field scores: Title:0.5346, VN_Title:0.5703, Category:0, Description:0.5964, Objectives:0.5314, Problem:0.5361, Content:0.6078, Context:0.5715
2025-10-02 14:22:00.913 +07:00 [DBG] Reviewer 26 skill 'Ứng dụng công nghệ xanh và bền vững trong sản xuất và đô thị thông minh' sim=0.5441 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:22:00.914 +07:00 [DBG] Reviewer 26 semantic breakdown: maxSim=0.5441 matchedSkills=[]
2025-10-02 14:22:00.918 +07:00 [DBG] Reviewer 26: skillScore=0.5441 matched=
2025-10-02 14:22:00.918 +07:00 [DBG] Reviewer 26 field scores: Title:0.4871, VN_Title:0.5229, Category:0, Description:0.4931, Objectives:0.4955, Problem:0.4744, Content:0.5078, Context:0.5332
2025-10-02 14:22:03.491 +07:00 [DBG] AI explanation generated (preview): Recommendation: reviewer.02@gmail.com, Id:19, Overall:62.1%, SkillMatch:64.2% - Matched skills in full-stack web application development and relevant tokens, with 0 active assignments.
Recommendation:...
2025-10-02 14:22:03.492 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 14:22:03.492 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 14:22:03.492 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 14:22:03.492 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 14:22:03.492 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 14:22:03.551 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 56431.7993ms
2025-10-02 14:22:03.551 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 14:22:03.552 +07:00 [DBG] Connection id "0HNG1GF3O86CD" completed keep alive response.
2025-10-02 14:22:03.552 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 14:22:03.552 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:22:03.552 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 14:22:03.552 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 56454.1015ms
2025-10-02 14:24:14.360 +07:00 [DBG] Connection id "0HNG1GF3O86CD" disconnecting.
2025-10-02 14:24:14.360 +07:00 [DBG] Connection id "0HNG1GF3O86CD" stopped.
2025-10-02 14:24:14.360 +07:00 [DBG] Connection id "0HNG1GF3O86CD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 14:26:56.062 +07:00 [INF] Application is shutting down...
2025-10-02 14:26:56.063 +07:00 [DBG] Hosting stopping
2025-10-02 14:26:56.070 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 14:26:56.089 +07:00 [DBG] Hosting stopped
2025-10-02 14:53:30.024 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 14:53:30.141 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 14:53:30.432 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.460 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.485 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.488 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.488 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.489 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.788 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.789 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.849 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.849 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.850 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.852 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.878 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.878 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 14:53:30.956 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 14:53:30.957 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 14:53:30.957 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 14:53:30.957 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 14:53:30.957 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 14:53:30.957 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 14:53:30.957 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 14:53:30.957 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 14:53:30.957 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 14:53:30.957 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 14:53:30.958 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 14:53:30.958 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 14:53:30.958 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 14:53:30.958 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 14:53:30.958 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 14:53:30.958 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 14:53:30.958 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 14:53:30.958 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 14:53:30.958 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 14:53:31.148 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:53:31.149 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:53:31.149 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:53:31.149 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:53:31.149 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:53:31.149 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:53:31.150 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:53:31.150 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:53:31.150 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:53:31.150 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:53:31.150 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 14:53:31.348 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 14:53:31.481 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 14:53:31.784 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 14:53:31.830 +07:00 [DBG] Creating DbConnection.
2025-10-02 14:53:31.858 +07:00 [DBG] Created DbConnection. (25ms).
2025-10-02 14:53:31.866 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.070 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.075 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:53:32.081 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 14:53:32.092 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2025-10-02 14:53:32.103 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:53:32.168 +07:00 [INF] Executed DbCommand (66ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:53:32.216 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:53:32.243 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.252 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 79ms reading results.
2025-10-02 14:53:32.255 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.260 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (4ms).
2025-10-02 14:53:32.269 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.270 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.271 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:53:32.271 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.271 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.271 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:53:32.274 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:53:32.275 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:53:32.276 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.276 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 14:53:32.276 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.276 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:53:32.277 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.277 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.278 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:53:32.278 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.278 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.279 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:53:32.280 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:53:32.282 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:53:32.282 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.282 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 14:53:32.282 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.283 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:53:32.283 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.283 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.284 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:53:32.284 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.284 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.284 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:53:32.285 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 14:53:32.285 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:53:32.286 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.286 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 14:53:32.286 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.286 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:53:32.295 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 14:53:32.305 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 14:53:32.307 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.308 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.308 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:53:32.308 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.308 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.308 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:53:32.330 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:53:32.378 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:53:32.422 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.423 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 92ms reading results.
2025-10-02 14:53:32.423 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.423 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:53:32.429 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 14:53:32.432 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.433 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.433 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:53:32.433 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.433 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.434 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:53:32.436 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:53:32.436 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:53:32.437 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.437 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 14:53:32.437 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.437 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:53:32.438 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 14:53:32.438 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.439 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.439 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:53:32.439 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.439 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.439 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:53:32.440 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:53:32.441 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:53:32.441 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.441 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 14:53:32.442 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.442 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:53:32.442 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.443 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.443 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:53:32.443 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.443 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:53:32.444 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:53:32.446 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 14:53:32.446 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 14:53:32.447 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.447 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 14:53:32.448 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.448 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:53:32.448 +07:00 [INF] Data seeding completed successfully
2025-10-02 14:53:32.450 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 14:53:32.453 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:53:32.454 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 14:53:32.496 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 14:53:32.877 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 14:53:33.127 +07:00 [DBG] Hosting starting
2025-10-02 14:53:33.151 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 14:53:33.154 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 14:53:33.156 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 14:53:33.166 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 14:53:33.171 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 14:53:33.171 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 14:53:33.180 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 14:53:33.183 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 14:53:33.184 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 14:53:33.186 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 14:53:33.188 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 14:53:33.193 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 14:53:33.198 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 14:53:33.199 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 14:53:33.287 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 14:53:33.287 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 14:53:33.287 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 14:53:33.287 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 14:53:33.287 +07:00 [INF] Hosting environment: Development
2025-10-02 14:53:33.287 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 14:53:33.290 +07:00 [DBG] Hosting started
2025-10-02 14:53:34.172 +07:00 [DBG] Connection id "0HNG1H34OM4K2" accepted.
2025-10-02 14:53:34.174 +07:00 [DBG] Connection id "0HNG1H34OM4K2" started.
2025-10-02 14:53:34.390 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 14:53:34.443 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 14:53:34.541 +07:00 [DBG] Connection id "0HNG1H34OM4K3" accepted.
2025-10-02 14:53:34.553 +07:00 [DBG] Connection id "0HNG1H34OM4K3" started.
2025-10-02 14:53:34.556 +07:00 [DBG] Connection id "0HNG1H34OM4K3" received FIN.
2025-10-02 14:53:34.561 +07:00 [DBG] Connection id "0HNG1H34OM4K3" disconnecting.
2025-10-02 14:53:34.571 +07:00 [DBG] Connection id "0HNG1H34OM4K3" stopped.
2025-10-02 14:53:34.576 +07:00 [DBG] Connection id "0HNG1H34OM4K3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 14:53:34.935 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 14:53:34.962 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 14:53:34.963 +07:00 [DBG] Connection id "0HNG1H34OM4K2" completed keep alive response.
2025-10-02 14:53:34.969 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 590.2111ms
2025-10-02 14:53:35.044 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 14:53:35.052 +07:00 [DBG] Connection id "0HNG1H34OM4K2" completed keep alive response.
2025-10-02 14:53:35.055 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 8.5748ms
2025-10-02 14:53:36.766 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 14:53:37.210 +07:00 [DBG] Connection id "0HNG1H34OM4K2" completed keep alive response.
2025-10-02 14:53:37.211 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 445.0067ms
2025-10-02 14:53:39.504 +07:00 [DBG] Connection id "0HNG1H34OM4K2" received FIN.
2025-10-02 14:53:39.506 +07:00 [DBG] Connection id "0HNG1H34OM4K2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 14:53:39.507 +07:00 [DBG] Connection id "0HNG1H34OM4K2" disconnecting.
2025-10-02 14:53:39.511 +07:00 [DBG] Connection id "0HNG1H34OM4K2" stopped.
2025-10-02 14:54:14.237 +07:00 [DBG] Connection id "0HNG1H34OM4K4" accepted.
2025-10-02 14:54:14.238 +07:00 [DBG] Connection id "0HNG1H34OM4K4" started.
2025-10-02 14:54:14.239 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 14:54:14.255 +07:00 [DBG] POST requests are not supported
2025-10-02 14:54:14.257 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 14:54:14.259 +07:00 [DBG] POST requests are not supported
2025-10-02 14:54:14.261 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 14:54:14.262 +07:00 [INF] CORS policy execution successful.
2025-10-02 14:54:14.324 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 14:54:14.325 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 14:54:14.326 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 14:54:14.444 +07:00 [DBG] Successfully validated the token.
2025-10-02 14:54:14.446 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 14:54:14.453 +07:00 [DBG] Authorization was successful.
2025-10-02 14:54:14.462 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 14:54:14.493 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 14:54:14.495 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 14:54:14.496 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 14:54:14.497 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 14:54:14.497 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 14:54:14.497 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 14:54:14.501 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 14:54:14.640 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 14:54:14.647 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 14:54:14.651 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 14:54:14.654 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 14:54:14.654 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 14:54:14.654 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 14:54:14.655 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 14:54:14.665 +07:00 [DBG] Connection id "0HNG1H34OM4K4", Request id "0HNG1H34OM4K4:00000001": started reading request body.
2025-10-02 14:54:14.666 +07:00 [DBG] Connection id "0HNG1H34OM4K4", Request id "0HNG1H34OM4K4:00000001": done reading request body.
2025-10-02 14:54:14.676 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 14:54:14.676 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 14:54:14.676 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 14:54:14.677 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 14:54:14.688 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 14:54:14.689 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 14:54:14.690 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 14:54:14.691 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 14:54:14.692 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 14:54:14.692 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 14:54:14.692 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 14:54:14.696 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 14:54:14.698 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T07:53:58.6240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 14:54:14.802 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 14:54:14.815 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 14:54:14.837 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 14:54:14.915 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 14:54:14.920 +07:00 [DBG] Creating DbConnection.
2025-10-02 14:54:14.920 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 14:54:14.921 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:54:14.921 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:54:14.921 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:54:14.921 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:54:14.922 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:54:14.923 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 14:54:14.971 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 14:54:14.975 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:54:14.976 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 14:54:14.976 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:54:14.976 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:54:14.984 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 14:54:14.994 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 14:54:14.994 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 14:54:14.995 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 14:54:14.996 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 14:54:15.066 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 14:54:15.076 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 14:54:15.087 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:54:15.088 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:54:15.088 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 14:54:15.088 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:54:15.089 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 14:54:15.089 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 14:54:15.192 +07:00 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 14:54:15.207 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 14:54:15.207 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 15ms reading results.
2025-10-02 14:54:15.208 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:54:15.208 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 14:54:17.894 +07:00 [DBG] Reviewer 4 skill 'AI' sim=0.4955 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:54:22.050 +07:00 [DBG] Reviewer 4 semantic breakdown: maxSim=0.4955 matchedSkills=[]
2025-10-02 14:54:48.627 +07:00 [DBG] Reviewer 4: skillScore=0.4955 matched=
2025-10-02 14:54:48.634 +07:00 [DBG] Reviewer 4 field scores: Title:0.5368, VN_Title:0.5298, Category:0, Description:0.5043, Objectives:0.5041, Problem:0.5106, Content:0.5011, Context:0.5265
2025-10-02 14:54:49.704 +07:00 [DBG] Reviewer 7 skill 'SE' sim=0.5002 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:54:49.704 +07:00 [DBG] Reviewer 7 semantic breakdown: maxSim=0.5002 matchedSkills=[]
2025-10-02 14:54:49.707 +07:00 [DBG] Reviewer 7: skillScore=0.5002 matched=
2025-10-02 14:54:49.707 +07:00 [DBG] Reviewer 7 field scores: Title:0.5136, VN_Title:0.5230, Category:0, Description:0.4993, Objectives:0.5033, Problem:0.5017, Content:0.4975, Context:0.5118
2025-10-02 14:54:50.827 +07:00 [DBG] Reviewer 9 skill 'E-learning' sim=0.5164 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:54:50.828 +07:00 [DBG] Reviewer 9 semantic breakdown: maxSim=0.5164 matchedSkills=[]
2025-10-02 14:54:50.833 +07:00 [DBG] Reviewer 9: skillScore=0.5164 matched=
2025-10-02 14:54:50.833 +07:00 [DBG] Reviewer 9 field scores: Title:0.5278, VN_Title:0.5334, Category:0, Description:0.5469, Objectives:0.5077, Problem:0.5125, Content:0.5178, Context:0.5109
2025-10-02 14:54:51.938 +07:00 [DBG] Reviewer 18 skill 'Chuyên gia về trí tuệ nhân tạo và học máy AI' sim=0.5465 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:54:51.939 +07:00 [DBG] Reviewer 18 semantic breakdown: maxSim=0.5465 matchedSkills=[]
2025-10-02 14:54:51.943 +07:00 [DBG] Reviewer 18: skillScore=0.5465 matched=
2025-10-02 14:54:51.943 +07:00 [DBG] Reviewer 18 field scores: Title:0.5055, VN_Title:0.5829, Category:0, Description:0.5338, Objectives:0.5449, Problem:0.5372, Content:0.5623, Context:0.5481
2025-10-02 14:54:53.013 +07:00 [DBG] Reviewer 19 skill 'Chuyên môn về phát triển ứng dụng web full-stack' sim=0.5853 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:54:53.014 +07:00 [DBG] Reviewer 19 semantic breakdown: maxSim=0.5853 matchedSkills=[]
2025-10-02 14:54:53.017 +07:00 [DBG] Reviewer 19: skillScore=0.5853 matched=
2025-10-02 14:54:53.017 +07:00 [DBG] Reviewer 19 field scores: Title:0.5241, VN_Title:0.5869, Category:0, Description:0.5578, Objectives:0.5545, Problem:0.5258, Content:0.5986, Context:0.5396
2025-10-02 14:54:54.158 +07:00 [DBG] Reviewer 20 skill 'Nghiên cứu về Internet of Things và hệ thống nhúng' sim=0.5981 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:54:54.158 +07:00 [DBG] Reviewer 20 semantic breakdown: maxSim=0.5981 matchedSkills=[]
2025-10-02 14:54:54.162 +07:00 [DBG] Reviewer 20: skillScore=0.5981 matched=
2025-10-02 14:54:54.162 +07:00 [DBG] Reviewer 20 field scores: Title:0.5412, VN_Title:0.6419, Category:0, Description:0.5619, Objectives:0.5745, Problem:0.5598, Content:0.6131, Context:0.5630
2025-10-02 14:54:55.455 +07:00 [DBG] Reviewer 21 skill 'Chuyên gia xử lý dữ liệu lớn và phân tích dữ liệu' sim=0.5395 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:54:55.455 +07:00 [DBG] Reviewer 21 semantic breakdown: maxSim=0.5395 matchedSkills=[]
2025-10-02 14:54:55.459 +07:00 [DBG] Reviewer 21: skillScore=0.5395 matched=
2025-10-02 14:54:55.459 +07:00 [DBG] Reviewer 21 field scores: Title:0.4932, VN_Title:0.5699, Category:0, Description:0.5238, Objectives:0.5403, Problem:0.5060, Content:0.5508, Context:0.5195
2025-10-02 14:54:56.619 +07:00 [DBG] Reviewer 22 skill 'Phát triển ứng dụng di động và trải nghiệm người dùng' sim=0.5685 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:54:56.620 +07:00 [DBG] Reviewer 22 semantic breakdown: maxSim=0.5685 matchedSkills=[]
2025-10-02 14:54:56.623 +07:00 [DBG] Reviewer 22: skillScore=0.5685 matched=
2025-10-02 14:54:56.623 +07:00 [DBG] Reviewer 22 field scores: Title:0.5097, VN_Title:0.5841, Category:0, Description:0.5487, Objectives:0.5596, Problem:0.5380, Content:0.5910, Context:0.5325
2025-10-02 14:54:57.784 +07:00 [DBG] Reviewer 23 skill 'Nghiên cứu về blockchain và hệ thống phi tập trung' sim=0.7732 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:54:57.785 +07:00 [DBG] Reviewer 23 semantic breakdown: maxSim=0.7732 matchedSkills=[Nghiên cứu về blockchain và hệ thống phi tập trung]
2025-10-02 14:54:57.795 +07:00 [DBG] Reviewer 23: skillScore=0.7732 matched=Nghiên cứu về blockchain và hệ thống phi tập trung
2025-10-02 14:54:57.795 +07:00 [DBG] Reviewer 23 field scores: Title:0.7100, VN_Title:0.8312, Category:0, Description:0.6728, Objectives:0.7339, Problem:0.6522, Content:0.7852, Context:0.6352
2025-10-02 14:54:58.927 +07:00 [DBG] Reviewer 24 skill 'Chuyên môn về robot và tự động hóa công nghiệp' sim=0.5311 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:54:58.928 +07:00 [DBG] Reviewer 24 semantic breakdown: maxSim=0.5311 matchedSkills=[]
2025-10-02 14:54:58.931 +07:00 [DBG] Reviewer 24: skillScore=0.5311 matched=
2025-10-02 14:54:58.931 +07:00 [DBG] Reviewer 24 field scores: Title:0.4963, VN_Title:0.5591, Category:0, Description:0.5273, Objectives:0.5248, Problem:0.5150, Content:0.5410, Context:0.5217
2025-10-02 14:55:00.106 +07:00 [DBG] Reviewer 25 skill 'Phát triển giải pháp thực tế ảo (VR) và tăng cường (AR)' sim=0.5937 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:55:00.107 +07:00 [DBG] Reviewer 25 semantic breakdown: maxSim=0.5937 matchedSkills=[]
2025-10-02 14:55:00.112 +07:00 [DBG] Reviewer 25: skillScore=0.5937 matched=
2025-10-02 14:55:00.112 +07:00 [DBG] Reviewer 25 field scores: Title:0.5129, VN_Title:0.6000, Category:0, Description:0.5857, Objectives:0.6037, Problem:0.5636, Content:0.6203, Context:0.5807
2025-10-02 14:55:01.235 +07:00 [DBG] Reviewer 26 skill 'Ứng dụng công nghệ xanh và bền vững trong sản xuất và đô thị thông minh' sim=0.5810 cachedSkillEmb=false skillLen=3072 topicLen=3072
2025-10-02 14:55:01.236 +07:00 [DBG] Reviewer 26 semantic breakdown: maxSim=0.5810 matchedSkills=[]
2025-10-02 14:55:01.241 +07:00 [DBG] Reviewer 26: skillScore=0.5810 matched=
2025-10-02 14:55:01.241 +07:00 [DBG] Reviewer 26 field scores: Title:0.5471, VN_Title:0.6092, Category:0, Description:0.5873, Objectives:0.5662, Problem:0.5466, Content:0.6071, Context:0.5578
2025-10-02 14:55:08.289 +07:00 [DBG] AI explanation generated (preview): ```json
{
  "recommendations": [
    {
      "reviewerId": 23,
      "name": "reviewer.06@gmail.com",
      "overallPct": 68.7,
      "skillMatchPct": 77.3,
      "matchedSkills": [
        "Nghiên cứ...
2025-10-02 14:55:08.293 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 14:55:08.295 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 14:55:08.295 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 14:55:08.302 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 14:55:08.304 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 14:55:08.374 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 53874.072ms
2025-10-02 14:55:08.374 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 14:55:08.377 +07:00 [DBG] Connection id "0HNG1H34OM4K4" completed keep alive response.
2025-10-02 14:55:08.377 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 14:55:08.378 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 14:55:08.378 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 14:55:08.379 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 54139.7152ms
2025-10-02 14:55:09.687 +07:00 [DBG] Connection id "0HNG1H34OM4K4" received FIN.
2025-10-02 14:55:09.688 +07:00 [DBG] Connection id "0HNG1H34OM4K4" disconnecting.
2025-10-02 14:55:09.688 +07:00 [DBG] Connection id "0HNG1H34OM4K4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 14:55:09.703 +07:00 [DBG] Connection id "0HNG1H34OM4K4" stopped.
2025-10-02 15:04:21.239 +07:00 [DBG] Connection id "0HNG1H34OM4K5" accepted.
2025-10-02 15:04:21.239 +07:00 [DBG] Connection id "0HNG1H34OM4K5" started.
2025-10-02 15:04:21.243 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 15:04:21.244 +07:00 [DBG] Connection id "0HNG1H34OM4K6" accepted.
2025-10-02 15:04:21.244 +07:00 [DBG] Connection id "0HNG1H34OM4K6" started.
2025-10-02 15:04:21.262 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 15:04:21.267 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 15:04:21.268 +07:00 [DBG] Connection id "0HNG1H34OM4K5" completed keep alive response.
2025-10-02 15:04:21.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 25.7313ms
2025-10-02 15:04:21.309 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 15:04:21.310 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 15:04:21.310 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 15:04:21.311 +07:00 [DBG] Connection id "0HNG1H34OM4K5" completed keep alive response.
2025-10-02 15:04:21.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 2.4931ms
2025-10-02 15:04:21.348 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 15:04:21.348 +07:00 [DBG] Connection id "0HNG1H34OM4K5" completed keep alive response.
2025-10-02 15:04:21.349 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.7839ms
2025-10-02 15:04:21.908 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 15:04:22.053 +07:00 [DBG] Connection id "0HNG1H34OM4K5" completed keep alive response.
2025-10-02 15:04:22.054 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 146.0582ms
2025-10-02 15:04:25.461 +07:00 [DBG] Connection id "0HNG1H34OM4K6" received FIN.
2025-10-02 15:04:25.462 +07:00 [DBG] Connection id "0HNG1H34OM4K5" received FIN.
2025-10-02 15:04:25.462 +07:00 [DBG] Connection id "0HNG1H34OM4K6" disconnecting.
2025-10-02 15:04:25.462 +07:00 [DBG] Connection id "0HNG1H34OM4K5" disconnecting.
2025-10-02 15:04:25.462 +07:00 [DBG] Connection id "0HNG1H34OM4K6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:04:25.462 +07:00 [DBG] Connection id "0HNG1H34OM4K5" stopped.
2025-10-02 15:04:25.462 +07:00 [DBG] Connection id "0HNG1H34OM4K5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:04:25.462 +07:00 [DBG] Connection id "0HNG1H34OM4K6" stopped.
2025-10-02 15:07:42.477 +07:00 [DBG] Connection id "0HNG1H34OM4K7" accepted.
2025-10-02 15:07:42.477 +07:00 [DBG] Connection id "0HNG1H34OM4K7" started.
2025-10-02 15:07:42.487 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 15:07:42.502 +07:00 [DBG] Connection id "0HNG1H34OM4K8" accepted.
2025-10-02 15:07:42.502 +07:00 [DBG] Connection id "0HNG1H34OM4K8" started.
2025-10-02 15:07:42.503 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 15:07:42.503 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 15:07:42.503 +07:00 [DBG] Connection id "0HNG1H34OM4K7" completed keep alive response.
2025-10-02 15:07:42.504 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 16.0634ms
2025-10-02 15:07:42.531 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 15:07:42.531 +07:00 [DBG] Connection id "0HNG1H34OM4K7" completed keep alive response.
2025-10-02 15:07:42.532 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.5457ms
2025-10-02 15:07:42.689 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 15:07:42.819 +07:00 [DBG] Connection id "0HNG1H34OM4K7" completed keep alive response.
2025-10-02 15:07:42.819 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 129.9655ms
2025-10-02 15:07:52.962 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 15:07:52.982 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 15:07:52.983 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 15:07:52.983 +07:00 [DBG] Connection id "0HNG1H34OM4K7" completed keep alive response.
2025-10-02 15:07:52.984 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 20.7341ms
2025-10-02 15:07:53.381 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 15:07:53.381 +07:00 [DBG] Connection id "0HNG1H34OM4K7" completed keep alive response.
2025-10-02 15:07:53.381 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.5543ms
2025-10-02 15:07:53.544 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 15:07:53.678 +07:00 [DBG] Connection id "0HNG1H34OM4K7" completed keep alive response.
2025-10-02 15:07:53.679 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 134.6093ms
2025-10-02 15:07:55.797 +07:00 [DBG] Connection id "0HNG1H34OM4K8" received FIN.
2025-10-02 15:07:55.797 +07:00 [DBG] Connection id "0HNG1H34OM4K7" received FIN.
2025-10-02 15:07:55.797 +07:00 [DBG] Connection id "0HNG1H34OM4K8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:07:55.797 +07:00 [DBG] Connection id "0HNG1H34OM4K7" disconnecting.
2025-10-02 15:07:55.797 +07:00 [DBG] Connection id "0HNG1H34OM4K7" stopped.
2025-10-02 15:07:55.798 +07:00 [DBG] Connection id "0HNG1H34OM4K7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:07:55.798 +07:00 [DBG] Connection id "0HNG1H34OM4K8" disconnecting.
2025-10-02 15:07:55.798 +07:00 [DBG] Connection id "0HNG1H34OM4K8" stopped.
2025-10-02 15:10:10.840 +07:00 [INF] Application is shutting down...
2025-10-02 15:10:10.841 +07:00 [DBG] Hosting stopping
2025-10-02 15:10:10.854 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 15:10:10.885 +07:00 [DBG] Hosting stopped
2025-10-02 15:27:50.241 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 15:27:50.357 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 15:27:50.654 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:50.683 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:50.711 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:50.714 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:50.715 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:50.716 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:51.080 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:51.082 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:51.143 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:51.144 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:51.145 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:51.148 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:51.170 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:51.171 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:27:51.266 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 15:27:51.267 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 15:27:51.267 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 15:27:51.267 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 15:27:51.267 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 15:27:51.267 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 15:27:51.267 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 15:27:51.268 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 15:27:51.268 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 15:27:51.268 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 15:27:51.268 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 15:27:51.269 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 15:27:51.269 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 15:27:51.269 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 15:27:51.269 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 15:27:51.269 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 15:27:51.270 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 15:27:51.270 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 15:27:51.270 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 15:27:51.492 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:27:51.493 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:27:51.493 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:27:51.493 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:27:51.493 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:27:51.494 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:27:51.494 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:27:51.494 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:27:51.494 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:27:51.495 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:27:51.495 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:27:51.733 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 15:27:51.864 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 15:27:52.095 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 15:27:52.143 +07:00 [DBG] Creating DbConnection.
2025-10-02 15:27:52.175 +07:00 [DBG] Created DbConnection. (29ms).
2025-10-02 15:27:52.181 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.398 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.401 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:27:52.408 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 15:27:52.418 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2025-10-02 15:27:52.429 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:27:52.523 +07:00 [INF] Executed DbCommand (97ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:27:52.581 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:27:52.612 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.619 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 90ms reading results.
2025-10-02 15:27:52.623 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.629 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (5ms).
2025-10-02 15:27:52.633 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.635 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.635 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:27:52.635 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.636 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.636 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:27:52.644 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:27:52.644 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:27:52.645 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.645 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 15:27:52.645 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.645 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:27:52.646 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.646 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.646 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:27:52.646 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.646 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.647 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:27:52.648 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:27:52.648 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:27:52.648 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.649 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:27:52.649 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.649 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:27:52.650 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.650 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.650 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:27:52.650 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.650 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.650 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:27:52.652 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:27:52.652 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:27:52.653 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.653 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:27:52.653 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.653 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:27:52.664 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 15:27:52.676 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 15:27:52.678 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.678 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.678 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:27:52.679 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.679 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.679 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:27:52.689 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:27:52.733 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:27:52.790 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.790 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 100ms reading results.
2025-10-02 15:27:52.791 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.791 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:27:52.795 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 15:27:52.799 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.799 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.800 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:27:52.800 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.800 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.800 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:27:52.806 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:27:52.807 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:27:52.807 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.807 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:27:52.807 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.807 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:27:52.808 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 15:27:52.809 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.809 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.809 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:27:52.809 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.809 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.810 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:27:52.814 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:27:52.814 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:27:52.815 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.815 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:27:52.815 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.815 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:27:52.816 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.816 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.816 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:27:52.816 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.817 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:27:52.817 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:27:52.826 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:27:52.826 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:27:52.827 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.827 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:27:52.827 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.827 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:27:52.828 +07:00 [INF] Data seeding completed successfully
2025-10-02 15:27:52.830 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 15:27:52.833 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:27:52.834 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 15:27:52.873 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 15:27:53.208 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 15:27:53.416 +07:00 [DBG] Hosting starting
2025-10-02 15:27:53.431 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 15:27:53.435 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 15:27:53.438 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 15:27:53.448 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 15:27:53.456 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 15:27:53.456 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 15:27:53.462 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 15:27:53.467 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 15:27:53.468 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 15:27:53.471 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 15:27:53.474 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 15:27:53.477 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 15:27:53.482 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 15:27:53.483 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 15:27:53.592 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 15:27:53.592 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 15:27:53.592 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 15:27:53.592 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 15:27:53.593 +07:00 [INF] Hosting environment: Development
2025-10-02 15:27:53.593 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 15:27:53.596 +07:00 [DBG] Hosting started
2025-10-02 15:27:54.106 +07:00 [DBG] Connection id "0HNG1HMALO3S8" accepted.
2025-10-02 15:27:54.113 +07:00 [DBG] Connection id "0HNG1HMALO3S8" started.
2025-10-02 15:27:54.552 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 15:27:54.573 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 15:27:54.765 +07:00 [DBG] Connection id "0HNG1HMALO3S9" accepted.
2025-10-02 15:27:54.766 +07:00 [DBG] Connection id "0HNG1HMALO3S9" started.
2025-10-02 15:27:55.306 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 15:27:55.334 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 15:27:55.337 +07:00 [DBG] Connection id "0HNG1HMALO3S8" completed keep alive response.
2025-10-02 15:27:55.344 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 795.6817ms
2025-10-02 15:27:55.419 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 15:27:55.423 +07:00 [DBG] Connection id "0HNG1HMALO3S8" completed keep alive response.
2025-10-02 15:27:55.431 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 6.4975ms
2025-10-02 15:27:55.733 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 15:27:56.260 +07:00 [DBG] Connection id "0HNG1HMALO3S8" completed keep alive response.
2025-10-02 15:27:56.261 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 528.0098ms
2025-10-02 15:27:57.732 +07:00 [DBG] Connection id "0HNG1HMALO3S8" received FIN.
2025-10-02 15:27:57.732 +07:00 [DBG] Connection id "0HNG1HMALO3S9" received FIN.
2025-10-02 15:27:57.735 +07:00 [DBG] Connection id "0HNG1HMALO3S8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:27:57.735 +07:00 [DBG] Connection id "0HNG1HMALO3S9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:27:57.736 +07:00 [DBG] Connection id "0HNG1HMALO3S8" disconnecting.
2025-10-02 15:27:57.736 +07:00 [DBG] Connection id "0HNG1HMALO3S9" disconnecting.
2025-10-02 15:27:57.738 +07:00 [DBG] Connection id "0HNG1HMALO3S9" stopped.
2025-10-02 15:27:57.738 +07:00 [DBG] Connection id "0HNG1HMALO3S8" stopped.
2025-10-02 15:29:44.222 +07:00 [INF] Application is shutting down...
2025-10-02 15:29:44.225 +07:00 [DBG] Hosting stopping
2025-10-02 15:29:44.235 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 15:29:44.267 +07:00 [DBG] Hosting stopped
2025-10-02 15:30:22.766 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 15:30:22.866 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 15:30:23.165 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.191 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.213 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.216 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.216 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.219 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.514 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.516 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.541 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.542 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.542 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.544 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.551 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.551 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:30:23.608 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 15:30:23.609 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 15:30:23.609 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 15:30:23.609 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 15:30:23.610 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 15:30:23.610 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 15:30:23.610 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 15:30:23.610 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 15:30:23.611 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 15:30:23.611 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 15:30:23.611 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 15:30:23.611 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 15:30:23.611 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 15:30:23.611 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 15:30:23.612 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 15:30:23.612 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 15:30:23.612 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 15:30:23.613 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 15:30:23.613 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 15:30:23.790 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:30:23.790 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:30:23.790 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:30:23.790 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:30:23.790 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:30:23.790 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:30:23.791 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:30:23.791 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:30:23.799 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:30:23.799 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:30:23.800 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:30:23.989 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 15:30:24.054 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 15:30:24.214 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 15:30:24.250 +07:00 [DBG] Creating DbConnection.
2025-10-02 15:30:24.268 +07:00 [DBG] Created DbConnection. (15ms).
2025-10-02 15:30:24.272 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.429 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.432 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:30:24.437 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 15:30:24.447 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-10-02 15:30:24.454 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:30:24.513 +07:00 [INF] Executed DbCommand (57ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:30:24.567 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:30:24.591 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.600 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 82ms reading results.
2025-10-02 15:30:24.602 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.607 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (4ms).
2025-10-02 15:30:24.612 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.613 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.613 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:30:24.614 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.614 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.614 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:30:24.619 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:30:24.620 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:30:24.620 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.620 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 15:30:24.621 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.621 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:30:24.621 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.622 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.622 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:30:24.622 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.622 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.622 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:30:24.625 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:30:24.625 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:30:24.626 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.626 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:30:24.626 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.627 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:30:24.628 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.628 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.628 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:30:24.628 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.629 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.629 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:30:24.630 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:30:24.631 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:30:24.631 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.631 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:30:24.631 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.631 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:30:24.638 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 15:30:24.646 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 15:30:24.647 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.647 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.647 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:30:24.647 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.648 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.648 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:30:24.656 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:30:24.682 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:30:24.714 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.715 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 58ms reading results.
2025-10-02 15:30:24.715 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.715 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:30:24.717 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 15:30:24.720 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.720 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.720 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:30:24.720 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.721 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.721 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:30:24.723 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:30:24.724 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:30:24.724 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.724 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:30:24.724 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.724 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:30:24.725 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 15:30:24.725 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.726 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.726 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:30:24.726 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.726 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.726 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:30:24.728 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:30:24.729 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:30:24.729 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.730 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 15:30:24.730 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.730 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:30:24.730 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.730 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.731 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:30:24.731 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.731 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:24.731 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:30:24.732 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:30:24.732 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:30:24.732 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.733 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:30:24.733 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.733 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:30:24.733 +07:00 [INF] Data seeding completed successfully
2025-10-02 15:30:24.734 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 15:30:24.736 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:24.737 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 15:30:24.753 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 15:30:24.945 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 15:30:25.073 +07:00 [DBG] Hosting starting
2025-10-02 15:30:25.082 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 15:30:25.084 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 15:30:25.085 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 15:30:25.089 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 15:30:25.093 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 15:30:25.094 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 15:30:25.101 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 15:30:25.104 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 15:30:25.105 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 15:30:25.106 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 15:30:25.107 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 15:30:25.112 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 15:30:25.115 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 15:30:25.116 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 15:30:25.171 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 15:30:25.171 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 15:30:25.171 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 15:30:25.171 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 15:30:25.171 +07:00 [INF] Hosting environment: Development
2025-10-02 15:30:25.172 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 15:30:25.173 +07:00 [DBG] Hosting started
2025-10-02 15:30:25.339 +07:00 [DBG] Connection id "0HNG1HNNO0DTC" accepted.
2025-10-02 15:30:25.341 +07:00 [DBG] Connection id "0HNG1HNNO0DTC" started.
2025-10-02 15:30:25.374 +07:00 [DBG] Connection id "0HNG1HNNO0DTD" accepted.
2025-10-02 15:30:25.374 +07:00 [DBG] Connection id "0HNG1HNNO0DTD" started.
2025-10-02 15:30:25.460 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 15:30:25.476 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 15:30:25.679 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 15:30:25.688 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 15:30:25.689 +07:00 [DBG] Connection id "0HNG1HNNO0DTC" completed keep alive response.
2025-10-02 15:30:25.692 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 234.679ms
2025-10-02 15:30:25.703 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 15:30:25.712 +07:00 [DBG] Connection id "0HNG1HNNO0DTC" completed keep alive response.
2025-10-02 15:30:25.714 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 9.3905ms
2025-10-02 15:30:25.798 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 15:30:26.141 +07:00 [DBG] Connection id "0HNG1HNNO0DTC" completed keep alive response.
2025-10-02 15:30:26.141 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 342.9972ms
2025-10-02 15:30:32.949 +07:00 [DBG] Connection id "0HNG1HNNO0DTD" received FIN.
2025-10-02 15:30:32.949 +07:00 [DBG] Connection id "0HNG1HNNO0DTC" received FIN.
2025-10-02 15:30:32.950 +07:00 [DBG] Connection id "0HNG1HNNO0DTC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:30:32.950 +07:00 [DBG] Connection id "0HNG1HNNO0DTD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:30:32.952 +07:00 [DBG] Connection id "0HNG1HNNO0DTD" disconnecting.
2025-10-02 15:30:32.952 +07:00 [DBG] Connection id "0HNG1HNNO0DTC" disconnecting.
2025-10-02 15:30:32.953 +07:00 [DBG] Connection id "0HNG1HNNO0DTD" stopped.
2025-10-02 15:30:32.953 +07:00 [DBG] Connection id "0HNG1HNNO0DTC" stopped.
2025-10-02 15:30:49.872 +07:00 [DBG] Connection id "0HNG1HNNO0DTE" accepted.
2025-10-02 15:30:49.873 +07:00 [DBG] Connection id "0HNG1HNNO0DTE" started.
2025-10-02 15:30:49.875 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/auth/login - application/json 112
2025-10-02 15:30:49.879 +07:00 [DBG] POST requests are not supported
2025-10-02 15:30:49.880 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 15:30:49.881 +07:00 [DBG] POST requests are not supported
2025-10-02 15:30:49.882 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 15:30:49.883 +07:00 [INF] CORS policy execution successful.
2025-10-02 15:30:49.947 +07:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2025-10-02 15:30:49.948 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2025-10-02 15:30:49.949 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 15:30:50.012 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-02 15:30:50.027 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 15:30:50.059 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Entities.DTOs.Auth.LoginDTO) on controller CapBot.api.Controllers.AuthController (CapBot.api).
2025-10-02 15:30:50.065 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 15:30:50.066 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 15:30:50.067 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 15:30:50.068 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 15:30:50.068 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 15:30:50.071 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-10-02 15:30:50.082 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-10-02 15:30:50.088 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-10-02 15:30:50.091 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' using the name '' in request data ...
2025-10-02 15:30:50.095 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:30:50.096 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:30:50.097 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:30:50.098 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 15:30:50.115 +07:00 [DBG] Connection id "0HNG1HNNO0DTE", Request id "0HNG1HNNO0DTE:00000001": started reading request body.
2025-10-02 15:30:50.116 +07:00 [DBG] Connection id "0HNG1HNNO0DTE", Request id "0HNG1HNNO0DTE:00000001": done reading request body.
2025-10-02 15:30:50.124 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.Auth.LoginDTO'
2025-10-02 15:30:50.125 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 15:30:50.125 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 15:30:50.125 +07:00 [DBG] Attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-10-02 15:30:50.140 +07:00 [DBG] Done attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 15:30:50.219 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 15:30:50.221 +07:00 [DBG] Creating DbConnection.
2025-10-02 15:30:50.222 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 15:30:50.222 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:50.222 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:50.222 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:30:50.223 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:50.223 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:50.223 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:30:50.228 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:30:50.229 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:30:50.230 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:30:50.230 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 15:30:50.231 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:50.231 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:30:50.255 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .Join(
        inner: DbSet<Role>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-10-02 15:30:50.302 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Name
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 15:30:50.304 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:50.305 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:50.305 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:30:50.305 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:50.305 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:30:50.306 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-10-02 15:30:50.315 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-10-02 15:30:50.317 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:30:50.317 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 15:30:50.317 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:50.318 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:30:50.457 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 15:30:50.460 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 15:30:50.461 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 15:30:50.464 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 15:30:50.465 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 15:30:50.535 +07:00 [INF] Executed action CapBot.api.Controllers.AuthController.Login (CapBot.api) in 462.6866ms
2025-10-02 15:30:50.536 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 15:30:50.540 +07:00 [DBG] Connection id "0HNG1HNNO0DTE" completed keep alive response.
2025-10-02 15:30:50.541 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 15:30:50.542 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:30:50.542 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 15:30:50.545 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/auth/login - 200 null application/json; charset=utf-8 670.4922ms
2025-10-02 15:30:52.962 +07:00 [DBG] Connection id "0HNG1HNNO0DTE" received FIN.
2025-10-02 15:30:52.963 +07:00 [DBG] Connection id "0HNG1HNNO0DTE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:30:52.964 +07:00 [DBG] Connection id "0HNG1HNNO0DTE" disconnecting.
2025-10-02 15:30:52.964 +07:00 [DBG] Connection id "0HNG1HNNO0DTE" stopped.
2025-10-02 15:31:54.196 +07:00 [DBG] Connection id "0HNG1HNNO0DTF" accepted.
2025-10-02 15:31:54.196 +07:00 [DBG] Connection id "0HNG1HNNO0DTF" started.
2025-10-02 15:31:54.197 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 15:31:54.197 +07:00 [DBG] POST requests are not supported
2025-10-02 15:31:54.198 +07:00 [DBG] POST requests are not supported
2025-10-02 15:31:54.199 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 15:31:54.199 +07:00 [INF] CORS policy execution successful.
2025-10-02 15:31:54.220 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:31:54.224 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:31:54.226 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:31:54.286 +07:00 [DBG] Successfully validated the token.
2025-10-02 15:31:54.289 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 15:31:54.295 +07:00 [DBG] Authorization was successful.
2025-10-02 15:31:54.296 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:31:54.306 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 15:31:54.307 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 15:31:54.308 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 15:31:54.308 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 15:31:54.309 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 15:31:54.309 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 15:31:54.310 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:31:54.460 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:31:54.467 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:31:54.469 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 15:31:54.469 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:31:54.469 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:31:54.470 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:31:54.471 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 15:31:54.474 +07:00 [DBG] Connection id "0HNG1HNNO0DTF", Request id "0HNG1HNNO0DTF:00000001": started reading request body.
2025-10-02 15:31:54.474 +07:00 [DBG] Connection id "0HNG1HNNO0DTF", Request id "0HNG1HNNO0DTF:00000001": done reading request body.
2025-10-02 15:31:54.480 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 15:31:54.480 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:31:54.480 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:31:54.480 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:31:54.483 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:31:54.484 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:31:54.484 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 15:31:54.486 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:31:54.487 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:31:54.488 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:31:54.489 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:31:54.495 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 15:31:54.497 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 15:31:54.525 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 15:31:54.533 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 15:31:54.549 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 15:31:54.595 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 15:31:54.597 +07:00 [DBG] Creating DbConnection.
2025-10-02 15:31:54.598 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 15:31:54.598 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:31:54.598 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:31:54.598 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:31:54.598 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:31:54.599 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:31:54.599 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:31:54.627 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:31:54.634 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:31:54.634 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-10-02 15:31:54.635 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:31:54.635 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:31:54.644 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 15:31:54.652 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 15:31:54.653 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 15:31:54.655 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 15:31:54.657 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 15:31:54.836 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 15:31:54.863 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 15:31:54.882 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:31:54.885 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:31:54.885 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:31:54.886 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:31:54.887 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 15:31:54.887 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:31:55.015 +07:00 [INF] Executed DbCommand (128ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:31:55.047 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:31:55.047 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 32ms reading results.
2025-10-02 15:31:55.047 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:31:55.048 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:32:35.813 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 15:32:35.814 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 15:32:35.814 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 15:32:35.814 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 15:32:35.814 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 15:32:35.865 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 41555.9757ms
2025-10-02 15:32:35.866 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:32:35.866 +07:00 [DBG] Connection id "0HNG1HNNO0DTF" completed keep alive response.
2025-10-02 15:32:35.866 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 15:32:35.867 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:32:35.867 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 15:32:35.867 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 41669.9832ms
2025-10-02 15:32:38.067 +07:00 [DBG] Connection id "0HNG1HNNO0DTF" received FIN.
2025-10-02 15:32:38.068 +07:00 [DBG] Connection id "0HNG1HNNO0DTF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:32:38.068 +07:00 [DBG] Connection id "0HNG1HNNO0DTF" disconnecting.
2025-10-02 15:32:38.068 +07:00 [DBG] Connection id "0HNG1HNNO0DTF" stopped.
2025-10-02 15:37:12.675 +07:00 [DBG] Connection id "0HNG1HNNO0DTG" accepted.
2025-10-02 15:37:12.676 +07:00 [DBG] Connection id "0HNG1HNNO0DTG" started.
2025-10-02 15:37:12.676 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 15:37:12.677 +07:00 [DBG] POST requests are not supported
2025-10-02 15:37:12.677 +07:00 [DBG] POST requests are not supported
2025-10-02 15:37:12.678 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 15:37:12.678 +07:00 [INF] CORS policy execution successful.
2025-10-02 15:37:12.679 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:37:12.679 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:37:12.680 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:37:12.702 +07:00 [DBG] Successfully validated the token.
2025-10-02 15:37:12.707 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 15:37:12.718 +07:00 [DBG] Authorization was successful.
2025-10-02 15:37:12.720 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:37:12.720 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 15:37:12.720 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 15:37:12.720 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 15:37:12.720 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 15:37:12.721 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 15:37:12.721 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 15:37:12.721 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:37:12.723 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:37:12.723 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:37:12.724 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 15:37:12.724 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:37:12.724 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:37:12.724 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:37:12.724 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 15:37:12.724 +07:00 [DBG] Connection id "0HNG1HNNO0DTG", Request id "0HNG1HNNO0DTG:00000001": started reading request body.
2025-10-02 15:37:12.724 +07:00 [DBG] Connection id "0HNG1HNNO0DTG", Request id "0HNG1HNNO0DTG:00000001": done reading request body.
2025-10-02 15:37:12.725 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 15:37:12.725 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:37:12.725 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:37:12.725 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:37:12.726 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:37:12.726 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:37:12.727 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 15:37:12.727 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:37:12.727 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:37:12.727 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:37:12.727 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:37:12.727 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 15:37:12.729 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 15:37:12.733 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 15:37:12.734 +07:00 [DBG] Creating DbConnection.
2025-10-02 15:37:12.734 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 15:37:12.734 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:37:12.739 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:37:12.739 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:37:12.739 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:37:12.739 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:37:12.740 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:37:12.752 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:37:12.752 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:37:12.753 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:37:12.753 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:37:12.753 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:37:12.754 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:37:12.754 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:37:12.754 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:37:12.754 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:37:12.754 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:37:12.754 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:37:12.808 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:37:12.812 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:37:12.812 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 15:37:12.812 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:37:12.812 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:37:41.609 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 15:37:41.609 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 15:37:41.609 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 15:37:41.609 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 15:37:41.609 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 15:37:41.610 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 28889.1042ms
2025-10-02 15:37:41.610 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:37:41.610 +07:00 [DBG] Connection id "0HNG1HNNO0DTG" completed keep alive response.
2025-10-02 15:37:41.610 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 15:37:41.610 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:37:41.611 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 15:37:41.611 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 28934.2836ms
2025-10-02 15:39:52.344 +07:00 [DBG] Connection id "0HNG1HNNO0DTG" disconnecting.
2025-10-02 15:39:52.344 +07:00 [DBG] Connection id "0HNG1HNNO0DTG" stopped.
2025-10-02 15:39:52.344 +07:00 [DBG] Connection id "0HNG1HNNO0DTG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:45:34.234 +07:00 [DBG] Connection id "0HNG1HNNO0DTH" accepted.
2025-10-02 15:45:34.234 +07:00 [DBG] Connection id "0HNG1HNNO0DTH" started.
2025-10-02 15:45:34.235 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 15:45:34.235 +07:00 [DBG] POST requests are not supported
2025-10-02 15:45:34.236 +07:00 [DBG] POST requests are not supported
2025-10-02 15:45:34.236 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 15:45:34.236 +07:00 [INF] CORS policy execution successful.
2025-10-02 15:45:34.236 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:45:34.236 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:45:34.237 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:45:34.238 +07:00 [DBG] Successfully validated the token.
2025-10-02 15:45:34.238 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 15:45:34.240 +07:00 [DBG] Authorization was successful.
2025-10-02 15:45:34.241 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:45:34.255 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 15:45:34.255 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 15:45:34.255 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 15:45:34.255 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 15:45:34.255 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 15:45:34.255 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 15:45:34.256 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:45:34.269 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:45:34.269 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:45:34.270 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 15:45:34.270 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:45:34.270 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:45:34.271 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:45:34.271 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 15:45:34.273 +07:00 [DBG] Connection id "0HNG1HNNO0DTH", Request id "0HNG1HNNO0DTH:00000001": started reading request body.
2025-10-02 15:45:34.273 +07:00 [DBG] Connection id "0HNG1HNNO0DTH", Request id "0HNG1HNNO0DTH:00000001": done reading request body.
2025-10-02 15:45:34.275 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 15:45:34.275 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:45:34.275 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:45:34.275 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:45:34.277 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:45:34.277 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:45:34.277 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 15:45:34.277 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:45:34.277 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:45:34.278 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:45:34.278 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:45:34.278 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 15:45:34.278 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 15:45:34.284 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 15:45:34.285 +07:00 [DBG] Creating DbConnection.
2025-10-02 15:45:34.285 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 15:45:34.285 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:45:34.294 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:45:34.294 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:45:34.295 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:45:34.295 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:45:34.295 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:45:34.301 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:45:34.302 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:45:34.302 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:45:34.302 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:45:34.302 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:45:34.305 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:45:34.306 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:45:34.306 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:45:34.306 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:45:34.306 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:45:34.306 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:45:34.363 +07:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:45:34.365 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:45:34.366 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 15:45:34.366 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:45:34.366 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:45:36.329 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 15:45:36.330 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 15:45:36.330 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 15:45:36.330 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 15:45:36.330 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 15:45:36.341 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2085.2399ms
2025-10-02 15:45:36.341 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:45:36.341 +07:00 [DBG] Connection id "0HNG1HNNO0DTH" completed keep alive response.
2025-10-02 15:45:36.341 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 15:45:36.341 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:45:36.341 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 15:45:36.342 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2106.8118ms
2025-10-02 15:45:55.020 +07:00 [INF] Application is shutting down...
2025-10-02 15:45:55.021 +07:00 [DBG] Hosting stopping
2025-10-02 15:45:55.026 +07:00 [DBG] Connection id "0HNG1HNNO0DTH" disconnecting.
2025-10-02 15:45:55.026 +07:00 [DBG] Connection id "0HNG1HNNO0DTH" stopped.
2025-10-02 15:45:55.026 +07:00 [DBG] Connection id "0HNG1HNNO0DTH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:45:55.031 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 15:45:55.053 +07:00 [DBG] Hosting stopped
2025-10-02 15:46:18.459 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 15:46:18.564 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 15:46:18.816 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:18.844 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:18.866 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:18.871 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:18.871 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:18.872 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:19.138 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:19.140 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:19.162 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:19.162 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:19.163 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:19.164 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:19.170 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:19.171 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 15:46:19.248 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 15:46:19.249 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 15:46:19.249 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 15:46:19.249 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 15:46:19.249 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 15:46:19.250 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 15:46:19.250 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 15:46:19.250 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 15:46:19.250 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 15:46:19.250 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 15:46:19.250 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 15:46:19.251 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 15:46:19.251 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 15:46:19.251 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 15:46:19.251 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 15:46:19.251 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 15:46:19.252 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 15:46:19.252 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 15:46:19.252 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 15:46:19.444 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:46:19.445 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:46:19.445 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:46:19.445 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:46:19.445 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:46:19.446 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:46:19.446 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:46:19.446 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:46:19.446 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:46:19.446 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:46:19.447 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 15:46:19.635 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 15:46:19.722 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 15:46:19.892 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 15:46:19.930 +07:00 [DBG] Creating DbConnection.
2025-10-02 15:46:19.949 +07:00 [DBG] Created DbConnection. (15ms).
2025-10-02 15:46:19.952 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.102 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.106 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:46:20.114 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 15:46:20.125 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2025-10-02 15:46:20.136 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:46:20.201 +07:00 [INF] Executed DbCommand (62ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:46:20.270 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:46:20.295 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.301 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 95ms reading results.
2025-10-02 15:46:20.304 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.309 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (4ms).
2025-10-02 15:46:20.314 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.315 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.315 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:46:20.316 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.316 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.316 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:46:20.321 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:46:20.321 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:46:20.322 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.322 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 15:46:20.322 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.322 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:46:20.323 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.323 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.323 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:46:20.323 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.324 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.324 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:46:20.325 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:46:20.325 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:46:20.325 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.325 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:46:20.325 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.326 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:46:20.326 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.327 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.327 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:46:20.328 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.328 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 15:46:20.329 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:46:20.331 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 15:46:20.331 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:46:20.331 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.332 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:46:20.332 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.332 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:46:20.338 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 15:46:20.347 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 15:46:20.348 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.349 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.349 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:46:20.349 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.349 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.349 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:46:20.353 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:46:20.393 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:46:20.448 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.449 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 94ms reading results.
2025-10-02 15:46:20.449 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.449 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:46:20.453 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 15:46:20.458 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.458 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.458 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:46:20.459 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.459 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.459 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:46:20.464 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:46:20.465 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:46:20.465 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.465 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:46:20.466 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.466 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:46:20.466 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 15:46:20.467 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.467 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.467 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:46:20.467 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.468 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.468 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:46:20.471 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:46:20.472 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:46:20.472 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.472 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 15:46:20.473 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.473 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:46:20.473 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.474 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.474 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:46:20.474 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.474 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:20.474 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:46:20.476 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 15:46:20.476 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 15:46:20.478 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.478 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 15:46:20.479 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.479 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:46:20.480 +07:00 [INF] Data seeding completed successfully
2025-10-02 15:46:20.483 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 15:46:20.485 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:20.486 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 15:46:20.511 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 15:46:20.694 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 15:46:20.837 +07:00 [DBG] Hosting starting
2025-10-02 15:46:20.847 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 15:46:20.850 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 15:46:20.851 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 15:46:20.855 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 15:46:20.859 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 15:46:20.860 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 15:46:20.871 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 15:46:20.900 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 15:46:20.901 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 15:46:20.904 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 15:46:20.906 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 15:46:20.911 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 15:46:20.916 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 15:46:20.917 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 15:46:20.994 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 15:46:20.994 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 15:46:20.994 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 15:46:20.995 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 15:46:20.995 +07:00 [INF] Hosting environment: Development
2025-10-02 15:46:20.995 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 15:46:20.997 +07:00 [DBG] Hosting started
2025-10-02 15:46:21.137 +07:00 [DBG] Connection id "0HNG1I0KJ7MSP" accepted.
2025-10-02 15:46:21.139 +07:00 [DBG] Connection id "0HNG1I0KJ7MSP" started.
2025-10-02 15:46:21.185 +07:00 [DBG] Connection id "0HNG1I0KJ7MSQ" accepted.
2025-10-02 15:46:21.186 +07:00 [DBG] Connection id "0HNG1I0KJ7MSQ" started.
2025-10-02 15:46:21.222 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 15:46:21.236 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 15:46:21.515 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 15:46:21.546 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 15:46:21.547 +07:00 [DBG] Connection id "0HNG1I0KJ7MSP" completed keep alive response.
2025-10-02 15:46:21.550 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 330.7689ms
2025-10-02 15:46:21.565 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 15:46:21.590 +07:00 [DBG] Connection id "0HNG1I0KJ7MSP" completed keep alive response.
2025-10-02 15:46:21.592 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 25.1587ms
2025-10-02 15:46:21.849 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 15:46:22.248 +07:00 [DBG] Connection id "0HNG1I0KJ7MSP" completed keep alive response.
2025-10-02 15:46:22.248 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 399.3225ms
2025-10-02 15:46:29.406 +07:00 [DBG] Connection id "0HNG1I0KJ7MSP" received FIN.
2025-10-02 15:46:29.406 +07:00 [DBG] Connection id "0HNG1I0KJ7MSQ" received FIN.
2025-10-02 15:46:29.408 +07:00 [DBG] Connection id "0HNG1I0KJ7MSQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:46:29.408 +07:00 [DBG] Connection id "0HNG1I0KJ7MSP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:46:29.409 +07:00 [DBG] Connection id "0HNG1I0KJ7MSP" disconnecting.
2025-10-02 15:46:29.409 +07:00 [DBG] Connection id "0HNG1I0KJ7MSQ" disconnecting.
2025-10-02 15:46:29.410 +07:00 [DBG] Connection id "0HNG1I0KJ7MSP" stopped.
2025-10-02 15:46:29.411 +07:00 [DBG] Connection id "0HNG1I0KJ7MSQ" stopped.
2025-10-02 15:46:33.664 +07:00 [DBG] Connection id "0HNG1I0KJ7MSR" accepted.
2025-10-02 15:46:33.664 +07:00 [DBG] Connection id "0HNG1I0KJ7MSR" started.
2025-10-02 15:46:33.665 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 15:46:33.667 +07:00 [DBG] POST requests are not supported
2025-10-02 15:46:33.670 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 15:46:33.670 +07:00 [DBG] POST requests are not supported
2025-10-02 15:46:33.672 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 15:46:33.673 +07:00 [INF] CORS policy execution successful.
2025-10-02 15:46:33.731 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:46:33.732 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:46:33.733 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:46:33.822 +07:00 [DBG] Successfully validated the token.
2025-10-02 15:46:33.823 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 15:46:33.827 +07:00 [DBG] Authorization was successful.
2025-10-02 15:46:33.837 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:46:33.853 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 15:46:33.855 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 15:46:33.856 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 15:46:33.857 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 15:46:33.857 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 15:46:33.858 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 15:46:33.859 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:46:33.978 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:46:33.982 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:46:33.986 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 15:46:33.989 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:46:33.989 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:46:33.990 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:46:33.990 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 15:46:33.999 +07:00 [DBG] Connection id "0HNG1I0KJ7MSR", Request id "0HNG1I0KJ7MSR:00000001": started reading request body.
2025-10-02 15:46:33.999 +07:00 [DBG] Connection id "0HNG1I0KJ7MSR", Request id "0HNG1I0KJ7MSR:00000001": done reading request body.
2025-10-02 15:46:34.008 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 15:46:34.008 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:46:34.008 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:46:34.009 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:46:34.015 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:46:34.016 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:46:34.018 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 15:46:34.020 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:46:34.021 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:46:34.021 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:46:34.021 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:46:34.024 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 15:46:34.026 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 15:46:34.182 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 15:46:34.199 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 15:46:34.213 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 15:46:34.276 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 15:46:34.278 +07:00 [DBG] Creating DbConnection.
2025-10-02 15:46:34.279 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 15:46:34.279 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:34.279 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:34.279 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:46:34.280 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:34.280 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:34.280 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:46:34.290 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:46:34.295 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:46:34.295 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 15:46:34.295 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:34.295 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:46:34.302 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 15:46:34.311 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 15:46:34.311 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 15:46:34.312 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 15:46:34.312 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 15:46:34.401 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 15:46:34.413 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 15:46:34.424 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:34.424 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:34.425 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:46:34.425 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:34.425 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:46:34.425 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:46:34.487 +07:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:46:34.499 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:46:34.500 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 12ms reading results.
2025-10-02 15:46:34.500 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:46:34.500 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:47:17.346 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 15:47:17.347 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 15:47:17.348 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 15:47:17.349 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 15:47:17.349 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 15:47:17.420 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 43559.7344ms
2025-10-02 15:47:17.420 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:47:17.423 +07:00 [DBG] Connection id "0HNG1I0KJ7MSR" completed keep alive response.
2025-10-02 15:47:17.423 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 15:47:17.424 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:47:17.424 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 15:47:17.425 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 43760.4564ms
2025-10-02 15:47:19.504 +07:00 [DBG] Connection id "0HNG1I0KJ7MSR" received FIN.
2025-10-02 15:47:19.504 +07:00 [DBG] Connection id "0HNG1I0KJ7MSR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:47:19.505 +07:00 [DBG] Connection id "0HNG1I0KJ7MSR" disconnecting.
2025-10-02 15:47:19.505 +07:00 [DBG] Connection id "0HNG1I0KJ7MSR" stopped.
2025-10-02 15:52:17.807 +07:00 [DBG] Connection id "0HNG1I0KJ7MSS" accepted.
2025-10-02 15:52:17.807 +07:00 [DBG] Connection id "0HNG1I0KJ7MSS" started.
2025-10-02 15:52:17.808 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 15:52:17.809 +07:00 [DBG] POST requests are not supported
2025-10-02 15:52:17.809 +07:00 [DBG] POST requests are not supported
2025-10-02 15:52:17.810 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 15:52:17.810 +07:00 [INF] CORS policy execution successful.
2025-10-02 15:52:17.810 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:52:17.810 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:52:17.811 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:52:17.816 +07:00 [DBG] Successfully validated the token.
2025-10-02 15:52:17.816 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 15:52:17.819 +07:00 [DBG] Authorization was successful.
2025-10-02 15:52:17.820 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:52:17.833 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 15:52:17.834 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 15:52:17.834 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 15:52:17.834 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 15:52:17.834 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 15:52:17.834 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 15:52:17.835 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:52:17.837 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:52:17.838 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:52:17.838 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 15:52:17.838 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:52:17.838 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:52:17.838 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:52:17.838 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 15:52:17.839 +07:00 [DBG] Connection id "0HNG1I0KJ7MSS", Request id "0HNG1I0KJ7MSS:00000001": started reading request body.
2025-10-02 15:52:17.840 +07:00 [DBG] Connection id "0HNG1I0KJ7MSS", Request id "0HNG1I0KJ7MSS:00000001": done reading request body.
2025-10-02 15:52:17.843 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 15:52:17.844 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:52:17.844 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:52:17.844 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:52:17.851 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:52:17.851 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:52:17.851 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 15:52:17.851 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:52:17.852 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:52:17.852 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:52:17.852 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:52:17.852 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 15:52:17.852 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 15:52:17.876 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 15:52:17.881 +07:00 [DBG] Creating DbConnection.
2025-10-02 15:52:17.881 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 15:52:17.881 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:52:17.881 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:52:17.881 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:52:17.881 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:52:17.882 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:52:17.882 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:52:17.910 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:52:17.912 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:52:17.912 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 15:52:17.912 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:52:17.912 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:52:17.914 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:52:17.914 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:52:17.914 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:52:17.914 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:52:17.914 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:52:17.914 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:52:17.990 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:52:17.995 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:52:17.996 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 5ms reading results.
2025-10-02 15:52:17.996 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:52:17.996 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:52:38.234 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 15:52:38.235 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 15:52:38.235 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 15:52:38.235 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 15:52:38.235 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 15:52:38.251 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 20415.8558ms
2025-10-02 15:52:38.251 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:52:38.251 +07:00 [DBG] Connection id "0HNG1I0KJ7MSS" completed keep alive response.
2025-10-02 15:52:38.251 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 15:52:38.252 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:52:38.252 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 15:52:38.252 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 20444.0903ms
2025-10-02 15:52:45.025 +07:00 [DBG] Connection id "0HNG1I0KJ7MSS" received FIN.
2025-10-02 15:52:45.026 +07:00 [DBG] Connection id "0HNG1I0KJ7MSS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:52:45.027 +07:00 [DBG] Connection id "0HNG1I0KJ7MSS" disconnecting.
2025-10-02 15:52:45.027 +07:00 [DBG] Connection id "0HNG1I0KJ7MSS" stopped.
2025-10-02 15:54:11.483 +07:00 [DBG] Connection id "0HNG1I0KJ7MST" accepted.
2025-10-02 15:54:11.483 +07:00 [DBG] Connection id "0HNG1I0KJ7MST" started.
2025-10-02 15:54:11.483 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 15:54:11.484 +07:00 [DBG] POST requests are not supported
2025-10-02 15:54:11.484 +07:00 [DBG] POST requests are not supported
2025-10-02 15:54:11.485 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 15:54:11.485 +07:00 [INF] CORS policy execution successful.
2025-10-02 15:54:11.514 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:54:11.514 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 15:54:11.514 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:54:11.517 +07:00 [DBG] Successfully validated the token.
2025-10-02 15:54:11.517 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 15:54:11.519 +07:00 [DBG] Authorization was successful.
2025-10-02 15:54:11.519 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:54:11.519 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 15:54:11.520 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 15:54:11.520 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 15:54:11.520 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 15:54:11.520 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 15:54:11.520 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 15:54:11.520 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:54:11.542 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 15:54:11.542 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:54:11.543 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 15:54:11.543 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:54:11.543 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:54:11.543 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 15:54:11.543 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 15:54:11.544 +07:00 [DBG] Connection id "0HNG1I0KJ7MST", Request id "0HNG1I0KJ7MST:00000001": started reading request body.
2025-10-02 15:54:11.544 +07:00 [DBG] Connection id "0HNG1I0KJ7MST", Request id "0HNG1I0KJ7MST:00000001": done reading request body.
2025-10-02 15:54:11.544 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 15:54:11.544 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:54:11.544 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:54:11.544 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 15:54:11.544 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 15:54:11.544 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:54:11.545 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 15:54:11.545 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:54:11.545 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:54:11.545 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 15:54:11.545 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 15:54:11.545 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 15:54:11.547 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 15:54:11.552 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 15:54:11.555 +07:00 [DBG] Creating DbConnection.
2025-10-02 15:54:11.555 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 15:54:11.555 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:54:11.558 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:54:11.558 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:54:11.558 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:54:11.559 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:54:11.559 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:54:11.690 +07:00 [INF] Executed DbCommand (131ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 15:54:11.691 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:54:11.691 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 15:54:11.691 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:54:11.692 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:54:11.694 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:54:11.695 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:54:11.695 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 15:54:11.695 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:54:11.695 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 15:54:11.695 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:54:11.788 +07:00 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 15:54:11.792 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 15:54:11.792 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 15:54:11.792 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:54:11.793 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 15:54:44.786 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 15:54:44.787 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 15:54:44.787 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 15:54:44.787 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 15:54:44.787 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 15:54:44.788 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 33267.9019ms
2025-10-02 15:54:44.788 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 15:54:44.788 +07:00 [DBG] Connection id "0HNG1I0KJ7MST" completed keep alive response.
2025-10-02 15:54:44.788 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 15:54:44.788 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 15:54:44.789 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 15:54:44.789 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 33305.854ms
2025-10-02 15:54:45.199 +07:00 [DBG] Connection id "0HNG1I0KJ7MST" received FIN.
2025-10-02 15:54:45.199 +07:00 [DBG] Connection id "0HNG1I0KJ7MST" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 15:54:45.199 +07:00 [DBG] Connection id "0HNG1I0KJ7MST" disconnecting.
2025-10-02 15:54:45.200 +07:00 [DBG] Connection id "0HNG1I0KJ7MST" stopped.
2025-10-02 16:00:31.841 +07:00 [INF] Application is shutting down...
2025-10-02 16:00:31.844 +07:00 [DBG] Hosting stopping
2025-10-02 16:00:31.859 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 16:00:31.899 +07:00 [DBG] Hosting stopped
2025-10-02 16:00:59.570 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 16:00:59.683 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 16:00:59.970 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:00:59.995 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.016 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.019 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.019 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.020 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.309 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.310 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.337 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.337 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.338 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.340 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.349 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.349 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:01:00.404 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 16:01:00.404 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 16:01:00.404 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 16:01:00.405 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 16:01:00.405 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 16:01:00.405 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 16:01:00.405 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 16:01:00.406 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 16:01:00.406 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 16:01:00.406 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 16:01:00.407 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 16:01:00.407 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 16:01:00.407 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 16:01:00.407 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 16:01:00.408 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 16:01:00.408 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 16:01:00.408 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 16:01:00.408 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 16:01:00.408 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 16:01:00.602 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:01:00.602 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:01:00.603 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:01:00.603 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:01:00.603 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:01:00.603 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:01:00.603 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:01:00.604 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:01:00.604 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:01:00.605 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:01:00.605 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:01:00.814 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:01:00.896 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 16:01:01.091 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:01:01.132 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:01:01.158 +07:00 [DBG] Created DbConnection. (21ms).
2025-10-02 16:01:01.161 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.361 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.365 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:01:01.374 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-02 16:01:01.380 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-10-02 16:01:01.387 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:01:01.463 +07:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:01:01.509 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:01:01.535 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.544 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 76ms reading results.
2025-10-02 16:01:01.547 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.552 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (4ms).
2025-10-02 16:01:01.560 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.561 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.561 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:01:01.561 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.562 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.562 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:01:01.567 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:01:01.568 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:01:01.568 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.568 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 16:01:01.569 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.569 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:01:01.570 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.570 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.570 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:01:01.571 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.571 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.571 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:01:01.574 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:01:01.575 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:01:01.576 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.576 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:01:01.576 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.576 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:01:01.577 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.577 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.577 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:01:01.577 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.578 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.578 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:01:01.579 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:01:01.580 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:01:01.580 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.580 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:01:01.580 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.580 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:01:01.592 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 16:01:01.598 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:01:01.600 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.600 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.600 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:01:01.601 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.601 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.601 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:01:01.611 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:01:01.643 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:01:01.683 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.683 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 71ms reading results.
2025-10-02 16:01:01.683 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.683 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:01:01.687 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 16:01:01.692 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.693 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.693 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:01:01.693 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.693 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.693 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:01:01.694 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:01:01.695 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:01:01.695 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.695 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:01:01.695 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.695 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:01:01.696 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 16:01:01.696 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.696 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.696 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:01:01.697 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.697 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.697 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:01:01.698 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:01:01.699 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:01:01.699 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.699 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:01:01.700 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.700 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:01:01.700 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.700 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.701 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:01:01.701 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.701 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:01.701 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:01:01.702 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:01:01.703 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:01:01.703 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.703 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:01:01.703 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.704 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:01:01.704 +07:00 [INF] Data seeding completed successfully
2025-10-02 16:01:01.708 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:01:01.712 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:01.713 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 16:01:01.742 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 16:01:01.973 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 16:01:02.131 +07:00 [DBG] Hosting starting
2025-10-02 16:01:02.145 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 16:01:02.148 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 16:01:02.149 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 16:01:02.158 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 16:01:02.163 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 16:01:02.164 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 16:01:02.174 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 16:01:02.182 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:01:02.182 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 16:01:02.185 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:01:02.187 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 16:01:02.194 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 16:01:02.198 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 16:01:02.199 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 16:01:02.299 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 16:01:02.300 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 16:01:02.300 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 16:01:02.300 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 16:01:02.300 +07:00 [INF] Hosting environment: Development
2025-10-02 16:01:02.300 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 16:01:02.303 +07:00 [DBG] Hosting started
2025-10-02 16:01:02.974 +07:00 [DBG] Connection id "0HNG1I8RD2FN0" accepted.
2025-10-02 16:01:02.977 +07:00 [DBG] Connection id "0HNG1I8RD2FN0" started.
2025-10-02 16:01:03.194 +07:00 [DBG] Connection id "0HNG1I8RD2FN1" accepted.
2025-10-02 16:01:03.198 +07:00 [DBG] Connection id "0HNG1I8RD2FN1" started.
2025-10-02 16:01:03.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 16:01:03.243 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 16:01:03.550 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 16:01:03.592 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 16:01:03.592 +07:00 [DBG] Connection id "0HNG1I8RD2FN0" completed keep alive response.
2025-10-02 16:01:03.600 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 392.4477ms
2025-10-02 16:01:03.637 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 16:01:03.643 +07:00 [DBG] Connection id "0HNG1I8RD2FN0" completed keep alive response.
2025-10-02 16:01:03.644 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 11.0262ms
2025-10-02 16:01:03.778 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 16:01:04.197 +07:00 [DBG] Connection id "0HNG1I8RD2FN0" completed keep alive response.
2025-10-02 16:01:04.197 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 419.3878ms
2025-10-02 16:01:05.767 +07:00 [DBG] Connection id "0HNG1I8RD2FN1" received FIN.
2025-10-02 16:01:05.767 +07:00 [DBG] Connection id "0HNG1I8RD2FN0" received FIN.
2025-10-02 16:01:05.773 +07:00 [DBG] Connection id "0HNG1I8RD2FN0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:01:05.773 +07:00 [DBG] Connection id "0HNG1I8RD2FN1" disconnecting.
2025-10-02 16:01:05.773 +07:00 [DBG] Connection id "0HNG1I8RD2FN1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:01:05.774 +07:00 [DBG] Connection id "0HNG1I8RD2FN0" disconnecting.
2025-10-02 16:01:05.775 +07:00 [DBG] Connection id "0HNG1I8RD2FN1" stopped.
2025-10-02 16:01:05.786 +07:00 [DBG] Connection id "0HNG1I8RD2FN0" stopped.
2025-10-02 16:01:12.607 +07:00 [DBG] Connection id "0HNG1I8RD2FN2" accepted.
2025-10-02 16:01:12.607 +07:00 [DBG] Connection id "0HNG1I8RD2FN2" started.
2025-10-02 16:01:12.609 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 16:01:12.613 +07:00 [DBG] POST requests are not supported
2025-10-02 16:01:12.615 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 16:01:12.616 +07:00 [DBG] POST requests are not supported
2025-10-02 16:01:12.617 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 16:01:12.618 +07:00 [INF] CORS policy execution successful.
2025-10-02 16:01:12.686 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:01:12.688 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:01:12.689 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:01:12.778 +07:00 [DBG] Successfully validated the token.
2025-10-02 16:01:12.780 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 16:01:12.788 +07:00 [DBG] Authorization was successful.
2025-10-02 16:01:12.795 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:01:12.822 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 16:01:12.824 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 16:01:12.825 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 16:01:12.826 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 16:01:12.826 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 16:01:12.826 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 16:01:12.828 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:01:13.111 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:01:13.133 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:01:13.140 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 16:01:13.147 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:01:13.150 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:01:13.150 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:01:13.151 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 16:01:13.195 +07:00 [DBG] Connection id "0HNG1I8RD2FN2", Request id "0HNG1I8RD2FN2:00000001": started reading request body.
2025-10-02 16:01:13.195 +07:00 [DBG] Connection id "0HNG1I8RD2FN2", Request id "0HNG1I8RD2FN2:00000001": done reading request body.
2025-10-02 16:01:13.216 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 16:01:13.218 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:01:13.219 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:01:13.221 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:01:13.240 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:01:13.242 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:01:13.243 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 16:01:13.244 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:01:13.245 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:01:13.245 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:01:13.245 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:01:13.253 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 16:01:13.257 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 16:01:13.360 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:01:13.374 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 16:01:13.391 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 16:01:13.525 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:01:13.528 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:01:13.529 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 16:01:13.529 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:13.529 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:13.530 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:01:13.531 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:13.533 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-02 16:01:13.535 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:01:13.572 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:01:13.576 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:01:13.576 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 16:01:13.577 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:13.577 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:01:13.592 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 16:01:13.615 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 16:01:13.616 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 16:01:13.620 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 16:01:13.623 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 16:01:13.738 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 16:01:13.754 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 16:01:13.763 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:13.764 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:13.764 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:01:13.764 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:13.765 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:01:13.765 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:01:13.850 +07:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:01:13.863 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:01:13.864 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 13ms reading results.
2025-10-02 16:01:13.864 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:01:13.864 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:02:07.741 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 16:02:07.742 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 16:02:07.743 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 16:02:07.744 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 16:02:07.744 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 16:02:07.823 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 54993.5587ms
2025-10-02 16:02:07.823 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:02:07.826 +07:00 [DBG] Connection id "0HNG1I8RD2FN2" completed keep alive response.
2025-10-02 16:02:07.827 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:02:07.827 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:02:07.827 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 16:02:07.828 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 55218.7319ms
2025-10-02 16:04:19.652 +07:00 [DBG] Connection id "0HNG1I8RD2FN2" disconnecting.
2025-10-02 16:04:19.653 +07:00 [DBG] Connection id "0HNG1I8RD2FN2" stopped.
2025-10-02 16:04:19.653 +07:00 [DBG] Connection id "0HNG1I8RD2FN2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:07:32.573 +07:00 [INF] Application is shutting down...
2025-10-02 16:07:32.575 +07:00 [DBG] Hosting stopping
2025-10-02 16:07:32.585 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 16:07:32.612 +07:00 [DBG] Hosting stopped
2025-10-02 16:08:54.948 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 16:08:55.060 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 16:08:55.352 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.377 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.404 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.407 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.407 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.409 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.714 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.716 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.747 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.748 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.748 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.752 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.758 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.759 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:08:55.825 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 16:08:55.825 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 16:08:55.826 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 16:08:55.826 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 16:08:55.826 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 16:08:55.826 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 16:08:55.826 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 16:08:55.826 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 16:08:55.827 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 16:08:55.827 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 16:08:55.827 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 16:08:55.827 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 16:08:55.827 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 16:08:55.827 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 16:08:55.828 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 16:08:55.828 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 16:08:55.828 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 16:08:55.828 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 16:08:55.828 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 16:08:56.028 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:08:56.029 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:08:56.029 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:08:56.029 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:08:56.030 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:08:56.030 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:08:56.030 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:08:56.030 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:08:56.031 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:08:56.032 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:08:56.032 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:08:56.245 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:08:56.327 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 16:08:56.508 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:08:56.551 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:08:56.571 +07:00 [DBG] Created DbConnection. (18ms).
2025-10-02 16:08:56.575 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.740 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.742 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:08:56.750 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 16:08:56.759 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-10-02 16:08:56.769 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:08:56.822 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:08:56.875 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:08:56.897 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.907 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 79ms reading results.
2025-10-02 16:08:56.910 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.919 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (8ms).
2025-10-02 16:08:56.922 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.923 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.924 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:08:56.924 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:56.924 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:56.925 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:08:56.927 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:08:56.928 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:08:56.928 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.929 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:08:56.929 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.929 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:08:56.929 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.930 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.930 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:08:56.930 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:56.931 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:56.931 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:08:56.935 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:08:56.935 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:08:56.936 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.936 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:08:56.936 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.936 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:08:56.937 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.937 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.937 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:08:56.937 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:56.938 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:56.938 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:08:56.939 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:08:56.939 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:08:56.939 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.939 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:08:56.940 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.940 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:08:56.947 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 16:08:56.957 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:08:56.959 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.959 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:56.960 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:08:56.960 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:56.960 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:56.960 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:08:56.963 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:08:56.993 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:08:57.035 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.035 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 71ms reading results.
2025-10-02 16:08:57.035 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.035 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:08:57.039 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 16:08:57.042 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.042 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.042 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:08:57.042 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:57.042 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:57.043 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:08:57.044 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:08:57.044 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:08:57.044 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.044 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:08:57.045 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.045 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:08:57.045 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 16:08:57.045 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.045 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.045 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:08:57.045 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:57.046 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:57.046 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:08:57.048 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:08:57.048 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:08:57.049 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.050 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 16:08:57.050 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.050 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:08:57.051 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.052 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.052 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:08:57.052 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:57.052 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:08:57.052 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:08:57.053 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:08:57.053 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:08:57.054 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.054 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:08:57.054 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.054 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:08:57.054 +07:00 [INF] Data seeding completed successfully
2025-10-02 16:08:57.056 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:08:57.058 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:08:57.059 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 16:08:57.076 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 16:08:57.267 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 16:08:57.425 +07:00 [DBG] Hosting starting
2025-10-02 16:08:57.437 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 16:08:57.438 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 16:08:57.439 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 16:08:57.442 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 16:08:57.447 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 16:08:57.448 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 16:08:57.454 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 16:08:57.457 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:08:57.457 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 16:08:57.459 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:08:57.460 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 16:08:57.464 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 16:08:57.468 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 16:08:57.469 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 16:08:57.526 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 16:08:57.526 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 16:08:57.526 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 16:08:57.527 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 16:08:57.527 +07:00 [INF] Hosting environment: Development
2025-10-02 16:08:57.527 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 16:08:57.529 +07:00 [DBG] Hosting started
2025-10-02 16:08:57.665 +07:00 [DBG] Connection id "0HNG1ID8S2VHJ" accepted.
2025-10-02 16:08:57.667 +07:00 [DBG] Connection id "0HNG1ID8S2VHJ" started.
2025-10-02 16:08:57.709 +07:00 [DBG] Connection id "0HNG1ID8S2VHK" accepted.
2025-10-02 16:08:57.709 +07:00 [DBG] Connection id "0HNG1ID8S2VHK" started.
2025-10-02 16:08:57.763 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 16:08:57.772 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 16:08:58.143 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 16:08:58.153 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 16:08:58.154 +07:00 [DBG] Connection id "0HNG1ID8S2VHJ" completed keep alive response.
2025-10-02 16:08:58.157 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 396.3231ms
2025-10-02 16:08:58.171 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 16:08:58.175 +07:00 [DBG] Connection id "0HNG1ID8S2VHJ" completed keep alive response.
2025-10-02 16:08:58.176 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 3.9976ms
2025-10-02 16:08:58.298 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 16:08:58.661 +07:00 [DBG] Connection id "0HNG1ID8S2VHJ" completed keep alive response.
2025-10-02 16:08:58.662 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 363.9528ms
2025-10-02 16:09:08.279 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 16:09:08.283 +07:00 [DBG] POST requests are not supported
2025-10-02 16:09:08.285 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 16:09:08.298 +07:00 [DBG] POST requests are not supported
2025-10-02 16:09:08.302 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 16:09:08.303 +07:00 [INF] CORS policy execution successful.
2025-10-02 16:09:08.364 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:09:08.365 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:09:08.367 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:09:08.463 +07:00 [DBG] Successfully validated the token.
2025-10-02 16:09:08.464 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 16:09:08.470 +07:00 [DBG] Authorization was successful.
2025-10-02 16:09:08.479 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:09:08.499 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 16:09:08.501 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 16:09:08.501 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 16:09:08.503 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 16:09:08.503 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 16:09:08.503 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 16:09:08.505 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:09:08.646 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:09:08.651 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:09:08.654 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 16:09:08.657 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:09:08.658 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:09:08.659 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:09:08.660 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 16:09:08.671 +07:00 [DBG] Connection id "0HNG1ID8S2VHJ", Request id "0HNG1ID8S2VHJ:00000004": started reading request body.
2025-10-02 16:09:08.671 +07:00 [DBG] Connection id "0HNG1ID8S2VHJ", Request id "0HNG1ID8S2VHJ:00000004": done reading request body.
2025-10-02 16:09:08.682 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 16:09:08.683 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:09:08.683 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:09:08.683 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:09:08.690 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:09:08.694 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:09:08.695 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 16:09:08.697 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:09:08.697 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:09:08.697 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:09:08.698 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:09:08.701 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 16:09:08.703 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 16:09:08.775 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:09:08.784 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 16:09:08.799 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 16:09:08.866 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:09:08.876 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:09:08.877 +07:00 [DBG] Created DbConnection. (1ms).
2025-10-02 16:09:08.877 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:09:08.878 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:09:08.878 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:09:08.878 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:09:08.878 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:09:08.879 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:09:08.887 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:09:08.897 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:09:08.898 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 10ms reading results.
2025-10-02 16:09:08.898 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:09:08.898 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:09:08.904 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 16:09:08.914 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 16:09:08.915 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 16:09:08.916 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 16:09:08.917 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 16:09:09.015 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 16:09:09.031 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 16:09:09.044 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:09:09.044 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:09:09.044 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:09:09.045 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:09:09.045 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:09:09.045 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:09:09.132 +07:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:09:09.148 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:09:09.148 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 15ms reading results.
2025-10-02 16:09:09.148 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:09:09.148 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:10:10.477 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 16:10:10.479 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 16:10:10.480 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 16:10:10.481 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 16:10:10.482 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 16:10:10.558 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 62052.1504ms
2025-10-02 16:10:10.559 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:10:10.563 +07:00 [DBG] Connection id "0HNG1ID8S2VHJ" completed keep alive response.
2025-10-02 16:10:10.563 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:10:10.564 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:10:10.564 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 16:10:10.565 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 62286.1112ms
2025-10-02 16:11:09.468 +07:00 [DBG] Connection id "0HNG1ID8S2VHK" disconnecting.
2025-10-02 16:11:09.469 +07:00 [DBG] Connection id "0HNG1ID8S2VHK" stopped.
2025-10-02 16:11:09.471 +07:00 [DBG] Connection id "0HNG1ID8S2VHK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:12:21.076 +07:00 [DBG] Connection id "0HNG1ID8S2VHJ" disconnecting.
2025-10-02 16:12:21.077 +07:00 [DBG] Connection id "0HNG1ID8S2VHJ" stopped.
2025-10-02 16:12:21.077 +07:00 [DBG] Connection id "0HNG1ID8S2VHJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:13:02.560 +07:00 [DBG] Connection id "0HNG1ID8S2VHL" accepted.
2025-10-02 16:13:02.561 +07:00 [DBG] Connection id "0HNG1ID8S2VHL" started.
2025-10-02 16:13:02.562 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 16:13:02.562 +07:00 [DBG] POST requests are not supported
2025-10-02 16:13:02.562 +07:00 [DBG] POST requests are not supported
2025-10-02 16:13:02.563 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 16:13:02.563 +07:00 [INF] CORS policy execution successful.
2025-10-02 16:13:02.571 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:13:02.571 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:13:02.572 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:13:02.578 +07:00 [DBG] Successfully validated the token.
2025-10-02 16:13:02.578 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 16:13:02.589 +07:00 [DBG] Authorization was successful.
2025-10-02 16:13:02.592 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:13:02.593 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 16:13:02.594 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 16:13:02.594 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 16:13:02.594 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 16:13:02.594 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 16:13:02.594 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 16:13:02.594 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:13:02.597 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:13:02.604 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:13:02.607 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 16:13:02.607 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:13:02.607 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:13:02.607 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:13:02.608 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 16:13:02.608 +07:00 [DBG] Connection id "0HNG1ID8S2VHL", Request id "0HNG1ID8S2VHL:00000001": started reading request body.
2025-10-02 16:13:02.608 +07:00 [DBG] Connection id "0HNG1ID8S2VHL", Request id "0HNG1ID8S2VHL:00000001": done reading request body.
2025-10-02 16:13:02.608 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 16:13:02.609 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:13:02.609 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:13:02.609 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:13:02.609 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:13:02.609 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:13:02.610 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 16:13:02.610 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:13:02.610 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:13:02.610 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:13:02.610 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:13:02.610 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 16:13:02.611 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 16:13:02.625 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:13:02.627 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:13:02.627 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 16:13:02.627 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:13:02.628 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:13:02.628 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:13:02.628 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:13:02.628 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:13:02.628 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:13:02.637 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:13:02.638 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:13:02.638 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:13:02.638 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:13:02.638 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:13:02.639 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:13:02.640 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:13:02.640 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:13:02.640 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:13:02.640 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:13:02.640 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:13:02.690 +07:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:13:02.713 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:13:02.714 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 16:13:02.715 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:13:02.715 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:14:28.984 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 16:14:28.984 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 16:14:28.984 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 16:14:28.985 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 16:14:28.985 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 16:14:28.986 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 86391.2821ms
2025-10-02 16:14:28.986 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:14:28.986 +07:00 [DBG] Connection id "0HNG1ID8S2VHL" completed keep alive response.
2025-10-02 16:14:28.986 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:14:28.986 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:14:28.986 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 16:14:28.987 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 86424.9433ms
2025-10-02 16:16:39.921 +07:00 [DBG] Connection id "0HNG1ID8S2VHL" disconnecting.
2025-10-02 16:16:39.921 +07:00 [DBG] Connection id "0HNG1ID8S2VHL" stopped.
2025-10-02 16:16:39.921 +07:00 [DBG] Connection id "0HNG1ID8S2VHL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:22:39.763 +07:00 [INF] Application is shutting down...
2025-10-02 16:22:39.764 +07:00 [DBG] Hosting stopping
2025-10-02 16:22:39.771 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 16:22:39.791 +07:00 [DBG] Hosting stopped
2025-10-02 16:23:03.179 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 16:23:03.287 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 16:23:03.575 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.601 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.620 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.623 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.623 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.624 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.904 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.906 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.927 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.928 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.928 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.929 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.937 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.938 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:23:03.993 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 16:23:03.993 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 16:23:03.993 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 16:23:03.994 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 16:23:03.994 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 16:23:03.994 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 16:23:03.994 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 16:23:03.994 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 16:23:03.994 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 16:23:03.994 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 16:23:03.995 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 16:23:03.995 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 16:23:03.995 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 16:23:03.995 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 16:23:03.995 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 16:23:03.995 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 16:23:03.996 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 16:23:03.996 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 16:23:03.997 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 16:23:04.200 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:23:04.201 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:23:04.201 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:23:04.201 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:23:04.201 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:23:04.201 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:23:04.202 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:23:04.202 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:23:04.202 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:23:04.202 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:23:04.202 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:23:04.397 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:23:04.474 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 16:23:04.671 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:23:04.720 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:23:04.742 +07:00 [DBG] Created DbConnection. (19ms).
2025-10-02 16:23:04.745 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:04.926 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:04.931 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:23:04.938 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-02 16:23:04.946 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-10-02 16:23:04.958 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:23:05.018 +07:00 [INF] Executed DbCommand (65ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:23:05.060 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:23:05.084 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.090 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 67ms reading results.
2025-10-02 16:23:05.093 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.099 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (5ms).
2025-10-02 16:23:05.103 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.104 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.104 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:23:05.104 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.104 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.104 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:23:05.129 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:23:05.131 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:23:05.132 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.133 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 16:23:05.133 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.133 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:23:05.134 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.135 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.135 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:23:05.135 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.135 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.135 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:23:05.138 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:23:05.138 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:23:05.138 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.138 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:23:05.138 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.139 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:23:05.139 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.139 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.140 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:23:05.140 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.140 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.140 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:23:05.141 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:23:05.142 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:23:05.142 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.142 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:23:05.142 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.142 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:23:05.151 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 16:23:05.157 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:23:05.158 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.158 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.159 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:23:05.159 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.159 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.159 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:23:05.167 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:23:05.193 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:23:05.227 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.228 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 59ms reading results.
2025-10-02 16:23:05.228 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.228 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:23:05.234 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 16:23:05.237 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.237 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.237 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:23:05.237 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.237 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.238 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:23:05.239 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:23:05.239 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:23:05.239 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.239 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:23:05.239 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.240 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:23:05.240 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 16:23:05.241 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.241 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.241 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:23:05.241 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.241 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.241 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:23:05.242 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:23:05.242 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:23:05.243 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.243 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:23:05.243 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.243 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:23:05.243 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.244 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.244 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:23:05.244 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.244 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:05.244 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:23:05.245 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:23:05.246 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:23:05.246 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.247 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 16:23:05.247 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.248 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:23:05.248 +07:00 [INF] Data seeding completed successfully
2025-10-02 16:23:05.251 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:23:05.253 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:05.254 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 16:23:05.270 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 16:23:05.450 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 16:23:05.589 +07:00 [DBG] Hosting starting
2025-10-02 16:23:05.601 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 16:23:05.602 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 16:23:05.603 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 16:23:05.606 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 16:23:05.609 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 16:23:05.609 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 16:23:05.617 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 16:23:05.620 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:23:05.620 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 16:23:05.621 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:23:05.623 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 16:23:05.625 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 16:23:05.628 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 16:23:05.629 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 16:23:05.682 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 16:23:05.683 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 16:23:05.683 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 16:23:05.683 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 16:23:05.683 +07:00 [INF] Hosting environment: Development
2025-10-02 16:23:05.683 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 16:23:05.685 +07:00 [DBG] Hosting started
2025-10-02 16:23:05.820 +07:00 [DBG] Connection id "0HNG1IL5KNJPN" accepted.
2025-10-02 16:23:05.822 +07:00 [DBG] Connection id "0HNG1IL5KNJPN" started.
2025-10-02 16:23:05.873 +07:00 [DBG] Connection id "0HNG1IL5KNJPO" accepted.
2025-10-02 16:23:05.874 +07:00 [DBG] Connection id "0HNG1IL5KNJPO" started.
2025-10-02 16:23:06.013 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 16:23:06.030 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 16:23:06.430 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 16:23:06.453 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 16:23:06.454 +07:00 [DBG] Connection id "0HNG1IL5KNJPN" completed keep alive response.
2025-10-02 16:23:06.457 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 452.8707ms
2025-10-02 16:23:06.475 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 16:23:06.490 +07:00 [DBG] Connection id "0HNG1IL5KNJPN" completed keep alive response.
2025-10-02 16:23:06.491 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 15.6655ms
2025-10-02 16:23:06.620 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 16:23:07.203 +07:00 [DBG] Connection id "0HNG1IL5KNJPN" completed keep alive response.
2025-10-02 16:23:07.204 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 583.4487ms
2025-10-02 16:23:07.956 +07:00 [DBG] Connection id "0HNG1IL5KNJPO" received FIN.
2025-10-02 16:23:07.956 +07:00 [DBG] Connection id "0HNG1IL5KNJPN" received FIN.
2025-10-02 16:23:07.958 +07:00 [DBG] Connection id "0HNG1IL5KNJPN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:23:07.958 +07:00 [DBG] Connection id "0HNG1IL5KNJPO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:23:07.959 +07:00 [DBG] Connection id "0HNG1IL5KNJPO" disconnecting.
2025-10-02 16:23:07.959 +07:00 [DBG] Connection id "0HNG1IL5KNJPN" disconnecting.
2025-10-02 16:23:07.961 +07:00 [DBG] Connection id "0HNG1IL5KNJPN" stopped.
2025-10-02 16:23:07.961 +07:00 [DBG] Connection id "0HNG1IL5KNJPO" stopped.
2025-10-02 16:23:15.097 +07:00 [DBG] Connection id "0HNG1IL5KNJPP" accepted.
2025-10-02 16:23:15.098 +07:00 [DBG] Connection id "0HNG1IL5KNJPP" started.
2025-10-02 16:23:15.100 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 16:23:15.103 +07:00 [DBG] POST requests are not supported
2025-10-02 16:23:15.105 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 16:23:15.107 +07:00 [DBG] POST requests are not supported
2025-10-02 16:23:15.110 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 16:23:15.111 +07:00 [INF] CORS policy execution successful.
2025-10-02 16:23:15.252 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:23:15.261 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:23:15.271 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:23:15.447 +07:00 [DBG] Successfully validated the token.
2025-10-02 16:23:15.448 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 16:23:15.454 +07:00 [DBG] Authorization was successful.
2025-10-02 16:23:15.466 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:23:15.486 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 16:23:15.488 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 16:23:15.489 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 16:23:15.492 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 16:23:15.493 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 16:23:15.493 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 16:23:15.496 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:23:15.631 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:23:15.636 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:23:15.640 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 16:23:15.644 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:23:15.644 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:23:15.644 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:23:15.645 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 16:23:15.656 +07:00 [DBG] Connection id "0HNG1IL5KNJPP", Request id "0HNG1IL5KNJPP:00000001": started reading request body.
2025-10-02 16:23:15.658 +07:00 [DBG] Connection id "0HNG1IL5KNJPP", Request id "0HNG1IL5KNJPP:00000001": done reading request body.
2025-10-02 16:23:15.666 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 16:23:15.666 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:23:15.666 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:23:15.666 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:23:15.678 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:23:15.679 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:23:15.680 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 16:23:15.681 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:23:15.681 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:23:15.681 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:23:15.681 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:23:15.684 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 16:23:15.686 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 16:23:15.762 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:23:15.770 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 16:23:15.784 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 16:23:15.866 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:23:15.869 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:23:15.870 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 16:23:15.870 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:15.870 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:15.870 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:23:15.871 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:15.871 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:15.872 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:23:15.901 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:23:15.910 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:23:15.911 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 8ms reading results.
2025-10-02 16:23:15.911 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:15.912 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:23:15.919 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 16:23:15.933 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 16:23:15.934 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 16:23:15.934 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 16:23:15.935 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 16:23:16.032 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 16:23:16.042 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 16:23:16.051 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:16.051 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:16.052 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:23:16.052 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:16.052 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:23:16.052 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:23:16.130 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:23:16.145 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:23:16.146 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 15ms reading results.
2025-10-02 16:23:16.146 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:23:16.146 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:24:47.840 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 16:24:47.842 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 16:24:47.843 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 16:24:47.844 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 16:24:47.845 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 16:24:47.924 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 92427.775ms
2025-10-02 16:24:47.925 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:24:47.928 +07:00 [DBG] Connection id "0HNG1IL5KNJPP" completed keep alive response.
2025-10-02 16:24:47.929 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:24:47.929 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:24:47.929 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 16:24:47.931 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 92831.5543ms
2025-10-02 16:24:53.162 +07:00 [DBG] Connection id "0HNG1IL5KNJPP" received FIN.
2025-10-02 16:24:53.163 +07:00 [DBG] Connection id "0HNG1IL5KNJPP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:24:53.165 +07:00 [DBG] Connection id "0HNG1IL5KNJPP" disconnecting.
2025-10-02 16:24:53.166 +07:00 [DBG] Connection id "0HNG1IL5KNJPP" stopped.
2025-10-02 16:28:24.882 +07:00 [DBG] Connection id "0HNG1IL5KNJPQ" accepted.
2025-10-02 16:28:24.882 +07:00 [DBG] Connection id "0HNG1IL5KNJPQ" started.
2025-10-02 16:28:24.883 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 16:28:24.883 +07:00 [DBG] POST requests are not supported
2025-10-02 16:28:24.884 +07:00 [DBG] POST requests are not supported
2025-10-02 16:28:24.885 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 16:28:24.885 +07:00 [INF] CORS policy execution successful.
2025-10-02 16:28:24.914 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:28:24.914 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:28:24.915 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:28:24.929 +07:00 [DBG] Successfully validated the token.
2025-10-02 16:28:24.930 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 16:28:24.932 +07:00 [DBG] Authorization was successful.
2025-10-02 16:28:24.932 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:28:24.933 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 16:28:24.934 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 16:28:24.935 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 16:28:24.935 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 16:28:24.936 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 16:28:24.937 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 16:28:24.938 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:28:24.946 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:28:24.948 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:28:24.949 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 16:28:24.949 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:28:24.949 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:28:24.949 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:28:24.950 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 16:28:24.951 +07:00 [DBG] Connection id "0HNG1IL5KNJPQ", Request id "0HNG1IL5KNJPQ:00000001": started reading request body.
2025-10-02 16:28:24.951 +07:00 [DBG] Connection id "0HNG1IL5KNJPQ", Request id "0HNG1IL5KNJPQ:00000001": done reading request body.
2025-10-02 16:28:24.952 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 16:28:24.952 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:28:24.952 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:28:24.953 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:28:24.955 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:28:24.956 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:28:24.956 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 16:28:24.956 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:28:24.956 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:28:24.957 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:28:24.957 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:28:24.957 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 16:28:24.958 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 16:28:24.975 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:28:24.978 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:28:24.978 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 16:28:24.978 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:28:24.978 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:28:24.978 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:28:24.979 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:28:24.979 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:28:24.979 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:28:25.000 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:28:25.004 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:28:25.004 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 16:28:25.004 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:28:25.005 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:28:25.007 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:28:25.007 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:28:25.007 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:28:25.007 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:28:25.007 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:28:25.008 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:28:25.091 +07:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:28:25.096 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:28:25.096 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 5ms reading results.
2025-10-02 16:28:25.096 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:28:25.096 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:28:27.369 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 16:28:27.369 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 16:28:27.369 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 16:28:27.371 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 16:28:27.371 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 16:28:27.374 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2436.0722ms
2025-10-02 16:28:27.374 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:28:27.375 +07:00 [DBG] Connection id "0HNG1IL5KNJPQ" completed keep alive response.
2025-10-02 16:28:27.376 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:28:27.376 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:28:27.377 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 16:28:27.377 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2494.4192ms
2025-10-02 16:30:37.857 +07:00 [DBG] Connection id "0HNG1IL5KNJPQ" disconnecting.
2025-10-02 16:30:37.858 +07:00 [DBG] Connection id "0HNG1IL5KNJPQ" stopped.
2025-10-02 16:30:37.858 +07:00 [DBG] Connection id "0HNG1IL5KNJPQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:41:27.826 +07:00 [INF] Application is shutting down...
2025-10-02 16:41:27.832 +07:00 [DBG] Hosting stopping
2025-10-02 16:42:40.630 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 16:42:40.772 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 16:42:41.090 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.122 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.144 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.148 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.148 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.150 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.471 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.472 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.500 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.501 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.501 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.503 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.515 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.516 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:42:41.593 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 16:42:41.595 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 16:42:41.595 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 16:42:41.596 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 16:42:41.596 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 16:42:41.597 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 16:42:41.597 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 16:42:41.598 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 16:42:41.598 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 16:42:41.598 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 16:42:41.598 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 16:42:41.599 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 16:42:41.599 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 16:42:41.599 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 16:42:41.599 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 16:42:41.599 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 16:42:41.600 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 16:42:41.600 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 16:42:41.600 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 16:42:41.837 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:42:41.838 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:42:41.838 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:42:41.838 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:42:41.838 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:42:41.838 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:42:41.839 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:42:41.839 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:42:41.839 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:42:41.840 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:42:41.840 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:42:42.087 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:42:42.157 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 16:42:42.351 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:42:42.396 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:42:42.420 +07:00 [DBG] Created DbConnection. (21ms).
2025-10-02 16:42:42.424 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.602 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.605 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:42:42.612 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 16:42:42.622 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2025-10-02 16:42:42.632 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:42:42.684 +07:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:42:42.733 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:42:42.755 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.761 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 72ms reading results.
2025-10-02 16:42:42.765 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.770 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (5ms).
2025-10-02 16:42:42.773 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.774 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.774 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:42:42.774 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.775 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.775 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:42:42.780 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:42:42.780 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:42:42.781 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.781 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 16:42:42.782 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.782 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:42:42.782 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.782 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.782 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:42:42.782 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.782 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.783 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:42:42.784 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:42:42.784 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:42:42.784 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.784 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:42:42.785 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.785 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:42:42.785 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.785 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.785 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:42:42.785 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.785 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.786 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:42:42.786 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:42:42.787 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:42:42.787 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.787 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:42:42.787 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.787 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:42:42.793 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 16:42:42.803 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:42:42.805 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.805 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.805 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:42:42.805 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.805 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.806 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:42:42.808 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:42:42.838 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:42:42.872 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.872 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 63ms reading results.
2025-10-02 16:42:42.872 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.872 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:42:42.875 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 16:42:42.880 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.881 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.881 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:42:42.881 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.881 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.881 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:42:42.882 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:42:42.882 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:42:42.883 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.883 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:42:42.883 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.883 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:42:42.883 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 16:42:42.884 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.884 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.884 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:42:42.884 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.884 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.884 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:42:42.885 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:42:42.885 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:42:42.886 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.886 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:42:42.886 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.886 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:42:42.887 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.887 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.887 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:42:42.887 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.888 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:42.888 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:42:42.889 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:42:42.889 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:42:42.889 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.889 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:42:42.890 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.890 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:42:42.890 +07:00 [INF] Data seeding completed successfully
2025-10-02 16:42:42.892 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:42:42.896 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:42.898 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 16:42:42.918 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 16:42:43.151 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 16:42:43.295 +07:00 [DBG] Hosting starting
2025-10-02 16:42:43.305 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 16:42:43.307 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 16:42:43.307 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 16:42:43.313 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 16:42:43.317 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 16:42:43.317 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 16:42:43.322 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 16:42:43.325 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:42:43.325 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 16:42:43.329 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:42:43.331 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 16:42:43.335 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 16:42:43.340 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 16:42:43.341 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 16:42:43.411 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 16:42:43.411 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 16:42:43.411 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 16:42:43.412 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 16:42:43.412 +07:00 [INF] Hosting environment: Development
2025-10-02 16:42:43.412 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 16:42:43.415 +07:00 [DBG] Hosting started
2025-10-02 16:42:43.569 +07:00 [DBG] Connection id "0HNG1J04KK38K" accepted.
2025-10-02 16:42:43.571 +07:00 [DBG] Connection id "0HNG1J04KK38K" started.
2025-10-02 16:42:43.609 +07:00 [DBG] Connection id "0HNG1J04KK38L" accepted.
2025-10-02 16:42:43.612 +07:00 [DBG] Connection id "0HNG1J04KK38L" started.
2025-10-02 16:42:43.642 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 16:42:43.660 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 16:42:44.014 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 16:42:44.037 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 16:42:44.037 +07:00 [DBG] Connection id "0HNG1J04KK38K" completed keep alive response.
2025-10-02 16:42:44.040 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 409.2085ms
2025-10-02 16:42:44.064 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 16:42:44.075 +07:00 [DBG] Connection id "0HNG1J04KK38K" completed keep alive response.
2025-10-02 16:42:44.080 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 11.8698ms
2025-10-02 16:42:44.169 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 16:42:44.538 +07:00 [DBG] Connection id "0HNG1J04KK38K" completed keep alive response.
2025-10-02 16:42:44.538 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 368.5788ms
2025-10-02 16:42:44.887 +07:00 [DBG] Connection id "0HNG1J04KK38K" received FIN.
2025-10-02 16:42:44.887 +07:00 [DBG] Connection id "0HNG1J04KK38L" received FIN.
2025-10-02 16:42:44.890 +07:00 [DBG] Connection id "0HNG1J04KK38K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:42:44.890 +07:00 [DBG] Connection id "0HNG1J04KK38L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:42:44.892 +07:00 [DBG] Connection id "0HNG1J04KK38L" disconnecting.
2025-10-02 16:42:44.892 +07:00 [DBG] Connection id "0HNG1J04KK38K" disconnecting.
2025-10-02 16:42:44.895 +07:00 [DBG] Connection id "0HNG1J04KK38L" stopped.
2025-10-02 16:42:44.895 +07:00 [DBG] Connection id "0HNG1J04KK38K" stopped.
2025-10-02 16:42:53.449 +07:00 [DBG] Connection id "0HNG1J04KK38M" accepted.
2025-10-02 16:42:53.450 +07:00 [DBG] Connection id "0HNG1J04KK38M" started.
2025-10-02 16:42:53.451 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 16:42:53.455 +07:00 [DBG] POST requests are not supported
2025-10-02 16:42:53.456 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 16:42:53.456 +07:00 [DBG] POST requests are not supported
2025-10-02 16:42:53.458 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 16:42:53.459 +07:00 [INF] CORS policy execution successful.
2025-10-02 16:42:53.517 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:42:53.518 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:42:53.519 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:42:53.639 +07:00 [DBG] Successfully validated the token.
2025-10-02 16:42:53.640 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 16:42:53.647 +07:00 [DBG] Authorization was successful.
2025-10-02 16:42:53.659 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:42:53.690 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 16:42:53.694 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 16:42:53.695 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 16:42:53.696 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 16:42:53.696 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 16:42:53.697 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 16:42:53.700 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:42:53.848 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:42:53.856 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:42:53.859 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 16:42:53.860 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:42:53.861 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:42:53.861 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:42:53.861 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 16:42:53.874 +07:00 [DBG] Connection id "0HNG1J04KK38M", Request id "0HNG1J04KK38M:00000001": started reading request body.
2025-10-02 16:42:53.874 +07:00 [DBG] Connection id "0HNG1J04KK38M", Request id "0HNG1J04KK38M:00000001": done reading request body.
2025-10-02 16:42:53.881 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 16:42:53.882 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:42:53.882 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:42:53.882 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:42:53.896 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:42:53.897 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:42:53.898 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 16:42:53.900 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:42:53.900 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:42:53.900 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:42:53.901 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:42:53.906 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 16:42:53.909 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 16:42:53.983 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:42:53.994 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 16:42:54.010 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 16:42:54.078 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:42:54.083 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:42:54.084 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 16:42:54.084 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:54.085 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:54.085 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:42:54.085 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:54.086 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:54.088 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:42:54.100 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:42:54.111 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:42:54.111 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 11ms reading results.
2025-10-02 16:42:54.112 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:54.113 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:42:54.126 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 16:42:54.142 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 16:42:54.143 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 16:42:54.145 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 16:42:54.146 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 16:42:54.251 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 16:42:54.267 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 16:42:54.284 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:54.284 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:54.285 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:42:54.285 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:54.285 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:42:54.286 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:42:54.376 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:42:54.397 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:42:54.398 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 21ms reading results.
2025-10-02 16:42:54.398 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:42:54.398 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:46:50.048 +07:00 [INF] Application is shutting down...
2025-10-02 16:46:50.049 +07:00 [DBG] Hosting stopping
2025-10-02 16:47:20.062 +07:00 [DBG] Some connections failed to close gracefully during server shutdown.
2025-10-02 16:47:20.063 +07:00 [DBG] Connection id "0HNG1J04KK38M" sending RST because: "The connection was aborted because the server is shutting down and request processing didn't complete within the time specified by HostOptions.ShutdownTimeout."
2025-10-02 16:47:20.064 +07:00 [DBG] Connection id "0HNG1J04KK38M" disconnecting.
2025-10-02 16:47:21.066 +07:00 [DBG] Some connections failed to abort during server shutdown.
2025-10-02 16:47:21.070 +07:00 [DBG] Hosting stopped
2025-10-02 16:47:45.924 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 16:47:46.048 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 16:47:46.349 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.374 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.396 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.399 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.400 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.401 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.761 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.762 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.796 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.797 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.797 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.799 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.805 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.806 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:47:46.884 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 16:47:46.885 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 16:47:46.885 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 16:47:46.885 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 16:47:46.886 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 16:47:46.886 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 16:47:46.886 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 16:47:46.886 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 16:47:46.887 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 16:47:46.887 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 16:47:46.887 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 16:47:46.887 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 16:47:46.887 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 16:47:46.887 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 16:47:46.887 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 16:47:46.888 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 16:47:46.888 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 16:47:46.888 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 16:47:46.888 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 16:47:47.111 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:47:47.112 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:47:47.112 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:47:47.112 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:47:47.113 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:47:47.113 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:47:47.113 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:47:47.113 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:47:47.114 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:47:47.114 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:47:47.114 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:47:47.343 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:47:47.430 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 16:47:47.656 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:47:47.701 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:47:47.723 +07:00 [DBG] Created DbConnection. (20ms).
2025-10-02 16:47:47.731 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:47.887 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:47.891 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:47:47.897 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-02 16:47:47.904 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-10-02 16:47:47.915 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:47:47.988 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:47:48.047 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:47:48.072 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.082 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 88ms reading results.
2025-10-02 16:47:48.084 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.089 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (4ms).
2025-10-02 16:47:48.095 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.097 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.097 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:47:48.097 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.097 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.097 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:47:48.101 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:47:48.101 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:47:48.102 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.102 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 16:47:48.102 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.102 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:47:48.103 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.103 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.103 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:47:48.103 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.103 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.104 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:47:48.104 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:47:48.105 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:47:48.105 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.105 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:47:48.105 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.105 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:47:48.106 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.106 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.106 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:47:48.106 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.106 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.106 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:47:48.110 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:47:48.111 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:47:48.111 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.112 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 16:47:48.112 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.112 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:47:48.119 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 16:47:48.133 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:47:48.135 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.135 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:47:48.136 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.136 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.136 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:47:48.149 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:47:48.183 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:47:48.220 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.220 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 70ms reading results.
2025-10-02 16:47:48.220 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.220 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:47:48.224 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 16:47:48.231 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.231 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.231 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:47:48.231 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.231 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.231 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:47:48.232 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:47:48.233 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:47:48.233 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.233 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:47:48.233 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.233 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:47:48.233 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 16:47:48.234 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.234 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.234 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:47:48.234 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.234 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.234 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:47:48.235 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:47:48.235 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:47:48.236 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.236 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:47:48.236 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.236 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:47:48.236 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.236 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.237 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:47:48.237 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.237 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:48.237 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:47:48.238 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:47:48.238 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:47:48.239 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.239 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:47:48.239 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.239 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:47:48.239 +07:00 [INF] Data seeding completed successfully
2025-10-02 16:47:48.243 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:47:48.247 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:48.248 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 16:47:48.267 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 16:47:48.487 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 16:47:48.652 +07:00 [DBG] Hosting starting
2025-10-02 16:47:48.663 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 16:47:48.665 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 16:47:48.666 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 16:47:48.669 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 16:47:48.672 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 16:47:48.672 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 16:47:48.682 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 16:47:48.685 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:47:48.686 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 16:47:48.687 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:47:48.688 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 16:47:48.694 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 16:47:48.699 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 16:47:48.700 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 16:47:48.763 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 16:47:48.764 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 16:47:48.764 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 16:47:48.764 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 16:47:48.764 +07:00 [INF] Hosting environment: Development
2025-10-02 16:47:48.764 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 16:47:48.766 +07:00 [DBG] Hosting started
2025-10-02 16:47:48.891 +07:00 [DBG] Connection id "0HNG1J2VKCI8C" accepted.
2025-10-02 16:47:48.893 +07:00 [DBG] Connection id "0HNG1J2VKCI8C" started.
2025-10-02 16:47:48.945 +07:00 [DBG] Connection id "0HNG1J2VKCI8D" accepted.
2025-10-02 16:47:48.945 +07:00 [DBG] Connection id "0HNG1J2VKCI8D" started.
2025-10-02 16:47:48.988 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 16:47:49.000 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 16:47:49.355 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 16:47:49.367 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 16:47:49.367 +07:00 [DBG] Connection id "0HNG1J2VKCI8C" completed keep alive response.
2025-10-02 16:47:49.370 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 384.3846ms
2025-10-02 16:47:49.390 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 16:47:49.395 +07:00 [DBG] Connection id "0HNG1J2VKCI8C" completed keep alive response.
2025-10-02 16:47:49.401 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 10.4487ms
2025-10-02 16:47:49.502 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 16:47:49.866 +07:00 [DBG] Connection id "0HNG1J2VKCI8C" completed keep alive response.
2025-10-02 16:47:49.867 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 365.2294ms
2025-10-02 16:47:55.565 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 16:47:55.568 +07:00 [DBG] POST requests are not supported
2025-10-02 16:47:55.570 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 16:47:55.571 +07:00 [DBG] POST requests are not supported
2025-10-02 16:47:55.573 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 16:47:55.574 +07:00 [INF] CORS policy execution successful.
2025-10-02 16:47:55.640 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:47:55.642 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:47:55.644 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:47:55.742 +07:00 [DBG] Successfully validated the token.
2025-10-02 16:47:55.744 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 16:47:55.749 +07:00 [DBG] Authorization was successful.
2025-10-02 16:47:55.760 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:47:55.782 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 16:47:55.784 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 16:47:55.785 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 16:47:55.788 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 16:47:55.789 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 16:47:55.790 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 16:47:55.793 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:47:55.942 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:47:55.947 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:47:55.950 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 16:47:55.952 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:47:55.953 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:47:55.953 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:47:55.954 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 16:47:55.966 +07:00 [DBG] Connection id "0HNG1J2VKCI8C", Request id "0HNG1J2VKCI8C:00000004": started reading request body.
2025-10-02 16:47:55.967 +07:00 [DBG] Connection id "0HNG1J2VKCI8C", Request id "0HNG1J2VKCI8C:00000004": done reading request body.
2025-10-02 16:47:55.979 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 16:47:55.980 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:47:55.980 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:47:55.981 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:47:55.992 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:47:55.994 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:47:55.995 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 16:47:55.997 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:47:55.997 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:47:55.998 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:47:55.998 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:47:56.002 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 16:47:56.006 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 16:47:56.090 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:47:56.098 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 16:47:56.114 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 16:47:56.191 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:47:56.198 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:47:56.199 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 16:47:56.199 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:56.200 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:56.200 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:47:56.200 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:56.201 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:56.202 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:47:56.228 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:47:56.233 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:47:56.234 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 5ms reading results.
2025-10-02 16:47:56.234 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:56.234 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:47:56.246 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 16:47:56.260 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 16:47:56.261 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 16:47:56.262 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 16:47:56.263 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 16:47:56.373 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 16:47:56.410 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 16:47:56.426 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:56.426 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:56.427 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:47:56.427 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:56.428 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:47:56.428 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:47:56.651 +07:00 [INF] Executed DbCommand (223ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:47:56.679 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:47:56.679 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 26ms reading results.
2025-10-02 16:47:56.680 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:47:56.681 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:50:00.796 +07:00 [DBG] Connection id "0HNG1J2VKCI8D" disconnecting.
2025-10-02 16:50:00.797 +07:00 [DBG] Connection id "0HNG1J2VKCI8D" stopped.
2025-10-02 16:50:00.799 +07:00 [DBG] Connection id "0HNG1J2VKCI8D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:50:13.170 +07:00 [DBG] Connection id "0HNG1J2VKCI8E" accepted.
2025-10-02 16:50:13.171 +07:00 [DBG] Connection id "0HNG1J2VKCI8E" started.
2025-10-02 16:50:13.172 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 16:50:13.172 +07:00 [DBG] POST requests are not supported
2025-10-02 16:50:13.173 +07:00 [DBG] POST requests are not supported
2025-10-02 16:50:13.174 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 16:50:13.174 +07:00 [INF] CORS policy execution successful.
2025-10-02 16:50:13.182 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:50:13.183 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:50:13.183 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:50:13.200 +07:00 [DBG] Successfully validated the token.
2025-10-02 16:50:13.201 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 16:50:13.211 +07:00 [DBG] Authorization was successful.
2025-10-02 16:50:13.212 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:50:13.213 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 16:50:13.213 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 16:50:13.214 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 16:50:13.214 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 16:50:13.214 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 16:50:13.214 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 16:50:13.215 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:50:13.218 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:50:13.225 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:50:13.226 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 16:50:13.227 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:50:13.227 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:50:13.227 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:50:13.228 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 16:50:13.230 +07:00 [DBG] Connection id "0HNG1J2VKCI8E", Request id "0HNG1J2VKCI8E:00000001": started reading request body.
2025-10-02 16:50:13.230 +07:00 [DBG] Connection id "0HNG1J2VKCI8E", Request id "0HNG1J2VKCI8E:00000001": done reading request body.
2025-10-02 16:50:13.231 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 16:50:13.232 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:50:13.232 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:50:13.232 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:50:13.234 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:50:13.234 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:50:13.237 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 16:50:13.239 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:50:13.240 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:50:13.241 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:50:13.241 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:50:13.241 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 16:50:13.243 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 16:50:13.272 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:50:13.277 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:50:13.278 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 16:50:13.278 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:50:13.278 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:50:13.279 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:50:13.279 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:50:13.279 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:50:13.280 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:50:13.295 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:50:13.296 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:50:13.297 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 16:50:13.297 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:50:13.297 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:50:13.299 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:50:13.299 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:50:13.299 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:50:13.299 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:50:13.300 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:50:13.300 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:50:13.395 +07:00 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:50:13.404 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:50:13.406 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 9ms reading results.
2025-10-02 16:50:13.406 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:50:13.408 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-10-02 16:52:31.532 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 16:52:31.534 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 16:52:31.537 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 16:52:31.541 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 16:52:31.541 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 16:52:31.640 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 275841.9947ms
2025-10-02 16:52:31.640 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:52:31.643 +07:00 [DBG] Connection id "0HNG1J2VKCI8C" completed keep alive response.
2025-10-02 16:52:31.644 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:52:31.644 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:52:31.644 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 16:52:31.646 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 276080.7731ms
2025-10-02 16:53:10.977 +07:00 [INF] Application is shutting down...
2025-10-02 16:53:10.980 +07:00 [DBG] Hosting stopping
2025-10-02 16:53:10.990 +07:00 [DBG] Connection id "0HNG1J2VKCI8C" disconnecting.
2025-10-02 16:53:10.991 +07:00 [DBG] Connection id "0HNG1J2VKCI8C" stopped.
2025-10-02 16:53:10.991 +07:00 [DBG] Connection id "0HNG1J2VKCI8C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:53:40.995 +07:00 [DBG] Some connections failed to close gracefully during server shutdown.
2025-10-02 16:53:40.996 +07:00 [DBG] Connection id "0HNG1J2VKCI8E" sending RST because: "The connection was aborted because the server is shutting down and request processing didn't complete within the time specified by HostOptions.ShutdownTimeout."
2025-10-02 16:53:40.997 +07:00 [DBG] Connection id "0HNG1J2VKCI8E" disconnecting.
2025-10-02 16:53:41.995 +07:00 [DBG] Some connections failed to abort during server shutdown.
2025-10-02 16:53:41.999 +07:00 [DBG] Hosting stopped
2025-10-02 16:53:41.999 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 16:55:22.997 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 16:55:23.128 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 16:55:23.450 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.493 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.526 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.530 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.530 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.533 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.880 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.881 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.932 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.933 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.934 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.936 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.944 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:23.944 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 16:55:24.035 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 16:55:24.036 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 16:55:24.036 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 16:55:24.036 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 16:55:24.036 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 16:55:24.036 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 16:55:24.036 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 16:55:24.037 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 16:55:24.037 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 16:55:24.037 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 16:55:24.037 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 16:55:24.037 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 16:55:24.037 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 16:55:24.037 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 16:55:24.037 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 16:55:24.037 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 16:55:24.037 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 16:55:24.038 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 16:55:24.038 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 16:55:24.225 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:55:24.225 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:55:24.225 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:55:24.225 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:55:24.225 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:55:24.226 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:55:24.226 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:55:24.226 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:55:24.226 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:55:24.227 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:55:24.227 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 16:55:24.450 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:55:24.537 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 16:55:24.728 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:55:24.783 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:55:24.807 +07:00 [DBG] Created DbConnection. (19ms).
2025-10-02 16:55:24.815 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:24.989 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:24.993 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:55:24.998 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 16:55:25.007 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-10-02 16:55:25.017 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:55:25.080 +07:00 [INF] Executed DbCommand (65ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:55:25.139 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:55:25.165 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.176 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 88ms reading results.
2025-10-02 16:55:25.180 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.188 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (8ms).
2025-10-02 16:55:25.193 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.194 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.194 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:55:25.194 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.194 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.195 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:55:25.199 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:55:25.200 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:55:25.201 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.202 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 16:55:25.203 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.203 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:55:25.204 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.204 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.204 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:55:25.204 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.205 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.205 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:55:25.206 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:55:25.206 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:55:25.206 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.207 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:55:25.207 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.207 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:55:25.208 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.208 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.208 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:55:25.208 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.208 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.208 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:55:25.209 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 16:55:25.210 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:55:25.210 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.210 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:55:25.210 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.210 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:55:25.225 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 16:55:25.238 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:55:25.240 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.240 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.240 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:55:25.240 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.240 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.240 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:55:25.247 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:55:25.290 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:55:25.336 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.337 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 89ms reading results.
2025-10-02 16:55:25.337 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.337 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:55:25.340 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 16:55:25.348 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.349 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.349 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:55:25.349 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.349 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.349 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:55:25.350 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:55:25.351 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:55:25.351 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.351 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:55:25.352 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.352 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:55:25.352 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 16:55:25.352 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.353 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.353 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:55:25.353 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.353 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.353 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:55:25.355 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:55:25.355 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:55:25.356 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.357 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 16:55:25.357 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.358 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:55:25.358 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.358 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.359 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:55:25.359 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.359 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:25.359 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:55:25.360 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 16:55:25.361 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 16:55:25.361 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.361 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 16:55:25.361 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.361 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:55:25.362 +07:00 [INF] Data seeding completed successfully
2025-10-02 16:55:25.364 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 16:55:25.367 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:25.369 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 16:55:25.392 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 16:55:25.633 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 16:55:25.823 +07:00 [DBG] Hosting starting
2025-10-02 16:55:25.840 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 16:55:25.847 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 16:55:25.849 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 16:55:25.855 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 16:55:25.859 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 16:55:25.859 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 16:55:25.868 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 16:55:25.872 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:55:25.872 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 16:55:25.874 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 16:55:25.875 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 16:55:25.878 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 16:55:25.885 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 16:55:25.886 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 16:55:25.953 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 16:55:25.953 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 16:55:25.953 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 16:55:25.953 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 16:55:25.953 +07:00 [INF] Hosting environment: Development
2025-10-02 16:55:25.953 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 16:55:25.955 +07:00 [DBG] Hosting started
2025-10-02 16:55:26.142 +07:00 [DBG] Connection id "0HNG1J77T2NJB" accepted.
2025-10-02 16:55:26.144 +07:00 [DBG] Connection id "0HNG1J77T2NJB" started.
2025-10-02 16:55:26.197 +07:00 [DBG] Connection id "0HNG1J77T2NJC" accepted.
2025-10-02 16:55:26.197 +07:00 [DBG] Connection id "0HNG1J77T2NJC" started.
2025-10-02 16:55:26.697 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 16:55:26.719 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 16:55:27.043 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 16:55:27.103 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 16:55:27.105 +07:00 [DBG] Connection id "0HNG1J77T2NJB" completed keep alive response.
2025-10-02 16:55:27.118 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 424.1255ms
2025-10-02 16:55:27.171 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 16:55:27.196 +07:00 [DBG] Connection id "0HNG1J77T2NJB" completed keep alive response.
2025-10-02 16:55:27.220 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 42.9794ms
2025-10-02 16:55:27.400 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 16:55:27.874 +07:00 [DBG] Connection id "0HNG1J77T2NJB" completed keep alive response.
2025-10-02 16:55:27.875 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 474.1407ms
2025-10-02 16:55:31.244 +07:00 [DBG] Connection id "0HNG1J77T2NJB" received FIN.
2025-10-02 16:55:31.244 +07:00 [DBG] Connection id "0HNG1J77T2NJC" received FIN.
2025-10-02 16:55:31.248 +07:00 [DBG] Connection id "0HNG1J77T2NJB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:55:31.248 +07:00 [DBG] Connection id "0HNG1J77T2NJC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 16:55:31.249 +07:00 [DBG] Connection id "0HNG1J77T2NJB" disconnecting.
2025-10-02 16:55:31.249 +07:00 [DBG] Connection id "0HNG1J77T2NJC" disconnecting.
2025-10-02 16:55:31.251 +07:00 [DBG] Connection id "0HNG1J77T2NJB" stopped.
2025-10-02 16:55:31.251 +07:00 [DBG] Connection id "0HNG1J77T2NJC" stopped.
2025-10-02 16:55:34.364 +07:00 [DBG] Connection id "0HNG1J77T2NJD" accepted.
2025-10-02 16:55:34.364 +07:00 [DBG] Connection id "0HNG1J77T2NJD" started.
2025-10-02 16:55:34.366 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 16:55:34.369 +07:00 [DBG] POST requests are not supported
2025-10-02 16:55:34.371 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 16:55:34.371 +07:00 [DBG] POST requests are not supported
2025-10-02 16:55:34.373 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 16:55:34.374 +07:00 [INF] CORS policy execution successful.
2025-10-02 16:55:34.436 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:55:34.437 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 16:55:34.437 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:55:34.551 +07:00 [DBG] Successfully validated the token.
2025-10-02 16:55:34.553 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 16:55:34.560 +07:00 [DBG] Authorization was successful.
2025-10-02 16:55:34.569 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 16:55:34.602 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 16:55:34.605 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 16:55:34.606 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 16:55:34.609 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 16:55:34.609 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 16:55:34.610 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 16:55:34.613 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:55:34.783 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 16:55:34.791 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:55:34.794 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 16:55:34.798 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:55:34.798 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:55:34.798 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 16:55:34.798 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 16:55:34.811 +07:00 [DBG] Connection id "0HNG1J77T2NJD", Request id "0HNG1J77T2NJD:00000001": started reading request body.
2025-10-02 16:55:34.813 +07:00 [DBG] Connection id "0HNG1J77T2NJD", Request id "0HNG1J77T2NJD:00000001": done reading request body.
2025-10-02 16:55:34.820 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 16:55:34.820 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:55:34.820 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:55:34.821 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 16:55:34.833 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 16:55:34.835 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:55:34.836 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 16:55:34.837 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:55:34.837 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:55:34.837 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 16:55:34.837 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 16:55:34.842 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 16:55:34.845 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 16:55:34.917 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 16:55:34.933 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 16:55:34.951 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 16:55:35.054 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 16:55:35.061 +07:00 [DBG] Creating DbConnection.
2025-10-02 16:55:35.063 +07:00 [DBG] Created DbConnection. (2ms).
2025-10-02 16:55:35.064 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:35.064 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:35.064 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:55:35.064 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:35.065 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:35.066 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:55:35.148 +07:00 [INF] Executed DbCommand (83ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 16:55:35.152 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:55:35.152 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 16:55:35.153 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:35.153 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:55:35.169 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 16:55:35.186 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 16:55:35.186 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 16:55:35.187 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 16:55:35.188 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 16:55:35.302 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 16:55:35.323 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 16:55:35.349 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:35.350 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:35.351 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 16:55:35.352 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 16:55:35.353 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 16:55:35.353 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:55:35.485 +07:00 [INF] Executed DbCommand (132ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 16:55:35.500 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 16:55:35.500 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 15ms reading results.
2025-10-02 16:55:35.500 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 16:55:35.501 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 16:56:31.002 +07:00 [INF] Application is shutting down...
2025-10-02 16:56:31.003 +07:00 [DBG] Hosting stopping
2025-10-02 16:57:01.002 +07:00 [DBG] Some connections failed to close gracefully during server shutdown.
2025-10-02 16:57:01.002 +07:00 [DBG] Connection id "0HNG1J77T2NJD" sending RST because: "The connection was aborted because the server is shutting down and request processing didn't complete within the time specified by HostOptions.ShutdownTimeout."
2025-10-02 16:57:01.003 +07:00 [DBG] Connection id "0HNG1J77T2NJD" disconnecting.
2025-10-02 16:57:02.004 +07:00 [DBG] Some connections failed to abort during server shutdown.
2025-10-02 16:57:02.007 +07:00 [DBG] Hosting stopped
2025-10-02 17:00:53.442 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 17:00:53.588 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 17:00:53.900 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:53.926 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:53.954 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:53.956 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:53.956 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:53.957 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:54.230 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:54.232 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:54.256 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:54.257 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:54.257 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:54.258 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:54.266 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:54.267 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:00:54.342 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 17:00:54.343 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 17:00:54.343 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 17:00:54.343 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 17:00:54.343 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 17:00:54.344 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 17:00:54.344 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 17:00:54.344 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 17:00:54.344 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 17:00:54.344 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 17:00:54.344 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 17:00:54.344 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 17:00:54.345 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 17:00:54.346 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 17:00:54.347 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 17:00:54.347 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 17:00:54.347 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 17:00:54.347 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 17:00:54.348 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 17:00:54.556 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:00:54.557 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:00:54.557 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:00:54.557 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:00:54.558 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:00:54.558 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:00:54.558 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:00:54.559 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:00:54.559 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:00:54.559 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:00:54.559 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:00:54.766 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:00:54.842 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 17:00:55.008 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:00:55.052 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:00:55.074 +07:00 [DBG] Created DbConnection. (18ms).
2025-10-02 17:00:55.079 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.289 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.293 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:00:55.303 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-10-02 17:00:55.312 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2025-10-02 17:00:55.326 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:00:55.405 +07:00 [INF] Executed DbCommand (81ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:00:55.458 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:00:55.508 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.526 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 111ms reading results.
2025-10-02 17:00:55.531 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.540 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (7ms).
2025-10-02 17:00:55.546 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.548 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.548 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:00:55.548 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.549 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.549 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:00:55.577 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:00:55.580 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:00:55.581 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.581 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 17:00:55.581 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.581 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:00:55.582 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.583 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.584 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:00:55.586 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-02 17:00:55.586 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-02 17:00:55.587 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:00:55.589 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:00:55.589 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:00:55.590 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.590 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:00:55.590 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.591 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:00:55.592 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.592 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.593 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:00:55.593 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.593 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.593 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:00:55.596 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:00:55.597 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:00:55.598 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.598 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 17:00:55.599 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.599 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:00:55.614 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 17:00:55.626 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:00:55.629 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.629 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.629 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:00:55.629 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.629 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.629 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:00:55.648 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:00:55.686 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:00:55.718 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.718 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 70ms reading results.
2025-10-02 17:00:55.719 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.719 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:00:55.721 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 17:00:55.724 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.724 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.724 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:00:55.724 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.724 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.724 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:00:55.725 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:00:55.726 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:00:55.726 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.726 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:00:55.727 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.727 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:00:55.727 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 17:00:55.729 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.729 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.729 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:00:55.729 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.730 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.730 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:00:55.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:00:55.731 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:00:55.731 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.731 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:00:55.731 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.731 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:00:55.732 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.732 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.732 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:00:55.732 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.732 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:00:55.732 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:00:55.734 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:00:55.735 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:00:55.736 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.736 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 17:00:55.736 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.737 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:00:55.737 +07:00 [INF] Data seeding completed successfully
2025-10-02 17:00:55.739 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:00:55.743 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:00:55.746 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-02 17:00:55.779 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 17:00:56.094 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 17:00:56.369 +07:00 [DBG] Hosting starting
2025-10-02 17:00:56.390 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 17:00:56.397 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 17:00:56.398 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 17:00:56.407 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 17:00:56.414 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 17:00:56.415 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 17:00:56.427 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 17:00:56.436 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 17:00:56.437 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 17:00:56.440 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 17:00:56.441 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 17:00:56.448 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 17:00:56.453 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 17:00:56.454 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 17:00:56.539 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 17:00:56.539 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 17:00:56.539 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 17:00:56.540 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 17:00:56.540 +07:00 [INF] Hosting environment: Development
2025-10-02 17:00:56.540 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 17:00:56.546 +07:00 [DBG] Hosting started
2025-10-02 17:00:56.815 +07:00 [DBG] Connection id "0HNG1JAAEK2HH" accepted.
2025-10-02 17:00:56.817 +07:00 [DBG] Connection id "0HNG1JAAEK2HH" started.
2025-10-02 17:00:57.216 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 17:00:57.289 +07:00 [DBG] Connection id "0HNG1JAAEK2HI" received FIN.
2025-10-02 17:00:57.335 +07:00 [DBG] Connection id "0HNG1JAAEK2HI" accepted.
2025-10-02 17:00:57.372 +07:00 [DBG] Connection id "0HNG1JAAEK2HI" started.
2025-10-02 17:00:57.374 +07:00 [DBG] Connection id "0HNG1JAAEK2HI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:00:57.376 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 17:00:57.385 +07:00 [DBG] Connection id "0HNG1JAAEK2HI" disconnecting.
2025-10-02 17:00:57.391 +07:00 [DBG] Connection id "0HNG1JAAEK2HI" stopped.
2025-10-02 17:00:57.919 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 17:00:57.936 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 17:00:57.937 +07:00 [DBG] Connection id "0HNG1JAAEK2HH" completed keep alive response.
2025-10-02 17:00:57.964 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 747.1359ms
2025-10-02 17:00:58.003 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 17:00:58.014 +07:00 [DBG] Connection id "0HNG1JAAEK2HH" completed keep alive response.
2025-10-02 17:00:58.014 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 11.7349ms
2025-10-02 17:00:58.168 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 17:00:58.709 +07:00 [DBG] Connection id "0HNG1JAAEK2HH" completed keep alive response.
2025-10-02 17:00:58.710 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 541.7535ms
2025-10-02 17:01:34.410 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 17:01:34.518 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 17:01:34.759 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:34.858 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:34.895 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:34.901 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:34.902 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:34.907 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:35.203 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:35.204 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:35.228 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:35.229 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:35.229 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:35.231 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:35.239 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:35.239 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:01:35.307 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 17:01:35.308 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 17:01:35.308 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 17:01:35.308 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 17:01:35.308 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 17:01:35.309 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 17:01:35.309 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 17:01:35.309 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 17:01:35.309 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 17:01:35.310 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 17:01:35.310 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 17:01:35.310 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 17:01:35.310 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 17:01:35.310 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 17:01:35.311 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 17:01:35.311 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 17:01:35.311 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 17:01:35.311 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 17:01:35.311 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 17:01:35.486 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:01:35.487 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:01:35.487 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:01:35.487 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:01:35.487 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:01:35.487 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:01:35.487 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:01:35.488 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:01:35.488 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:01:35.488 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:01:35.488 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:01:35.674 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:01:35.756 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 17:01:35.927 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:01:35.964 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:01:35.982 +07:00 [DBG] Created DbConnection. (16ms).
2025-10-02 17:01:35.987 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.137 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.140 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:01:36.146 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 17:01:36.156 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-10-02 17:01:36.163 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:01:36.234 +07:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:01:36.281 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:01:36.306 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.313 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 75ms reading results.
2025-10-02 17:01:36.315 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.321 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (5ms).
2025-10-02 17:01:36.326 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.328 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.328 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:01:36.329 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.330 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 17:01:36.330 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:01:36.333 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:01:36.334 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:01:36.335 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.335 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 17:01:36.335 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.336 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:01:36.337 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.338 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.338 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:01:36.338 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.338 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.338 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:01:36.339 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:01:36.340 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:01:36.340 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.340 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:01:36.340 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.340 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:01:36.341 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.341 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.341 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:01:36.341 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.341 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.341 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:01:36.342 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:01:36.343 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:01:36.343 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.343 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:01:36.343 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.343 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:01:36.352 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 17:01:36.362 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:01:36.364 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.364 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.364 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:01:36.365 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.365 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.365 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:01:36.374 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:01:36.408 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:01:36.458 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.458 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 83ms reading results.
2025-10-02 17:01:36.458 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.458 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:01:36.461 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 17:01:36.464 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.464 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.464 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:01:36.464 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.464 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.464 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:01:36.466 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:01:36.466 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:01:36.466 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.466 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:01:36.467 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.467 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:01:36.467 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 17:01:36.468 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.468 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.468 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:01:36.468 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.468 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.469 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:01:36.471 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:01:36.471 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:01:36.472 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.472 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:01:36.472 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.472 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:01:36.473 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.473 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.473 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:01:36.473 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.473 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:36.473 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:01:36.474 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:01:36.475 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:01:36.475 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.475 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:01:36.475 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.475 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:01:36.475 +07:00 [INF] Data seeding completed successfully
2025-10-02 17:01:36.478 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:01:36.481 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:36.483 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 17:01:36.508 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 17:01:36.684 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 17:01:36.824 +07:00 [DBG] Hosting starting
2025-10-02 17:01:36.833 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 17:01:36.836 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 17:01:36.836 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 17:01:36.842 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 17:01:36.846 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 17:01:36.846 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 17:01:36.851 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 17:01:36.858 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 17:01:36.859 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 17:01:36.861 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 17:01:36.862 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 17:01:36.865 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 17:01:36.867 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 17:01:36.868 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 17:01:36.926 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 17:01:36.926 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 17:01:36.926 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 17:01:36.926 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 17:01:36.927 +07:00 [INF] Hosting environment: Development
2025-10-02 17:01:36.927 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 17:01:36.928 +07:00 [DBG] Hosting started
2025-10-02 17:01:37.057 +07:00 [DBG] Connection id "0HNG1JAMED4B2" accepted.
2025-10-02 17:01:37.060 +07:00 [DBG] Connection id "0HNG1JAMED4B2" started.
2025-10-02 17:01:37.160 +07:00 [DBG] Connection id "0HNG1JAMED4B3" accepted.
2025-10-02 17:01:37.160 +07:00 [DBG] Connection id "0HNG1JAMED4B3" started.
2025-10-02 17:01:37.177 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 17:01:37.193 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 17:01:37.545 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 17:01:37.582 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 17:01:37.583 +07:00 [DBG] Connection id "0HNG1JAMED4B2" completed keep alive response.
2025-10-02 17:01:37.602 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 428.3632ms
2025-10-02 17:01:37.626 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 17:01:37.632 +07:00 [DBG] Connection id "0HNG1JAMED4B2" completed keep alive response.
2025-10-02 17:01:37.634 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 7.4786ms
2025-10-02 17:01:37.789 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 17:01:38.148 +07:00 [DBG] Connection id "0HNG1JAMED4B2" completed keep alive response.
2025-10-02 17:01:38.148 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 359.7087ms
2025-10-02 17:01:52.010 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 17:01:52.013 +07:00 [DBG] POST requests are not supported
2025-10-02 17:01:52.015 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 17:01:52.015 +07:00 [DBG] POST requests are not supported
2025-10-02 17:01:52.017 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 17:01:52.018 +07:00 [INF] CORS policy execution successful.
2025-10-02 17:01:52.082 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:01:52.083 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:01:52.084 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:01:52.185 +07:00 [DBG] Successfully validated the token.
2025-10-02 17:01:52.186 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 17:01:52.195 +07:00 [DBG] Authorization was successful.
2025-10-02 17:01:52.204 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:01:52.230 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 17:01:52.232 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 17:01:52.233 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 17:01:52.234 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 17:01:52.235 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 17:01:52.235 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 17:01:52.237 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:01:52.493 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:01:52.499 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:01:52.503 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 17:01:52.506 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:01:52.507 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:01:52.508 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:01:52.509 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 17:01:52.522 +07:00 [DBG] Connection id "0HNG1JAMED4B2", Request id "0HNG1JAMED4B2:00000004": started reading request body.
2025-10-02 17:01:52.523 +07:00 [DBG] Connection id "0HNG1JAMED4B2", Request id "0HNG1JAMED4B2:00000004": done reading request body.
2025-10-02 17:01:52.534 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 17:01:52.535 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:01:52.535 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:01:52.535 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:01:52.545 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:01:52.547 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:01:52.549 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 17:01:52.550 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:01:52.550 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:01:52.551 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:01:52.551 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:01:52.556 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 17:01:52.559 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 17:01:52.646 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:01:52.656 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 17:01:52.672 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 17:01:52.740 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:01:52.752 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:01:52.753 +07:00 [DBG] Created DbConnection. (1ms).
2025-10-02 17:01:52.754 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:52.754 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:52.754 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:01:52.755 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:52.755 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:52.756 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:01:52.787 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:01:52.794 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:01:52.795 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 7ms reading results.
2025-10-02 17:01:52.796 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:52.796 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:01:52.805 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 17:01:52.819 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 17:01:52.819 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 17:01:52.820 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 17:01:52.821 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 17:01:52.904 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 17:01:52.914 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 17:01:52.922 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:52.922 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:52.923 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:01:52.923 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:52.923 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:01:52.924 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:01:53.006 +07:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:01:53.022 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:01:53.022 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 16ms reading results.
2025-10-02 17:01:53.023 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:01:53.023 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:02:19.394 +07:00 [INF] Application is shutting down...
2025-10-02 17:02:19.395 +07:00 [DBG] Hosting stopping
2025-10-02 17:02:19.400 +07:00 [DBG] Connection id "0HNG1JAMED4B3" disconnecting.
2025-10-02 17:02:19.402 +07:00 [DBG] Connection id "0HNG1JAMED4B3" stopped.
2025-10-02 17:02:19.403 +07:00 [DBG] Connection id "0HNG1JAMED4B3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:02:49.391 +07:00 [DBG] Some connections failed to close gracefully during server shutdown.
2025-10-02 17:02:49.392 +07:00 [DBG] Connection id "0HNG1JAMED4B2" sending RST because: "The connection was aborted because the server is shutting down and request processing didn't complete within the time specified by HostOptions.ShutdownTimeout."
2025-10-02 17:02:49.393 +07:00 [DBG] Connection id "0HNG1JAMED4B2" disconnecting.
2025-10-02 17:02:50.401 +07:00 [DBG] Some connections failed to abort during server shutdown.
2025-10-02 17:02:50.404 +07:00 [DBG] Hosting stopped
2025-10-02 17:11:11.158 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 17:11:11.259 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 17:11:11.503 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.531 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.547 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.550 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.551 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.553 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.812 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.814 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.835 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.836 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.836 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.837 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.843 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.843 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:11:11.904 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 17:11:11.904 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 17:11:11.905 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 17:11:11.905 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 17:11:11.905 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 17:11:11.905 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 17:11:11.905 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 17:11:11.905 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 17:11:11.905 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 17:11:11.906 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 17:11:11.906 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 17:11:11.906 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 17:11:11.906 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 17:11:11.906 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 17:11:11.906 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 17:11:11.907 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 17:11:11.907 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 17:11:11.907 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 17:11:11.907 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 17:11:12.078 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:11:12.079 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:11:12.079 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:11:12.079 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:11:12.080 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:11:12.080 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:11:12.080 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:11:12.080 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:11:12.081 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:11:12.081 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:11:12.081 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:11:12.261 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:11:12.332 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 17:11:12.504 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:11:12.543 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:11:12.565 +07:00 [DBG] Created DbConnection. (17ms).
2025-10-02 17:11:12.572 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.721 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.724 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:11:12.730 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 17:11:12.739 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-10-02 17:11:12.745 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:11:12.805 +07:00 [INF] Executed DbCommand (57ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:11:12.847 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:11:12.869 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.876 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 66ms reading results.
2025-10-02 17:11:12.878 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.882 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-10-02 17:11:12.888 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.889 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.889 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:11:12.889 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:12.890 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:12.890 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:11:12.893 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:11:12.893 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:11:12.893 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.894 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:11:12.894 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.894 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:11:12.895 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.895 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.895 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:11:12.895 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:12.895 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:12.895 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:11:12.897 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:11:12.897 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:11:12.897 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.897 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:11:12.897 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.897 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:11:12.898 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.898 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.898 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:11:12.898 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:12.898 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:12.898 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:11:12.900 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:11:12.901 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:11:12.901 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.901 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 17:11:12.902 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.902 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:11:12.910 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 17:11:12.920 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:11:12.922 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.923 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:12.923 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:11:12.923 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:12.923 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:12.923 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:11:12.932 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:11:12.970 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:11:13.000 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.000 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 67ms reading results.
2025-10-02 17:11:13.000 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.001 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:11:13.006 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 17:11:13.008 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.009 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.009 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:11:13.009 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:13.009 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:13.009 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:11:13.010 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:11:13.010 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:11:13.011 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.011 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:11:13.011 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.011 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:11:13.011 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 17:11:13.012 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.012 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.012 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:11:13.012 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:13.012 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:13.012 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:11:13.014 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:11:13.014 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:11:13.014 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.014 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:11:13.014 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.015 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:11:13.015 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.015 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.015 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:11:13.016 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:13.016 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:13.016 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:11:13.017 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:11:13.019 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:11:13.022 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.022 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 17:11:13.022 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.022 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:11:13.023 +07:00 [INF] Data seeding completed successfully
2025-10-02 17:11:13.024 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:11:13.026 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:13.027 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 17:11:13.046 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 17:11:13.222 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 17:11:13.351 +07:00 [DBG] Hosting starting
2025-10-02 17:11:13.361 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 17:11:13.367 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 17:11:13.368 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 17:11:13.373 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 17:11:13.376 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 17:11:13.376 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 17:11:13.381 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 17:11:13.387 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 17:11:13.388 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 17:11:13.390 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 17:11:13.391 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 17:11:13.394 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 17:11:13.397 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 17:11:13.397 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 17:11:13.455 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 17:11:13.456 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 17:11:13.456 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 17:11:13.456 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 17:11:13.456 +07:00 [INF] Hosting environment: Development
2025-10-02 17:11:13.456 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 17:11:13.458 +07:00 [DBG] Hosting started
2025-10-02 17:11:13.644 +07:00 [DBG] Connection id "0HNG1JG295HGM" accepted.
2025-10-02 17:11:13.646 +07:00 [DBG] Connection id "0HNG1JG295HGM" started.
2025-10-02 17:11:13.841 +07:00 [DBG] Connection id "0HNG1JG295HGN" accepted.
2025-10-02 17:11:13.842 +07:00 [DBG] Connection id "0HNG1JG295HGN" started.
2025-10-02 17:11:14.060 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 17:11:14.078 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 17:11:14.338 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 17:11:14.367 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 17:11:14.367 +07:00 [DBG] Connection id "0HNG1JG295HGM" completed keep alive response.
2025-10-02 17:11:14.383 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 320.9306ms
2025-10-02 17:11:14.415 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 17:11:14.423 +07:00 [DBG] Connection id "0HNG1JG295HGM" completed keep alive response.
2025-10-02 17:11:14.428 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 17.8652ms
2025-10-02 17:11:14.559 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 17:11:14.933 +07:00 [DBG] Connection id "0HNG1JG295HGM" completed keep alive response.
2025-10-02 17:11:14.934 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 374.961ms
2025-10-02 17:11:27.692 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 17:11:27.694 +07:00 [DBG] POST requests are not supported
2025-10-02 17:11:27.696 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 17:11:27.696 +07:00 [DBG] POST requests are not supported
2025-10-02 17:11:27.698 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 17:11:27.698 +07:00 [INF] CORS policy execution successful.
2025-10-02 17:11:27.755 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:11:27.756 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:11:27.760 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:11:27.852 +07:00 [DBG] Successfully validated the token.
2025-10-02 17:11:27.854 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 17:11:27.864 +07:00 [DBG] Authorization was successful.
2025-10-02 17:11:27.871 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:11:27.889 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 17:11:27.894 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 17:11:27.895 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 17:11:27.897 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 17:11:27.897 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 17:11:27.897 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 17:11:27.899 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:11:28.113 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:11:28.131 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:11:28.134 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 17:11:28.135 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:11:28.136 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:11:28.136 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:11:28.136 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 17:11:28.148 +07:00 [DBG] Connection id "0HNG1JG295HGM", Request id "0HNG1JG295HGM:00000004": started reading request body.
2025-10-02 17:11:28.148 +07:00 [DBG] Connection id "0HNG1JG295HGM", Request id "0HNG1JG295HGM:00000004": done reading request body.
2025-10-02 17:11:28.154 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 17:11:28.155 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:11:28.155 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:11:28.155 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:11:28.165 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:11:28.166 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:11:28.167 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 17:11:28.167 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:11:28.168 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:11:28.168 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:11:28.168 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:11:28.170 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 17:11:28.172 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 17:11:28.235 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:11:28.249 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 17:11:28.264 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 17:11:28.319 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:11:28.327 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:11:28.327 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 17:11:28.328 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:28.328 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:28.328 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:11:28.328 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:28.329 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:28.330 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:11:28.353 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:11:28.358 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:11:28.359 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 17:11:28.359 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:28.360 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:11:28.366 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 17:11:28.374 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 17:11:28.374 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 17:11:28.376 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 17:11:28.377 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 17:11:28.444 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 17:11:28.453 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 17:11:28.463 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:28.464 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:28.464 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:11:28.464 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:28.464 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:11:28.465 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:11:28.529 +07:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:11:28.539 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:11:28.540 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 10ms reading results.
2025-10-02 17:11:28.540 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:11:28.540 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:13:06.199 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 17:13:06.201 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 17:13:06.201 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 17:13:06.203 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 17:13:06.204 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 17:13:06.278 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 98377.981ms
2025-10-02 17:13:06.278 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:13:06.282 +07:00 [DBG] Connection id "0HNG1JG295HGM" completed keep alive response.
2025-10-02 17:13:06.283 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:13:06.284 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:13:06.284 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 17:13:06.285 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 98593.3112ms
2025-10-02 17:13:25.251 +07:00 [DBG] Connection id "0HNG1JG295HGN" disconnecting.
2025-10-02 17:13:25.252 +07:00 [DBG] Connection id "0HNG1JG295HGN" stopped.
2025-10-02 17:13:25.253 +07:00 [DBG] Connection id "0HNG1JG295HGN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:15:17.167 +07:00 [DBG] Connection id "0HNG1JG295HGM" disconnecting.
2025-10-02 17:15:17.168 +07:00 [DBG] Connection id "0HNG1JG295HGM" stopped.
2025-10-02 17:15:17.168 +07:00 [DBG] Connection id "0HNG1JG295HGM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:27:20.154 +07:00 [INF] Application is shutting down...
2025-10-02 17:27:20.155 +07:00 [DBG] Hosting stopping
2025-10-02 17:27:20.162 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 17:27:20.196 +07:00 [DBG] Hosting stopped
2025-10-02 17:33:20.412 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 17:33:20.531 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 17:33:21.137 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.189 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.222 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.232 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.232 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.234 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.551 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.552 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.578 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.578 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.579 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.580 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.586 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.587 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:33:21.651 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 17:33:21.652 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 17:33:21.652 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 17:33:21.652 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 17:33:21.652 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 17:33:21.652 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 17:33:21.652 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 17:33:21.653 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 17:33:21.653 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 17:33:21.653 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 17:33:21.653 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 17:33:21.653 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 17:33:21.653 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 17:33:21.654 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 17:33:21.654 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 17:33:21.654 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 17:33:21.654 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 17:33:21.654 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 17:33:21.655 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 17:33:21.847 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:33:21.848 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:33:21.848 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:33:21.848 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:33:21.849 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:33:21.849 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:33:21.849 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:33:21.850 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:33:21.850 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:33:21.850 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:33:21.851 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:33:22.080 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:33:22.181 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 17:33:22.369 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:33:22.414 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:33:22.434 +07:00 [DBG] Created DbConnection. (17ms).
2025-10-02 17:33:22.438 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.599 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.602 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:33:22.609 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 17:33:22.615 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-10-02 17:33:22.623 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:33:22.692 +07:00 [INF] Executed DbCommand (68ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:33:22.735 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:33:22.762 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.767 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 70ms reading results.
2025-10-02 17:33:22.770 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.777 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (6ms).
2025-10-02 17:33:22.780 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.781 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.781 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:33:22.781 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.781 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.781 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:33:22.784 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:33:22.785 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:33:22.785 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.785 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:33:22.785 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.786 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:33:22.786 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.786 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.786 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:33:22.786 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.786 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.787 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:33:22.788 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:33:22.789 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:33:22.789 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.790 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 17:33:22.790 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.791 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:33:22.792 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.792 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.793 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:33:22.793 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.793 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.793 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:33:22.794 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:33:22.794 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:33:22.795 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.795 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:33:22.795 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.795 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:33:22.802 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 17:33:22.812 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:33:22.813 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.813 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.813 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:33:22.813 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.813 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.814 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:33:22.820 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:33:22.850 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:33:22.968 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.968 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 147ms reading results.
2025-10-02 17:33:22.968 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.968 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:33:22.978 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 17:33:22.985 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.986 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.986 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:33:22.986 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.986 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.987 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:33:22.989 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:33:22.990 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:33:22.990 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.990 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:33:22.990 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.991 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:33:22.991 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 17:33:22.992 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.992 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:22.992 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:33:22.993 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.993 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:22.993 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:33:23.010 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:33:23.010 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:33:23.011 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:33:23.011 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:33:23.011 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:23.011 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:33:23.012 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:23.012 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:23.012 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:33:23.013 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:23.013 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:23.014 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:33:23.016 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:33:23.016 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:33:23.017 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:33:23.017 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:33:23.017 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:23.017 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:33:23.017 +07:00 [INF] Data seeding completed successfully
2025-10-02 17:33:23.020 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:33:23.025 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:23.026 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 17:33:23.059 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 17:33:23.304 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 17:33:23.492 +07:00 [DBG] Hosting starting
2025-10-02 17:33:23.504 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 17:33:23.510 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 17:33:23.511 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 17:33:23.516 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 17:33:23.519 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 17:33:23.520 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 17:33:23.527 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 17:33:23.530 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 17:33:23.531 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 17:33:23.532 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 17:33:23.533 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 17:33:23.536 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 17:33:23.541 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 17:33:23.542 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 17:33:23.611 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 17:33:23.611 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 17:33:23.611 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 17:33:23.612 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 17:33:23.612 +07:00 [INF] Hosting environment: Development
2025-10-02 17:33:23.612 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 17:33:23.613 +07:00 [DBG] Hosting started
2025-10-02 17:33:23.789 +07:00 [DBG] Connection id "0HNG1JSEMDFMG" accepted.
2025-10-02 17:33:23.798 +07:00 [DBG] Connection id "0HNG1JSEMDFMG" started.
2025-10-02 17:33:23.862 +07:00 [DBG] Connection id "0HNG1JSEMDFMH" accepted.
2025-10-02 17:33:23.863 +07:00 [DBG] Connection id "0HNG1JSEMDFMH" started.
2025-10-02 17:33:23.917 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 17:33:23.942 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 17:33:24.267 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 17:33:24.396 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 17:33:24.396 +07:00 [DBG] Connection id "0HNG1JSEMDFMG" completed keep alive response.
2025-10-02 17:33:24.402 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 485.6742ms
2025-10-02 17:33:24.513 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 17:33:24.563 +07:00 [DBG] Connection id "0HNG1JSEMDFMG" completed keep alive response.
2025-10-02 17:33:24.565 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 51.3771ms
2025-10-02 17:33:24.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 17:33:24.817 +07:00 [DBG] Connection id "0HNG1JSEMDFMH" received FIN.
2025-10-02 17:33:24.828 +07:00 [DBG] Connection id "0HNG1JSEMDFMH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:33:24.831 +07:00 [DBG] Connection id "0HNG1JSEMDFMH" disconnecting.
2025-10-02 17:33:24.838 +07:00 [DBG] Connection id "0HNG1JSEMDFMH" stopped.
2025-10-02 17:33:25.462 +07:00 [DBG] Connection id "0HNG1JSEMDFMG" completed keep alive response.
2025-10-02 17:33:25.462 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 733.6208ms
2025-10-02 17:33:29.817 +07:00 [DBG] Connection id "0HNG1JSEMDFMG" received FIN.
2025-10-02 17:33:29.818 +07:00 [DBG] Connection id "0HNG1JSEMDFMG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:33:29.821 +07:00 [DBG] Connection id "0HNG1JSEMDFMG" disconnecting.
2025-10-02 17:33:29.834 +07:00 [DBG] Connection id "0HNG1JSEMDFMG" stopped.
2025-10-02 17:33:38.162 +07:00 [DBG] Connection id "0HNG1JSEMDFMI" accepted.
2025-10-02 17:33:38.163 +07:00 [DBG] Connection id "0HNG1JSEMDFMI" started.
2025-10-02 17:33:38.164 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 17:33:38.168 +07:00 [DBG] POST requests are not supported
2025-10-02 17:33:38.169 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 17:33:38.169 +07:00 [DBG] POST requests are not supported
2025-10-02 17:33:38.171 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 17:33:38.172 +07:00 [INF] CORS policy execution successful.
2025-10-02 17:33:38.243 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:33:38.244 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:33:38.246 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:33:38.391 +07:00 [DBG] Successfully validated the token.
2025-10-02 17:33:38.392 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 17:33:38.401 +07:00 [DBG] Authorization was successful.
2025-10-02 17:33:38.409 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:33:38.441 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 17:33:38.443 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 17:33:38.443 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 17:33:38.444 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 17:33:38.445 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 17:33:38.446 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 17:33:38.450 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:33:38.606 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:33:38.614 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:33:38.616 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 17:33:38.618 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:33:38.619 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:33:38.619 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:33:38.619 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 17:33:38.631 +07:00 [DBG] Connection id "0HNG1JSEMDFMI", Request id "0HNG1JSEMDFMI:00000001": started reading request body.
2025-10-02 17:33:38.632 +07:00 [DBG] Connection id "0HNG1JSEMDFMI", Request id "0HNG1JSEMDFMI:00000001": done reading request body.
2025-10-02 17:33:38.640 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 17:33:38.640 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:33:38.641 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:33:38.641 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:33:38.654 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:33:38.655 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:33:38.656 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 17:33:38.658 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:33:38.658 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:33:38.658 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:33:38.659 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:33:38.666 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 17:33:38.668 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 17:33:38.760 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:33:38.824 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 17:33:38.901 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 17:33:39.069 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:33:39.072 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:33:39.072 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 17:33:39.073 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:39.073 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:39.073 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:33:39.073 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:39.073 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:39.074 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:33:39.115 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:33:39.127 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:33:39.127 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 10ms reading results.
2025-10-02 17:33:39.128 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:39.129 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:33:39.177 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 17:33:39.214 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 17:33:39.215 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 17:33:39.216 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 17:33:39.217 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 17:33:39.350 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 17:33:39.359 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 17:33:39.376 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:39.376 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:39.376 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:33:39.377 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:39.377 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:33:39.378 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:33:39.484 +07:00 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:33:39.510 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:33:39.511 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 26ms reading results.
2025-10-02 17:33:39.511 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:33:39.512 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:34:49.129 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 17:34:49.131 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 17:34:49.132 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 17:34:49.138 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 17:34:49.139 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 17:34:49.258 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 70806.6846ms
2025-10-02 17:34:49.259 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:34:49.264 +07:00 [DBG] Connection id "0HNG1JSEMDFMI" completed keep alive response.
2025-10-02 17:34:49.265 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:34:49.265 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:34:49.265 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 17:34:49.267 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 71102.4634ms
2025-10-02 17:34:49.912 +07:00 [DBG] Connection id "0HNG1JSEMDFMI" received FIN.
2025-10-02 17:34:49.912 +07:00 [DBG] Connection id "0HNG1JSEMDFMI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:34:49.913 +07:00 [DBG] Connection id "0HNG1JSEMDFMI" disconnecting.
2025-10-02 17:34:49.913 +07:00 [DBG] Connection id "0HNG1JSEMDFMI" stopped.
2025-10-02 17:35:39.846 +07:00 [DBG] Connection id "0HNG1JSEMDFMJ" accepted.
2025-10-02 17:35:39.847 +07:00 [DBG] Connection id "0HNG1JSEMDFMJ" started.
2025-10-02 17:35:39.847 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 17:35:39.848 +07:00 [DBG] POST requests are not supported
2025-10-02 17:35:39.848 +07:00 [DBG] POST requests are not supported
2025-10-02 17:35:39.849 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 17:35:39.849 +07:00 [INF] CORS policy execution successful.
2025-10-02 17:35:39.857 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:35:39.858 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:35:39.859 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:35:39.862 +07:00 [DBG] Successfully validated the token.
2025-10-02 17:35:39.863 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 17:35:39.866 +07:00 [DBG] Authorization was successful.
2025-10-02 17:35:39.868 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:35:39.868 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 17:35:39.869 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 17:35:39.870 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 17:35:39.870 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 17:35:39.871 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 17:35:39.873 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 17:35:39.873 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:35:39.879 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:35:39.881 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:35:39.881 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 17:35:39.882 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:35:39.882 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:35:39.882 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:35:39.882 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 17:35:39.882 +07:00 [DBG] Connection id "0HNG1JSEMDFMJ", Request id "0HNG1JSEMDFMJ:00000001": started reading request body.
2025-10-02 17:35:39.883 +07:00 [DBG] Connection id "0HNG1JSEMDFMJ", Request id "0HNG1JSEMDFMJ:00000001": done reading request body.
2025-10-02 17:35:39.883 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 17:35:39.883 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:35:39.883 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:35:39.883 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:35:39.884 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:35:39.884 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:35:39.885 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 17:35:39.885 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:35:39.885 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:35:39.885 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:35:39.885 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:35:39.886 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 17:35:39.887 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 17:35:39.913 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:35:39.915 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:35:39.915 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 17:35:39.916 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:35:39.916 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:35:39.916 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:35:39.916 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:35:39.916 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:35:39.917 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:35:39.948 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:35:39.949 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:35:39.949 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 17:35:39.950 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:35:39.950 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:35:39.951 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:35:39.951 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:35:39.951 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:35:39.951 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:35:39.952 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:35:39.952 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:35:40.051 +07:00 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:35:40.057 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:35:40.057 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-10-02 17:35:40.057 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:35:40.057 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:35:48.725 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 17:35:48.726 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 17:35:48.726 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 17:35:48.728 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 17:35:48.728 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 17:35:48.730 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 8856.5072ms
2025-10-02 17:35:48.730 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:35:48.731 +07:00 [DBG] Connection id "0HNG1JSEMDFMJ" completed keep alive response.
2025-10-02 17:35:48.731 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:35:48.731 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:35:48.731 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 17:35:48.732 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 8884.2098ms
2025-10-02 17:35:49.998 +07:00 [DBG] Connection id "0HNG1JSEMDFMJ" received FIN.
2025-10-02 17:35:49.998 +07:00 [DBG] Connection id "0HNG1JSEMDFMJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:35:49.999 +07:00 [DBG] Connection id "0HNG1JSEMDFMJ" disconnecting.
2025-10-02 17:35:49.999 +07:00 [DBG] Connection id "0HNG1JSEMDFMJ" stopped.
2025-10-02 17:39:13.996 +07:00 [INF] Application is shutting down...
2025-10-02 17:39:13.998 +07:00 [DBG] Hosting stopping
2025-10-02 17:39:14.009 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 17:39:14.036 +07:00 [DBG] Hosting stopped
2025-10-02 17:43:15.272 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 17:43:15.400 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 17:43:15.701 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:15.732 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:15.755 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:15.758 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:15.758 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:15.762 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:16.136 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:16.138 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:16.167 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:16.167 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:16.167 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:16.169 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:16.175 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:16.176 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 17:43:16.309 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 17:43:16.310 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 17:43:16.311 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 17:43:16.311 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 17:43:16.311 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 17:43:16.312 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 17:43:16.312 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 17:43:16.312 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 17:43:16.312 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 17:43:16.313 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 17:43:16.313 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 17:43:16.313 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 17:43:16.313 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 17:43:16.313 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 17:43:16.313 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 17:43:16.314 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 17:43:16.314 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 17:43:16.314 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 17:43:16.314 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 17:43:16.514 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:43:16.515 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:43:16.515 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:43:16.515 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:43:16.516 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:43:16.516 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:43:16.516 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:43:16.516 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:43:16.516 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:43:16.517 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:43:16.517 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 17:43:16.713 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:43:16.808 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 17:43:17.117 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:43:17.166 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:43:17.190 +07:00 [DBG] Created DbConnection. (22ms).
2025-10-02 17:43:17.199 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.387 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.389 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:43:17.396 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 17:43:17.402 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-10-02 17:43:17.409 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:43:17.469 +07:00 [INF] Executed DbCommand (60ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:43:17.519 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:43:17.549 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.556 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 82ms reading results.
2025-10-02 17:43:17.561 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.567 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (7ms).
2025-10-02 17:43:17.572 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.573 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.573 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:43:17.573 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.573 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.573 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:43:17.591 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:43:17.593 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:43:17.594 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.595 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 17:43:17.595 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.596 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:43:17.596 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.597 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.597 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:43:17.597 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.597 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.597 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:43:17.598 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:43:17.599 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:43:17.599 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.599 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:43:17.600 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.600 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:43:17.601 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.601 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.601 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:43:17.601 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.601 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.602 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:43:17.603 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 17:43:17.603 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:43:17.603 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.603 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:43:17.604 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.604 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:43:17.615 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 17:43:17.626 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:43:17.630 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.630 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.630 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:43:17.630 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.630 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.631 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:43:17.645 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:43:17.684 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:43:17.718 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.718 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 72ms reading results.
2025-10-02 17:43:17.718 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.718 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:43:17.721 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 17:43:17.723 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.723 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.723 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:43:17.723 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.724 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.724 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:43:17.730 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:43:17.730 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:43:17.731 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.731 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:43:17.731 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.732 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:43:17.732 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 17:43:17.733 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.733 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.733 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:43:17.733 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.733 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.733 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:43:17.734 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:43:17.735 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:43:17.735 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.735 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:43:17.735 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.735 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:43:17.736 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.736 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.736 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:43:17.736 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.736 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:17.736 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:43:17.737 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 17:43:17.738 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 17:43:17.738 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.738 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:43:17.738 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.738 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:43:17.738 +07:00 [INF] Data seeding completed successfully
2025-10-02 17:43:17.740 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:43:17.743 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:17.744 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-02 17:43:17.765 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 17:43:18.011 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 17:43:18.189 +07:00 [DBG] Hosting starting
2025-10-02 17:43:18.201 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 17:43:18.206 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 17:43:18.208 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 17:43:18.214 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 17:43:18.217 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 17:43:18.217 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 17:43:18.222 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 17:43:18.228 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 17:43:18.228 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 17:43:18.231 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 17:43:18.232 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 17:43:18.235 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 17:43:18.237 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 17:43:18.238 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 17:43:18.297 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 17:43:18.297 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 17:43:18.297 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 17:43:18.298 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 17:43:18.298 +07:00 [INF] Hosting environment: Development
2025-10-02 17:43:18.298 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 17:43:18.300 +07:00 [DBG] Hosting started
2025-10-02 17:43:18.492 +07:00 [DBG] Connection id "0HNG1K1VTU15I" accepted.
2025-10-02 17:43:18.495 +07:00 [DBG] Connection id "0HNG1K1VTU15I" started.
2025-10-02 17:43:18.547 +07:00 [DBG] Connection id "0HNG1K1VTU15J" accepted.
2025-10-02 17:43:18.548 +07:00 [DBG] Connection id "0HNG1K1VTU15J" started.
2025-10-02 17:43:18.596 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 17:43:18.609 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 17:43:18.868 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 17:43:18.947 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 17:43:18.948 +07:00 [DBG] Connection id "0HNG1K1VTU15I" completed keep alive response.
2025-10-02 17:43:18.965 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 362.866ms
2025-10-02 17:43:19.063 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 17:43:19.087 +07:00 [DBG] Connection id "0HNG1K1VTU15I" completed keep alive response.
2025-10-02 17:43:19.089 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 31.5889ms
2025-10-02 17:43:19.441 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 17:43:20.000 +07:00 [DBG] Connection id "0HNG1K1VTU15I" completed keep alive response.
2025-10-02 17:43:20.001 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 560.0223ms
2025-10-02 17:43:25.701 +07:00 [DBG] Connection id "0HNG1K1VTU15I" received FIN.
2025-10-02 17:43:25.701 +07:00 [DBG] Connection id "0HNG1K1VTU15J" received FIN.
2025-10-02 17:43:25.704 +07:00 [DBG] Connection id "0HNG1K1VTU15J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:43:25.704 +07:00 [DBG] Connection id "0HNG1K1VTU15I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:43:25.705 +07:00 [DBG] Connection id "0HNG1K1VTU15J" disconnecting.
2025-10-02 17:43:25.705 +07:00 [DBG] Connection id "0HNG1K1VTU15I" disconnecting.
2025-10-02 17:43:25.708 +07:00 [DBG] Connection id "0HNG1K1VTU15J" stopped.
2025-10-02 17:43:25.708 +07:00 [DBG] Connection id "0HNG1K1VTU15I" stopped.
2025-10-02 17:43:32.678 +07:00 [DBG] Connection id "0HNG1K1VTU15K" accepted.
2025-10-02 17:43:32.678 +07:00 [DBG] Connection id "0HNG1K1VTU15K" started.
2025-10-02 17:43:32.680 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 17:43:32.684 +07:00 [DBG] POST requests are not supported
2025-10-02 17:43:32.685 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 17:43:32.686 +07:00 [DBG] POST requests are not supported
2025-10-02 17:43:32.713 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 17:43:32.714 +07:00 [INF] CORS policy execution successful.
2025-10-02 17:43:32.799 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:43:32.802 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:43:32.803 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:43:32.946 +07:00 [DBG] Successfully validated the token.
2025-10-02 17:43:32.947 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 17:43:32.956 +07:00 [DBG] Authorization was successful.
2025-10-02 17:43:32.963 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:43:32.993 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 17:43:32.994 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 17:43:32.995 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 17:43:32.995 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 17:43:32.996 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 17:43:32.996 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 17:43:32.997 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:43:33.161 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:43:33.190 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:43:33.198 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 17:43:33.205 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:43:33.207 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:43:33.210 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:43:33.213 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 17:43:33.251 +07:00 [DBG] Connection id "0HNG1K1VTU15K", Request id "0HNG1K1VTU15K:00000001": started reading request body.
2025-10-02 17:43:33.251 +07:00 [DBG] Connection id "0HNG1K1VTU15K", Request id "0HNG1K1VTU15K:00000001": done reading request body.
2025-10-02 17:43:33.263 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 17:43:33.264 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:43:33.264 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:43:33.266 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:43:33.283 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:43:33.287 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:43:33.289 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 17:43:33.292 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:43:33.293 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:43:33.293 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:43:33.293 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:43:33.329 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 17:43:33.344 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":5,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 17:43:33.540 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:43:33.560 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 17:43:33.596 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 17:43:33.709 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 17:43:33.712 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:43:33.713 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 17:43:33.713 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:33.714 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:33.714 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:43:33.714 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:33.714 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:33.717 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:43:33.760 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:43:33.765 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:43:33.766 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 5ms reading results.
2025-10-02 17:43:33.766 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:33.767 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:43:33.774 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 17:43:33.784 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 17:43:33.785 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 17:43:33.786 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 17:43:33.786 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 17:43:33.871 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 17:43:33.879 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 17:43:33.889 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:33.890 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:33.890 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:43:33.890 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:33.890 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:43:33.890 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:43:33.968 +07:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:43:33.988 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:43:33.989 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 20ms reading results.
2025-10-02 17:43:33.989 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:43:33.989 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:44:41.598 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 17:44:41.601 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 17:44:41.602 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 17:44:41.610 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 17:44:41.610 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 17:44:41.719 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 68719.7042ms
2025-10-02 17:44:41.720 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:44:41.725 +07:00 [DBG] Connection id "0HNG1K1VTU15K" completed keep alive response.
2025-10-02 17:44:41.726 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:44:41.727 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:44:41.727 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 17:44:41.729 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 69048.5555ms
2025-10-02 17:44:45.839 +07:00 [DBG] Connection id "0HNG1K1VTU15K" received FIN.
2025-10-02 17:44:45.839 +07:00 [DBG] Connection id "0HNG1K1VTU15K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:44:45.840 +07:00 [DBG] Connection id "0HNG1K1VTU15K" disconnecting.
2025-10-02 17:44:45.840 +07:00 [DBG] Connection id "0HNG1K1VTU15K" stopped.
2025-10-02 17:49:22.967 +07:00 [DBG] Connection id "0HNG1K1VTU15L" accepted.
2025-10-02 17:49:22.968 +07:00 [DBG] Connection id "0HNG1K1VTU15L" started.
2025-10-02 17:49:22.969 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 17:49:22.970 +07:00 [DBG] POST requests are not supported
2025-10-02 17:49:22.970 +07:00 [DBG] POST requests are not supported
2025-10-02 17:49:22.971 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 17:49:22.971 +07:00 [INF] CORS policy execution successful.
2025-10-02 17:49:22.972 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:49:22.972 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:49:22.972 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:49:22.976 +07:00 [DBG] Successfully validated the token.
2025-10-02 17:49:22.976 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 17:49:22.979 +07:00 [DBG] Authorization was successful.
2025-10-02 17:49:22.980 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:49:22.990 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 17:49:22.990 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 17:49:22.991 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 17:49:22.991 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 17:49:22.991 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 17:49:22.992 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 17:49:22.992 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:49:22.995 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:49:22.998 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:49:22.999 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 17:49:22.999 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:49:22.999 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:49:22.999 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:49:23.000 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 17:49:23.002 +07:00 [DBG] Connection id "0HNG1K1VTU15L", Request id "0HNG1K1VTU15L:00000001": started reading request body.
2025-10-02 17:49:23.002 +07:00 [DBG] Connection id "0HNG1K1VTU15L", Request id "0HNG1K1VTU15L:00000001": done reading request body.
2025-10-02 17:49:23.006 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 17:49:23.007 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:49:23.008 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:49:23.008 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:49:23.012 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:49:23.013 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:49:23.015 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 17:49:23.016 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:49:23.017 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:49:23.017 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:49:23.017 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:49:23.018 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 17:49:23.021 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":5,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 17:49:23.048 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:49:23.051 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:49:23.051 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 17:49:23.052 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:49:23.052 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:49:23.052 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:49:23.053 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:49:23.055 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-02 17:49:23.057 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:49:23.091 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:49:23.092 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:49:23.092 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:49:23.092 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:49:23.092 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:49:23.093 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:49:23.094 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:49:23.094 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:49:23.094 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:49:23.094 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:49:23.094 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:49:23.167 +07:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:49:23.174 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:49:23.174 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 7ms reading results.
2025-10-02 17:49:23.175 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:49:23.175 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:49:30.887 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 17:49:30.887 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 17:49:30.887 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 17:49:30.888 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 17:49:30.888 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 17:49:30.905 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7913.025ms
2025-10-02 17:49:30.905 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:49:30.906 +07:00 [DBG] Connection id "0HNG1K1VTU15L" completed keep alive response.
2025-10-02 17:49:30.906 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:49:30.906 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:49:30.906 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 17:49:30.907 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 7937.9659ms
2025-10-02 17:49:31.286 +07:00 [DBG] Connection id "0HNG1K1VTU15L" received FIN.
2025-10-02 17:49:31.286 +07:00 [DBG] Connection id "0HNG1K1VTU15L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:49:31.286 +07:00 [DBG] Connection id "0HNG1K1VTU15L" disconnecting.
2025-10-02 17:49:31.287 +07:00 [DBG] Connection id "0HNG1K1VTU15L" stopped.
2025-10-02 17:54:45.973 +07:00 [DBG] Connection id "0HNG1K1VTU15M" accepted.
2025-10-02 17:54:45.973 +07:00 [DBG] Connection id "0HNG1K1VTU15M" started.
2025-10-02 17:54:45.974 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 17:54:45.974 +07:00 [DBG] POST requests are not supported
2025-10-02 17:54:45.975 +07:00 [DBG] POST requests are not supported
2025-10-02 17:54:45.977 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 17:54:45.977 +07:00 [INF] CORS policy execution successful.
2025-10-02 17:54:45.977 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:54:45.977 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:54:45.978 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:54:45.981 +07:00 [DBG] Successfully validated the token.
2025-10-02 17:54:45.981 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 17:54:45.984 +07:00 [DBG] Authorization was successful.
2025-10-02 17:54:45.985 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:54:45.994 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 17:54:45.994 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 17:54:45.994 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 17:54:45.994 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 17:54:45.994 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 17:54:45.994 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 17:54:45.995 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:54:46.019 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:54:46.019 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:54:46.020 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 17:54:46.020 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:54:46.020 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:54:46.020 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:54:46.020 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 17:54:46.021 +07:00 [DBG] Connection id "0HNG1K1VTU15M", Request id "0HNG1K1VTU15M:00000001": started reading request body.
2025-10-02 17:54:46.021 +07:00 [DBG] Connection id "0HNG1K1VTU15M", Request id "0HNG1K1VTU15M:00000001": done reading request body.
2025-10-02 17:54:46.023 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 17:54:46.024 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:54:46.024 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:54:46.024 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:54:46.026 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:54:46.027 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:54:46.027 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 17:54:46.027 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:54:46.027 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:54:46.027 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:54:46.027 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:54:46.027 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 17:54:46.028 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":5,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 17:54:46.030 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:54:46.031 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:54:46.031 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 17:54:46.031 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:46.039 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:46.040 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:54:46.040 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:54:46.042 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-02 17:54:46.042 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:54:46.065 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:54:46.065 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:54:46.065 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:54:46.065 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:46.065 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:54:46.067 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:46.067 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:46.067 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:54:46.067 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:54:46.067 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:54:46.067 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:54:46.128 +07:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:54:46.130 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:54:46.130 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 17:54:46.130 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:46.130 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:54:48.850 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 17:54:48.850 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 17:54:48.850 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 17:54:48.850 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 17:54:48.851 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 17:54:48.867 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2872.2012ms
2025-10-02 17:54:48.867 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:54:48.867 +07:00 [DBG] Connection id "0HNG1K1VTU15M" completed keep alive response.
2025-10-02 17:54:48.867 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:54:48.868 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:48.868 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 17:54:48.868 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2894.4607ms
2025-10-02 17:54:51.751 +07:00 [DBG] Connection id "0HNG1K1VTU15M" received FIN.
2025-10-02 17:54:51.752 +07:00 [DBG] Connection id "0HNG1K1VTU15M" disconnecting.
2025-10-02 17:54:51.754 +07:00 [DBG] Connection id "0HNG1K1VTU15M" stopped.
2025-10-02 17:54:51.755 +07:00 [DBG] Connection id "0HNG1K1VTU15M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:54:53.264 +07:00 [DBG] Connection id "0HNG1K1VTU15N" accepted.
2025-10-02 17:54:53.264 +07:00 [DBG] Connection id "0HNG1K1VTU15N" started.
2025-10-02 17:54:53.264 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 17:54:53.264 +07:00 [DBG] POST requests are not supported
2025-10-02 17:54:53.265 +07:00 [DBG] POST requests are not supported
2025-10-02 17:54:53.265 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 17:54:53.265 +07:00 [INF] CORS policy execution successful.
2025-10-02 17:54:53.274 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:54:53.274 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:54:53.275 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:54:53.275 +07:00 [DBG] Successfully validated the token.
2025-10-02 17:54:53.276 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 17:54:53.276 +07:00 [DBG] Authorization was successful.
2025-10-02 17:54:53.276 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:54:53.277 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 17:54:53.277 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 17:54:53.277 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 17:54:53.277 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 17:54:53.277 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 17:54:53.277 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 17:54:53.278 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:54:53.278 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:54:53.278 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:54:53.279 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 17:54:53.279 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:54:53.279 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:54:53.279 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:54:53.279 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 17:54:53.279 +07:00 [DBG] Connection id "0HNG1K1VTU15N", Request id "0HNG1K1VTU15N:00000001": started reading request body.
2025-10-02 17:54:53.279 +07:00 [DBG] Connection id "0HNG1K1VTU15N", Request id "0HNG1K1VTU15N:00000001": done reading request body.
2025-10-02 17:54:53.279 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 17:54:53.279 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:54:53.279 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:54:53.280 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:54:53.280 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:54:53.280 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:54:53.280 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 17:54:53.280 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:54:53.280 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:54:53.280 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:54:53.281 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:54:53.281 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 17:54:53.282 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":5,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 17:54:53.286 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:54:53.288 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:54:53.288 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 17:54:53.288 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:53.288 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:53.289 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:54:53.289 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:54:53.289 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:54:53.289 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:54:53.325 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:54:53.325 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:54:53.325 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:54:53.325 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:53.325 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:54:53.326 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:53.326 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:53.326 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:54:53.326 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:54:53.326 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:54:53.326 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:54:53.404 +07:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:54:53.405 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:54:53.406 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 17:54:53.406 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:53.406 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:54:55.521 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 17:54:55.521 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 17:54:55.521 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 17:54:55.521 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 17:54:55.521 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 17:54:55.522 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2244.5496ms
2025-10-02 17:54:55.522 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:54:55.522 +07:00 [DBG] Connection id "0HNG1K1VTU15N" completed keep alive response.
2025-10-02 17:54:55.523 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:54:55.523 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:54:55.523 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 17:54:55.523 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2258.8584ms
2025-10-02 17:55:01.764 +07:00 [DBG] Connection id "0HNG1K1VTU15N" received FIN.
2025-10-02 17:55:01.765 +07:00 [DBG] Connection id "0HNG1K1VTU15N" disconnecting.
2025-10-02 17:55:01.766 +07:00 [DBG] Connection id "0HNG1K1VTU15N" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:55:01.768 +07:00 [DBG] Connection id "0HNG1K1VTU15N" stopped.
2025-10-02 17:55:29.301 +07:00 [DBG] Connection id "0HNG1K1VTU15O" accepted.
2025-10-02 17:55:29.301 +07:00 [DBG] Connection id "0HNG1K1VTU15O" started.
2025-10-02 17:55:29.302 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 17:55:29.302 +07:00 [DBG] POST requests are not supported
2025-10-02 17:55:29.302 +07:00 [DBG] POST requests are not supported
2025-10-02 17:55:29.302 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 17:55:29.302 +07:00 [INF] CORS policy execution successful.
2025-10-02 17:55:29.302 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:55:29.302 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 17:55:29.302 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:55:29.303 +07:00 [DBG] Successfully validated the token.
2025-10-02 17:55:29.303 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 17:55:29.303 +07:00 [DBG] Authorization was successful.
2025-10-02 17:55:29.304 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:55:29.304 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 17:55:29.304 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 17:55:29.304 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 17:55:29.304 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 17:55:29.304 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 17:55:29.304 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 17:55:29.304 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:55:29.305 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 17:55:29.305 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:55:29.305 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 17:55:29.306 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:55:29.306 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:55:29.306 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 17:55:29.306 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 17:55:29.306 +07:00 [DBG] Connection id "0HNG1K1VTU15O", Request id "0HNG1K1VTU15O:00000001": started reading request body.
2025-10-02 17:55:29.306 +07:00 [DBG] Connection id "0HNG1K1VTU15O", Request id "0HNG1K1VTU15O:00000001": done reading request body.
2025-10-02 17:55:29.306 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 17:55:29.306 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:55:29.306 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:55:29.306 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 17:55:29.307 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 17:55:29.307 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:55:29.307 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 17:55:29.307 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:55:29.307 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:55:29.307 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 17:55:29.307 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 17:55:29.307 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 17:55:29.307 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":5,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 17:55:29.309 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 17:55:29.309 +07:00 [DBG] Creating DbConnection.
2025-10-02 17:55:29.310 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 17:55:29.310 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:55:29.310 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:55:29.310 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:55:29.310 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:55:29.310 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:55:29.311 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:55:29.356 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 17:55:29.357 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:55:29.357 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 17:55:29.357 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:55:29.357 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:55:29.358 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:55:29.358 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:55:29.358 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 17:55:29.358 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:55:29.359 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 17:55:29.359 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:55:29.459 +07:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 17:55:29.464 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 17:55:29.464 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 17:55:29.464 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:55:29.465 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 17:55:53.985 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 17:55:53.985 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 17:55:53.985 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 17:55:53.985 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 17:55:53.985 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 17:55:53.986 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 24681.9308ms
2025-10-02 17:55:53.986 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 17:55:53.987 +07:00 [DBG] Connection id "0HNG1K1VTU15O" completed keep alive response.
2025-10-02 17:55:53.987 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 17:55:53.987 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 17:55:53.987 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 17:55:53.987 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 24685.539ms
2025-10-02 17:55:56.846 +07:00 [DBG] Connection id "0HNG1K1VTU15O" received FIN.
2025-10-02 17:55:56.847 +07:00 [DBG] Connection id "0HNG1K1VTU15O" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 17:55:56.847 +07:00 [DBG] Connection id "0HNG1K1VTU15O" disconnecting.
2025-10-02 17:55:56.848 +07:00 [DBG] Connection id "0HNG1K1VTU15O" stopped.
2025-10-02 18:02:13.454 +07:00 [INF] Application is shutting down...
2025-10-02 18:02:13.455 +07:00 [DBG] Hosting stopping
2025-10-02 18:02:13.464 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 18:02:13.483 +07:00 [DBG] Hosting stopped
2025-10-02 18:02:56.665 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 18:02:56.832 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 18:02:57.254 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.295 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.322 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.327 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.327 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.329 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.673 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.675 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.705 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.706 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.708 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.710 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.719 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.720 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:02:57.792 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 18:02:57.792 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 18:02:57.793 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 18:02:57.793 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 18:02:57.793 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 18:02:57.793 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 18:02:57.793 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 18:02:57.793 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 18:02:57.794 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 18:02:57.794 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 18:02:57.794 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 18:02:57.794 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 18:02:57.794 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 18:02:57.794 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 18:02:57.794 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 18:02:57.795 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 18:02:57.795 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 18:02:57.795 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 18:02:57.795 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 18:02:57.997 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:02:57.998 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:02:57.998 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:02:57.998 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:02:57.998 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:02:57.999 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:02:57.999 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:02:57.999 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:02:57.999 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:02:57.999 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:02:58.000 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:02:58.260 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:02:58.356 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 18:02:58.577 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:02:58.633 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:02:58.666 +07:00 [DBG] Created DbConnection. (27ms).
2025-10-02 18:02:58.674 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:58.904 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:58.910 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:02:58.922 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-10-02 18:02:58.933 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (23ms).
2025-10-02 18:02:58.946 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:02:59.038 +07:00 [INF] Executed DbCommand (85ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:02:59.118 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:02:59.154 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.168 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 120ms reading results.
2025-10-02 18:02:59.174 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.180 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (6ms).
2025-10-02 18:02:59.184 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.185 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.185 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:02:59.186 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.186 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.186 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:02:59.199 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:02:59.199 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:02:59.200 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.200 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:02:59.200 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.200 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:02:59.201 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.201 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.201 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:02:59.201 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.201 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.201 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:02:59.203 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:02:59.203 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:02:59.204 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.204 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 18:02:59.204 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.204 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:02:59.206 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.207 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.207 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:02:59.208 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.208 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.208 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:02:59.210 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:02:59.210 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:02:59.211 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.211 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:02:59.212 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.212 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:02:59.219 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 18:02:59.231 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:02:59.233 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.233 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.234 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:02:59.234 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.234 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.234 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:02:59.243 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:02:59.286 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:02:59.348 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.348 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 104ms reading results.
2025-10-02 18:02:59.348 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.349 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:02:59.353 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 18:02:59.359 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.360 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.360 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:02:59.360 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.360 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.360 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:02:59.365 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:02:59.365 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:02:59.366 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.366 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:02:59.366 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.366 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:02:59.367 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 18:02:59.368 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.368 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.368 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:02:59.368 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.368 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.368 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:02:59.374 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:02:59.375 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:02:59.375 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.376 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:02:59.376 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.376 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:02:59.376 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.377 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.377 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:02:59.377 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.377 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:02:59.377 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:02:59.382 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:02:59.382 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:02:59.383 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.383 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:02:59.383 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.383 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:02:59.384 +07:00 [INF] Data seeding completed successfully
2025-10-02 18:02:59.386 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:02:59.392 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:02:59.394 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-02 18:02:59.424 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 18:02:59.718 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 18:02:59.936 +07:00 [DBG] Hosting starting
2025-10-02 18:02:59.949 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 18:02:59.956 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 18:02:59.958 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 18:02:59.961 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 18:02:59.965 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 18:02:59.966 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 18:02:59.977 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 18:02:59.981 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 18:02:59.982 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 18:02:59.984 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 18:02:59.985 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 18:02:59.992 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 18:02:59.996 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 18:02:59.997 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 18:03:00.068 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 18:03:00.068 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 18:03:00.068 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 18:03:00.068 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 18:03:00.069 +07:00 [INF] Hosting environment: Development
2025-10-02 18:03:00.069 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 18:03:00.073 +07:00 [DBG] Hosting started
2025-10-02 18:03:00.268 +07:00 [DBG] Connection id "0HNG1KD047SPE" accepted.
2025-10-02 18:03:00.274 +07:00 [DBG] Connection id "0HNG1KD047SPE" started.
2025-10-02 18:03:00.332 +07:00 [DBG] Connection id "0HNG1KD047SPF" accepted.
2025-10-02 18:03:00.332 +07:00 [DBG] Connection id "0HNG1KD047SPF" started.
2025-10-02 18:03:00.450 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 18:03:00.480 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 18:03:01.135 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 18:03:01.163 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 18:03:01.164 +07:00 [DBG] Connection id "0HNG1KD047SPE" completed keep alive response.
2025-10-02 18:03:01.168 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 720.2344ms
2025-10-02 18:03:01.199 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 18:03:01.215 +07:00 [DBG] Connection id "0HNG1KD047SPE" completed keep alive response.
2025-10-02 18:03:01.226 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 25.4625ms
2025-10-02 18:03:02.164 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 18:03:02.541 +07:00 [DBG] Connection id "0HNG1KD047SPF" received FIN.
2025-10-02 18:03:02.543 +07:00 [DBG] Connection id "0HNG1KD047SPF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:03:02.544 +07:00 [DBG] Connection id "0HNG1KD047SPF" disconnecting.
2025-10-02 18:03:02.546 +07:00 [DBG] Connection id "0HNG1KD047SPF" stopped.
2025-10-02 18:03:02.830 +07:00 [DBG] Connection id "0HNG1KD047SPE" completed keep alive response.
2025-10-02 18:03:02.831 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 666.9656ms
2025-10-02 18:03:12.560 +07:00 [DBG] Connection id "0HNG1KD047SPE" received FIN.
2025-10-02 18:03:12.561 +07:00 [DBG] Connection id "0HNG1KD047SPE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:03:12.562 +07:00 [DBG] Connection id "0HNG1KD047SPE" disconnecting.
2025-10-02 18:03:12.565 +07:00 [DBG] Connection id "0HNG1KD047SPE" stopped.
2025-10-02 18:03:26.995 +07:00 [DBG] Connection id "0HNG1KD047SPG" accepted.
2025-10-02 18:03:26.995 +07:00 [DBG] Connection id "0HNG1KD047SPG" started.
2025-10-02 18:03:26.996 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 18:03:26.999 +07:00 [DBG] POST requests are not supported
2025-10-02 18:03:27.001 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 18:03:27.001 +07:00 [DBG] POST requests are not supported
2025-10-02 18:03:27.006 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 18:03:27.007 +07:00 [INF] CORS policy execution successful.
2025-10-02 18:03:27.161 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:03:27.162 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:03:27.164 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:03:27.333 +07:00 [DBG] Successfully validated the token.
2025-10-02 18:03:27.342 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 18:03:27.377 +07:00 [DBG] Authorization was successful.
2025-10-02 18:03:27.400 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:03:27.478 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 18:03:27.481 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 18:03:27.482 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 18:03:27.484 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 18:03:27.484 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 18:03:27.485 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 18:03:27.491 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:03:27.657 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:03:27.663 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:03:27.665 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 18:03:27.666 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:03:27.667 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:03:27.667 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:03:27.667 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 18:03:27.677 +07:00 [DBG] Connection id "0HNG1KD047SPG", Request id "0HNG1KD047SPG:00000001": started reading request body.
2025-10-02 18:03:27.678 +07:00 [DBG] Connection id "0HNG1KD047SPG", Request id "0HNG1KD047SPG:00000001": done reading request body.
2025-10-02 18:03:27.684 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 18:03:27.684 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:03:27.684 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:03:27.685 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:03:27.695 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:03:27.696 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:03:27.697 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 18:03:27.697 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:03:27.698 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:03:27.698 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:03:27.698 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:03:27.701 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 18:03:27.705 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":5,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 18:03:27.778 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:03:27.785 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 18:03:27.799 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 18:03:27.862 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:03:27.864 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:03:27.865 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 18:03:27.865 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:03:27.865 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:03:27.865 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:03:27.865 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:03:27.866 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:03:27.866 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:03:27.897 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:03:27.901 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:03:27.901 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 18:03:27.901 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:03:27.902 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:03:27.910 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 18:03:27.918 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 18:03:27.918 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 18:03:27.919 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 18:03:27.921 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 18:03:27.993 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 18:03:28.003 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 18:03:28.011 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:03:28.011 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:03:28.011 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:03:28.011 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:03:28.012 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:03:28.012 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:03:28.092 +07:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:03:28.106 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:03:28.106 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 14ms reading results.
2025-10-02 18:03:28.106 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:03:28.107 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:04:35.749 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 18:04:35.750 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 18:04:35.751 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 18:04:35.753 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 18:04:35.753 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 18:04:35.822 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 68334.6303ms
2025-10-02 18:04:35.823 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:04:35.826 +07:00 [DBG] Connection id "0HNG1KD047SPG" completed keep alive response.
2025-10-02 18:04:35.827 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:04:35.827 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:04:35.828 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 18:04:35.831 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 68834.6195ms
2025-10-02 18:04:42.701 +07:00 [DBG] Connection id "0HNG1KD047SPG" received FIN.
2025-10-02 18:04:42.701 +07:00 [DBG] Connection id "0HNG1KD047SPG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:04:42.702 +07:00 [DBG] Connection id "0HNG1KD047SPG" disconnecting.
2025-10-02 18:04:42.702 +07:00 [DBG] Connection id "0HNG1KD047SPG" stopped.
2025-10-02 18:07:04.186 +07:00 [DBG] Connection id "0HNG1KD047SPH" accepted.
2025-10-02 18:07:04.187 +07:00 [DBG] Connection id "0HNG1KD047SPH" started.
2025-10-02 18:07:04.188 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 18:07:04.189 +07:00 [DBG] POST requests are not supported
2025-10-02 18:07:04.189 +07:00 [DBG] POST requests are not supported
2025-10-02 18:07:04.190 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 18:07:04.190 +07:00 [INF] CORS policy execution successful.
2025-10-02 18:07:04.198 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:07:04.198 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:07:04.199 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:07:04.202 +07:00 [DBG] Successfully validated the token.
2025-10-02 18:07:04.203 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 18:07:04.207 +07:00 [DBG] Authorization was successful.
2025-10-02 18:07:04.209 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:07:04.212 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 18:07:04.212 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 18:07:04.212 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 18:07:04.212 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 18:07:04.213 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 18:07:04.213 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 18:07:04.214 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:07:04.216 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:07:04.217 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:07:04.218 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 18:07:04.218 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:07:04.218 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:07:04.218 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:07:04.218 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 18:07:04.219 +07:00 [DBG] Connection id "0HNG1KD047SPH", Request id "0HNG1KD047SPH:00000001": started reading request body.
2025-10-02 18:07:04.219 +07:00 [DBG] Connection id "0HNG1KD047SPH", Request id "0HNG1KD047SPH:00000001": done reading request body.
2025-10-02 18:07:04.219 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 18:07:04.220 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:07:04.220 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:07:04.220 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:07:04.224 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:07:04.225 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:07:04.228 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 18:07:04.230 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:07:04.232 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:07:04.232 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:07:04.232 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:07:04.233 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 18:07:04.234 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":5,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 18:07:04.249 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:07:04.251 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:07:04.252 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 18:07:04.252 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:07:04.252 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:07:04.252 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:07:04.252 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:07:04.252 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:07:04.253 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:07:04.285 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:07:04.286 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:07:04.286 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:07:04.286 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:07:04.286 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:07:04.289 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:07:04.290 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:07:04.290 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:07:04.291 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:07:04.291 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:07:04.291 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:07:04.371 +07:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:07:04.377 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:07:04.377 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 5ms reading results.
2025-10-02 18:07:04.377 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:07:04.377 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:07:11.715 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 18:07:11.715 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 18:07:11.715 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 18:07:11.716 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 18:07:11.716 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 18:07:11.718 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7504.5117ms
2025-10-02 18:07:11.718 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:07:11.718 +07:00 [DBG] Connection id "0HNG1KD047SPH" completed keep alive response.
2025-10-02 18:07:11.719 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:07:11.719 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:07:11.719 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 18:07:11.719 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 7531.3641ms
2025-10-02 18:08:36.335 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 18:08:36.335 +07:00 [DBG] POST requests are not supported
2025-10-02 18:08:36.335 +07:00 [DBG] POST requests are not supported
2025-10-02 18:08:36.336 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 18:08:36.336 +07:00 [INF] CORS policy execution successful.
2025-10-02 18:08:36.336 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:08:36.336 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:08:36.336 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:08:36.339 +07:00 [DBG] Successfully validated the token.
2025-10-02 18:08:36.339 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 18:08:36.341 +07:00 [DBG] Authorization was successful.
2025-10-02 18:08:36.357 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:08:36.359 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 18:08:36.360 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 18:08:36.360 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 18:08:36.360 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 18:08:36.360 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 18:08:36.360 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 18:08:36.361 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:08:36.386 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:08:36.387 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:08:36.387 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 18:08:36.387 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:08:36.387 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:08:36.387 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:08:36.387 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 18:08:36.387 +07:00 [DBG] Connection id "0HNG1KD047SPH", Request id "0HNG1KD047SPH:00000002": started reading request body.
2025-10-02 18:08:36.387 +07:00 [DBG] Connection id "0HNG1KD047SPH", Request id "0HNG1KD047SPH:00000002": done reading request body.
2025-10-02 18:08:36.388 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 18:08:36.388 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:08:36.388 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:08:36.388 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:08:36.388 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:08:36.388 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:08:36.388 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 18:08:36.388 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:08:36.388 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:08:36.388 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:08:36.388 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:08:36.389 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 18:08:36.389 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":5,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 18:08:36.391 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:08:36.391 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:08:36.391 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 18:08:36.391 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:08:36.392 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:08:36.392 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:08:36.392 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:08:36.392 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:08:36.392 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:08:36.422 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:08:36.423 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:08:36.423 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:08:36.423 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:08:36.423 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:08:36.425 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:08:36.425 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:08:36.425 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:08:36.425 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:08:36.425 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:08:36.426 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:08:36.490 +07:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:08:36.493 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:08:36.493 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 18:08:36.493 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:08:36.493 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:09:00.531 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 18:09:00.531 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 18:09:00.531 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 18:09:00.531 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 18:09:00.531 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 18:09:00.532 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 24171.5892ms
2025-10-02 18:09:00.532 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:09:00.533 +07:00 [DBG] Connection id "0HNG1KD047SPH" completed keep alive response.
2025-10-02 18:09:00.533 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:09:00.534 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:09:00.534 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 18:09:00.534 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 24199.0529ms
2025-10-02 18:10:20.359 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 18:10:20.360 +07:00 [DBG] POST requests are not supported
2025-10-02 18:10:20.360 +07:00 [DBG] POST requests are not supported
2025-10-02 18:10:20.360 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 18:10:20.360 +07:00 [INF] CORS policy execution successful.
2025-10-02 18:10:20.360 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:10:20.360 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:10:20.361 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:10:20.361 +07:00 [DBG] Successfully validated the token.
2025-10-02 18:10:20.362 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 18:10:20.362 +07:00 [DBG] Authorization was successful.
2025-10-02 18:10:20.362 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:10:20.362 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 18:10:20.363 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 18:10:20.363 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 18:10:20.363 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 18:10:20.363 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 18:10:20.363 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 18:10:20.364 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:10:20.365 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:10:20.365 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:10:20.365 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 18:10:20.365 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:10:20.365 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:10:20.366 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:10:20.366 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 18:10:20.366 +07:00 [DBG] Connection id "0HNG1KD047SPH", Request id "0HNG1KD047SPH:00000003": started reading request body.
2025-10-02 18:10:20.366 +07:00 [DBG] Connection id "0HNG1KD047SPH", Request id "0HNG1KD047SPH:00000003": done reading request body.
2025-10-02 18:10:20.367 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 18:10:20.367 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:10:20.367 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:10:20.367 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:10:20.367 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:10:20.367 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:10:20.368 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 18:10:20.368 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:10:20.368 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:10:20.368 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:10:20.368 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:10:20.368 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 18:10:20.368 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":5,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 18:10:20.370 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:10:20.372 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:10:20.372 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 18:10:20.372 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:10:20.372 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:10:20.373 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:10:20.374 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-02 18:10:20.374 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 18:10:20.374 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:10:20.389 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:10:20.389 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:10:20.390 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:10:20.390 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:10:20.390 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:10:20.394 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:10:20.395 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:10:20.396 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:10:20.396 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:10:20.396 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:10:20.396 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:10:20.506 +07:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:10:20.508 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:10:20.508 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 18:10:20.508 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:10:20.508 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:10:22.861 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 18:10:22.861 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 18:10:22.861 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 18:10:22.861 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 18:10:22.861 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 18:10:22.862 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2498.2304ms
2025-10-02 18:10:22.862 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:10:22.862 +07:00 [DBG] Connection id "0HNG1KD047SPH" completed keep alive response.
2025-10-02 18:10:22.862 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:10:22.862 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:10:22.862 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 18:10:22.863 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2503.42ms
2025-10-02 18:12:29.660 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 18:12:29.660 +07:00 [DBG] POST requests are not supported
2025-10-02 18:12:29.660 +07:00 [DBG] POST requests are not supported
2025-10-02 18:12:29.660 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 18:12:29.660 +07:00 [INF] CORS policy execution successful.
2025-10-02 18:12:29.660 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:12:29.660 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:12:29.660 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:12:29.661 +07:00 [DBG] Successfully validated the token.
2025-10-02 18:12:29.662 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 18:12:29.662 +07:00 [DBG] Authorization was successful.
2025-10-02 18:12:29.662 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:12:29.662 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 18:12:29.662 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 18:12:29.663 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 18:12:29.663 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 18:12:29.663 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 18:12:29.663 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 18:12:29.663 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:12:29.664 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:12:29.664 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:12:29.664 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 18:12:29.664 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:12:29.664 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:12:29.664 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:12:29.664 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 18:12:29.664 +07:00 [DBG] Connection id "0HNG1KD047SPH", Request id "0HNG1KD047SPH:00000004": started reading request body.
2025-10-02 18:12:29.664 +07:00 [DBG] Connection id "0HNG1KD047SPH", Request id "0HNG1KD047SPH:00000004": done reading request body.
2025-10-02 18:12:29.665 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 18:12:29.665 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:12:29.665 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:12:29.665 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:12:29.665 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:12:29.665 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:12:29.665 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 18:12:29.665 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:12:29.665 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:12:29.665 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:12:29.666 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:12:29.666 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 18:12:29.666 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 18:12:29.667 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:12:29.668 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:12:29.668 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 18:12:29.668 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:12:29.668 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:12:29.669 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:12:29.669 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:12:29.669 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:12:29.669 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:12:29.712 +07:00 [INF] Executed DbCommand (43ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:12:29.712 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:12:29.713 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:12:29.713 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:12:29.713 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:12:29.713 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:12:29.714 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:12:29.714 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:12:29.714 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:12:29.714 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:12:29.714 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:12:29.771 +07:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:12:29.776 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:12:29.777 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-10-02 18:12:29.777 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:12:29.778 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:12:32.868 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 18:12:32.868 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 18:12:32.868 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 18:12:32.869 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 18:12:32.869 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 18:12:32.871 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3207.6704ms
2025-10-02 18:12:32.871 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:12:32.871 +07:00 [DBG] Connection id "0HNG1KD047SPH" completed keep alive response.
2025-10-02 18:12:32.872 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:12:32.872 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:12:32.872 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 18:12:32.872 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3212.5153ms
2025-10-02 18:14:43.953 +07:00 [DBG] Connection id "0HNG1KD047SPH" disconnecting.
2025-10-02 18:14:43.953 +07:00 [DBG] Connection id "0HNG1KD047SPH" stopped.
2025-10-02 18:14:43.954 +07:00 [DBG] Connection id "0HNG1KD047SPH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:22:31.356 +07:00 [INF] Application is shutting down...
2025-10-02 18:22:31.357 +07:00 [DBG] Hosting stopping
2025-10-02 18:22:55.213 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 18:22:55.329 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 18:22:55.596 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.622 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.645 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.647 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.647 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.650 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.945 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.946 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.968 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.969 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.969 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.971 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.980 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:55.981 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:22:56.045 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 18:22:56.046 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 18:22:56.046 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 18:22:56.046 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 18:22:56.046 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 18:22:56.046 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 18:22:56.046 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 18:22:56.047 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 18:22:56.047 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 18:22:56.047 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 18:22:56.047 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 18:22:56.047 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 18:22:56.047 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 18:22:56.047 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 18:22:56.048 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 18:22:56.048 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 18:22:56.048 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 18:22:56.048 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 18:22:56.048 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 18:22:56.245 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:22:56.245 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:22:56.245 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:22:56.246 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:22:56.246 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:22:56.246 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:22:56.246 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:22:56.246 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:22:56.247 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:22:56.247 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:22:56.247 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:22:56.466 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:22:56.541 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 18:22:56.725 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:22:56.764 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:22:56.782 +07:00 [DBG] Created DbConnection. (15ms).
2025-10-02 18:22:56.786 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:56.954 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:56.960 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:22:56.966 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-02 18:22:56.977 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2025-10-02 18:22:56.984 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:22:57.037 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:22:57.087 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:22:57.115 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.122 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 80ms reading results.
2025-10-02 18:22:57.128 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.132 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (5ms).
2025-10-02 18:22:57.135 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.136 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:22:57.137 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.137 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.137 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:22:57.141 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:22:57.144 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:22:57.145 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.145 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 18:22:57.145 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.146 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:22:57.146 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.146 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.147 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:22:57.147 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.147 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.147 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:22:57.148 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:22:57.148 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:22:57.148 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.149 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:22:57.149 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.149 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:22:57.150 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.150 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.150 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:22:57.150 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.150 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.150 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:22:57.151 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:22:57.151 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:22:57.151 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.152 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:22:57.152 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.152 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:22:57.162 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 18:22:57.168 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:22:57.170 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.170 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.170 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:22:57.170 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.171 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.171 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:22:57.176 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:22:57.204 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:22:57.244 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.244 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 67ms reading results.
2025-10-02 18:22:57.244 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.245 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:22:57.247 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 18:22:57.250 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.250 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.250 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:22:57.250 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.250 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.250 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:22:57.252 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:22:57.252 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:22:57.252 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.252 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:22:57.252 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.253 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:22:57.253 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 18:22:57.253 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.254 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.254 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:22:57.254 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.254 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.254 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:22:57.255 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:22:57.255 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:22:57.256 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.257 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 18:22:57.257 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.258 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:22:57.259 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.259 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.260 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:22:57.260 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.260 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:22:57.260 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:22:57.262 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:22:57.263 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:22:57.263 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.263 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:22:57.263 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.263 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:22:57.264 +07:00 [INF] Data seeding completed successfully
2025-10-02 18:22:57.265 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:22:57.267 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:22:57.268 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 18:22:57.285 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 18:22:57.481 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 18:22:57.625 +07:00 [DBG] Hosting starting
2025-10-02 18:22:57.636 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 18:22:57.638 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 18:22:57.639 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 18:22:57.645 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 18:22:57.648 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 18:22:57.648 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 18:22:57.653 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 18:22:57.657 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 18:22:57.658 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 18:22:57.662 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 18:22:57.663 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 18:22:57.666 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 18:22:57.668 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 18:22:57.669 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 18:22:57.726 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 18:22:57.727 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 18:22:57.727 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 18:22:57.727 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 18:22:57.727 +07:00 [INF] Hosting environment: Development
2025-10-02 18:22:57.727 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 18:22:57.729 +07:00 [DBG] Hosting started
2025-10-02 18:22:57.858 +07:00 [DBG] Connection id "0HNG1KO51B3IP" accepted.
2025-10-02 18:22:57.861 +07:00 [DBG] Connection id "0HNG1KO51B3IP" started.
2025-10-02 18:22:57.917 +07:00 [DBG] Connection id "0HNG1KO51B3IQ" accepted.
2025-10-02 18:22:57.918 +07:00 [DBG] Connection id "0HNG1KO51B3IQ" started.
2025-10-02 18:22:57.971 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 18:22:57.983 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 18:22:58.276 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 18:22:58.317 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 18:22:58.318 +07:00 [DBG] Connection id "0HNG1KO51B3IP" completed keep alive response.
2025-10-02 18:22:58.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 354.4714ms
2025-10-02 18:22:58.359 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 18:22:58.366 +07:00 [DBG] Connection id "0HNG1KO51B3IP" completed keep alive response.
2025-10-02 18:22:58.367 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 7.9396ms
2025-10-02 18:22:58.597 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 18:22:59.028 +07:00 [DBG] Connection id "0HNG1KO51B3IP" completed keep alive response.
2025-10-02 18:22:59.029 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 433.0521ms
2025-10-02 18:22:59.318 +07:00 [DBG] Connection id "0HNG1KO51B3IP" received FIN.
2025-10-02 18:22:59.318 +07:00 [DBG] Connection id "0HNG1KO51B3IQ" received FIN.
2025-10-02 18:22:59.326 +07:00 [DBG] Connection id "0HNG1KO51B3IQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:22:59.326 +07:00 [DBG] Connection id "0HNG1KO51B3IP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:22:59.328 +07:00 [DBG] Connection id "0HNG1KO51B3IQ" disconnecting.
2025-10-02 18:22:59.328 +07:00 [DBG] Connection id "0HNG1KO51B3IP" disconnecting.
2025-10-02 18:22:59.331 +07:00 [DBG] Connection id "0HNG1KO51B3IP" stopped.
2025-10-02 18:22:59.331 +07:00 [DBG] Connection id "0HNG1KO51B3IQ" stopped.
2025-10-02 18:23:10.617 +07:00 [DBG] Connection id "0HNG1KO51B3IR" accepted.
2025-10-02 18:23:10.619 +07:00 [DBG] Connection id "0HNG1KO51B3IR" started.
2025-10-02 18:23:10.620 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 18:23:10.623 +07:00 [DBG] POST requests are not supported
2025-10-02 18:23:10.639 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 18:23:10.640 +07:00 [DBG] POST requests are not supported
2025-10-02 18:23:10.642 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 18:23:10.644 +07:00 [INF] CORS policy execution successful.
2025-10-02 18:23:10.701 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:23:10.704 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:23:10.705 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:23:10.794 +07:00 [DBG] Successfully validated the token.
2025-10-02 18:23:10.795 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 18:23:10.800 +07:00 [DBG] Authorization was successful.
2025-10-02 18:23:10.808 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:23:10.826 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 18:23:10.828 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 18:23:10.828 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 18:23:10.830 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 18:23:10.830 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 18:23:10.830 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 18:23:10.832 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:23:10.967 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:23:10.974 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:23:10.977 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 18:23:10.979 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:23:10.979 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:23:10.980 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:23:10.980 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 18:23:10.993 +07:00 [DBG] Connection id "0HNG1KO51B3IR", Request id "0HNG1KO51B3IR:00000001": started reading request body.
2025-10-02 18:23:10.993 +07:00 [DBG] Connection id "0HNG1KO51B3IR", Request id "0HNG1KO51B3IR:00000001": done reading request body.
2025-10-02 18:23:11.003 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 18:23:11.004 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:23:11.005 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:23:11.005 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:23:11.014 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:23:11.016 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:23:11.018 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 18:23:11.021 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:23:11.021 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:23:11.022 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:23:11.022 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:23:11.026 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 18:23:11.028 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 18:23:11.155 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:23:11.178 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 18:23:11.206 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 18:23:11.413 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:23:11.424 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:23:11.426 +07:00 [DBG] Created DbConnection. (2ms).
2025-10-02 18:23:11.427 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:23:11.428 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:23:11.429 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:23:11.430 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:23:11.430 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 18:23:11.431 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:23:11.463 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:23:11.478 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:23:11.479 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 15ms reading results.
2025-10-02 18:23:11.480 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:23:11.482 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-10-02 18:23:11.502 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 18:23:11.533 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 18:23:11.537 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 18:23:11.540 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 18:23:11.544 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 18:23:11.720 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 18:23:11.734 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 18:23:11.748 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:23:11.748 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:23:11.749 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:23:11.749 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:23:11.749 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:23:11.751 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:23:11.840 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:23:11.858 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:23:11.858 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 17ms reading results.
2025-10-02 18:23:11.858 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:23:11.859 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:23:44.484 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 18:23:44.486 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 18:23:44.487 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 18:23:44.489 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 18:23:44.490 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 18:23:44.558 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 33719.2913ms
2025-10-02 18:23:44.559 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:23:44.562 +07:00 [DBG] Connection id "0HNG1KO51B3IR" completed keep alive response.
2025-10-02 18:23:44.562 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:23:44.562 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:23:44.562 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 18:23:44.563 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 33937.5985ms
2025-10-02 18:23:49.367 +07:00 [DBG] Connection id "0HNG1KO51B3IR" received FIN.
2025-10-02 18:23:49.367 +07:00 [DBG] Connection id "0HNG1KO51B3IR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:23:49.368 +07:00 [DBG] Connection id "0HNG1KO51B3IR" disconnecting.
2025-10-02 18:23:49.369 +07:00 [DBG] Connection id "0HNG1KO51B3IR" stopped.
2025-10-02 18:26:13.793 +07:00 [DBG] Connection id "0HNG1KO51B3IS" accepted.
2025-10-02 18:26:13.793 +07:00 [DBG] Connection id "0HNG1KO51B3IS" started.
2025-10-02 18:26:13.794 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 18:26:13.794 +07:00 [DBG] POST requests are not supported
2025-10-02 18:26:13.794 +07:00 [DBG] POST requests are not supported
2025-10-02 18:26:13.795 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 18:26:13.795 +07:00 [INF] CORS policy execution successful.
2025-10-02 18:26:13.809 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:26:13.809 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:26:13.810 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:26:13.815 +07:00 [DBG] Successfully validated the token.
2025-10-02 18:26:13.816 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 18:26:13.819 +07:00 [DBG] Authorization was successful.
2025-10-02 18:26:13.820 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:26:13.822 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 18:26:13.823 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 18:26:13.824 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 18:26:13.824 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 18:26:13.826 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 18:26:13.826 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 18:26:13.828 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:26:13.834 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:26:13.835 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:26:13.835 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 18:26:13.836 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:26:13.836 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:26:13.836 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:26:13.836 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 18:26:13.836 +07:00 [DBG] Connection id "0HNG1KO51B3IS", Request id "0HNG1KO51B3IS:00000001": started reading request body.
2025-10-02 18:26:13.836 +07:00 [DBG] Connection id "0HNG1KO51B3IS", Request id "0HNG1KO51B3IS:00000001": done reading request body.
2025-10-02 18:26:13.837 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 18:26:13.837 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:26:13.837 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:26:13.837 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:26:13.840 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:26:13.841 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:26:13.842 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 18:26:13.842 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:26:13.842 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:26:13.842 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:26:13.843 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:26:13.843 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 18:26:13.844 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T08:31:10.9240000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 18:26:13.861 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:26:13.864 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:26:13.864 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 18:26:13.864 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:26:13.865 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:26:13.865 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:26:13.865 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:26:13.865 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:26:13.865 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:26:13.895 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:26:13.896 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:26:13.896 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:26:13.896 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:26:13.897 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:26:13.898 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:26:13.898 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:26:13.898 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:26:13.898 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:26:13.898 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:26:13.898 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:26:13.983 +07:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:26:13.990 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:26:13.990 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-10-02 18:26:13.990 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:26:13.991 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:27:18.672 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 18:27:18.672 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 18:27:18.672 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 18:27:18.673 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 18:27:18.673 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 18:27:18.674 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 64836.3167ms
2025-10-02 18:27:18.675 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:27:18.676 +07:00 [DBG] Connection id "0HNG1KO51B3IS" completed keep alive response.
2025-10-02 18:27:18.676 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:27:18.676 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:27:18.676 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 18:27:18.676 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 64871.3485ms
2025-10-02 18:29:30.330 +07:00 [DBG] Connection id "0HNG1KO51B3IS" disconnecting.
2025-10-02 18:29:30.330 +07:00 [DBG] Connection id "0HNG1KO51B3IS" stopped.
2025-10-02 18:29:30.330 +07:00 [DBG] Connection id "0HNG1KO51B3IS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:32:04.660 +07:00 [INF] Application is shutting down...
2025-10-02 18:32:04.661 +07:00 [DBG] Hosting stopping
2025-10-02 18:32:04.670 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 18:32:04.688 +07:00 [DBG] Hosting stopped
2025-10-02 18:44:55.555 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 18:44:55.676 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 18:44:56.078 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.104 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.133 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.135 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.135 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.138 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.474 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.475 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.500 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.501 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.501 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.502 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.507 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.508 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:44:56.574 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 18:44:56.574 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 18:44:56.574 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 18:44:56.575 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 18:44:56.575 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 18:44:56.575 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 18:44:56.575 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 18:44:56.575 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 18:44:56.575 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 18:44:56.575 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 18:44:56.575 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 18:44:56.575 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 18:44:56.576 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 18:44:56.576 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 18:44:56.577 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 18:44:56.577 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 18:44:56.577 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 18:44:56.578 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 18:44:56.578 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 18:44:56.784 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:44:56.784 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:44:56.785 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:44:56.785 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:44:56.785 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:44:56.785 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:44:56.785 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:44:56.786 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:44:56.786 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:44:56.786 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:44:56.786 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:44:57.000 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:44:57.125 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 18:44:57.450 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:44:57.514 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:44:57.545 +07:00 [DBG] Created DbConnection. (26ms).
2025-10-02 18:44:57.553 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:57.823 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:57.828 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:44:57.837 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-10-02 18:44:57.849 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (22ms).
2025-10-02 18:44:57.858 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:44:57.939 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:44:58.002 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:44:58.047 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.059 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 112ms reading results.
2025-10-02 18:44:58.065 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.073 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (7ms).
2025-10-02 18:44:58.081 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.082 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.083 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:44:58.083 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.083 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.084 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:44:58.100 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:44:58.101 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:44:58.102 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.103 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 18:44:58.103 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.103 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:44:58.104 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.104 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.105 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:44:58.105 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.105 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.105 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:44:58.107 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:44:58.107 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:44:58.108 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.108 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:44:58.109 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.110 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-10-02 18:44:58.111 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.111 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.112 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:44:58.112 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.112 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.113 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:44:58.117 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:44:58.118 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:44:58.118 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.119 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 18:44:58.120 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.120 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:44:58.134 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 18:44:58.143 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:44:58.147 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.147 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.148 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:44:58.148 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.148 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.148 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:44:58.159 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:44:58.199 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:44:58.268 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.268 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 108ms reading results.
2025-10-02 18:44:58.269 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.269 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:44:58.274 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 18:44:58.281 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.281 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.281 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:44:58.281 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.282 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.282 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:44:58.465 +07:00 [INF] Executed DbCommand (183ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:44:58.466 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:44:58.467 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.467 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:44:58.467 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.467 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:44:58.468 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 18:44:58.469 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.469 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.469 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:44:58.469 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.470 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.470 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:44:58.471 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:44:58.472 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:44:58.473 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.473 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 18:44:58.473 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.473 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:44:58.474 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.475 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.475 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:44:58.475 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.476 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:44:58.476 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:44:58.478 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:44:58.479 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:44:58.480 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.481 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 18:44:58.481 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.482 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:44:58.482 +07:00 [INF] Data seeding completed successfully
2025-10-02 18:44:58.485 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:44:58.488 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:44:58.489 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 18:44:58.540 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 18:44:58.949 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 18:44:59.215 +07:00 [DBG] Hosting starting
2025-10-02 18:44:59.232 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 18:44:59.236 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 18:44:59.237 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 18:44:59.246 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 18:44:59.251 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 18:44:59.252 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 18:44:59.258 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 18:44:59.262 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 18:44:59.263 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 18:44:59.265 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 18:44:59.266 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 18:44:59.270 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 18:44:59.274 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 18:44:59.275 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 18:44:59.364 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 18:44:59.364 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 18:44:59.365 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 18:44:59.365 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 18:44:59.365 +07:00 [INF] Hosting environment: Development
2025-10-02 18:44:59.365 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 18:44:59.369 +07:00 [DBG] Hosting started
2025-10-02 18:45:00.141 +07:00 [DBG] Connection id "0HNG1L4F3JQ12" accepted.
2025-10-02 18:45:00.144 +07:00 [DBG] Connection id "0HNG1L4F3JQ12" started.
2025-10-02 18:45:00.294 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 18:45:00.317 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 18:45:00.781 +07:00 [DBG] Connection id "0HNG1L4F3JQ13" accepted.
2025-10-02 18:45:00.782 +07:00 [DBG] Connection id "0HNG1L4F3JQ13" started.
2025-10-02 18:45:01.170 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 18:45:01.204 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 18:45:01.205 +07:00 [DBG] Connection id "0HNG1L4F3JQ12" completed keep alive response.
2025-10-02 18:45:01.227 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 932.7358ms
2025-10-02 18:45:01.266 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 18:45:01.293 +07:00 [DBG] Connection id "0HNG1L4F3JQ12" completed keep alive response.
2025-10-02 18:45:01.294 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 27.5296ms
2025-10-02 18:45:01.618 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 18:45:02.156 +07:00 [DBG] Connection id "0HNG1L4F3JQ12" completed keep alive response.
2025-10-02 18:45:02.160 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 541.6406ms
2025-10-02 18:45:04.334 +07:00 [DBG] Connection id "0HNG1L4F3JQ13" received FIN.
2025-10-02 18:45:04.334 +07:00 [DBG] Connection id "0HNG1L4F3JQ12" received FIN.
2025-10-02 18:45:04.336 +07:00 [DBG] Connection id "0HNG1L4F3JQ13" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:45:04.336 +07:00 [DBG] Connection id "0HNG1L4F3JQ12" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:45:04.337 +07:00 [DBG] Connection id "0HNG1L4F3JQ13" disconnecting.
2025-10-02 18:45:04.337 +07:00 [DBG] Connection id "0HNG1L4F3JQ12" disconnecting.
2025-10-02 18:45:04.339 +07:00 [DBG] Connection id "0HNG1L4F3JQ12" stopped.
2025-10-02 18:45:04.339 +07:00 [DBG] Connection id "0HNG1L4F3JQ13" stopped.
2025-10-02 18:46:20.917 +07:00 [DBG] Connection id "0HNG1L4F3JQ14" accepted.
2025-10-02 18:46:20.918 +07:00 [DBG] Connection id "0HNG1L4F3JQ14" started.
2025-10-02 18:46:20.920 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 18:46:20.924 +07:00 [DBG] POST requests are not supported
2025-10-02 18:46:20.934 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 18:46:20.935 +07:00 [DBG] POST requests are not supported
2025-10-02 18:46:20.938 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 18:46:20.939 +07:00 [INF] CORS policy execution successful.
2025-10-02 18:46:21.010 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:46:21.011 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:46:21.012 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:46:21.173 +07:00 [DBG] Successfully validated the token.
2025-10-02 18:46:21.175 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 18:46:21.182 +07:00 [DBG] Authorization was successful.
2025-10-02 18:46:21.195 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:46:21.234 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 18:46:21.239 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 18:46:21.240 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 18:46:21.241 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 18:46:21.241 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 18:46:21.241 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 18:46:21.245 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:46:21.393 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:46:21.400 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:46:21.406 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 18:46:21.408 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:46:21.408 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:46:21.408 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:46:21.408 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 18:46:21.422 +07:00 [DBG] Connection id "0HNG1L4F3JQ14", Request id "0HNG1L4F3JQ14:00000001": started reading request body.
2025-10-02 18:46:21.423 +07:00 [DBG] Connection id "0HNG1L4F3JQ14", Request id "0HNG1L4F3JQ14:00000001": done reading request body.
2025-10-02 18:46:21.446 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 18:46:21.447 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:46:21.448 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:46:21.448 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:46:21.498 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:46:21.506 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:46:21.513 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 18:46:21.516 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:46:21.516 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:46:21.516 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:46:21.517 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:46:21.527 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 18:46:21.529 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 18:46:21.678 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:46:21.700 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 18:46:21.745 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 18:46:21.899 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:46:21.904 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:46:21.905 +07:00 [DBG] Created DbConnection. (1ms).
2025-10-02 18:46:21.905 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:46:21.906 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:46:21.906 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:46:21.906 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:46:21.907 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 18:46:21.911 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:46:21.975 +07:00 [INF] Executed DbCommand (67ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:46:21.988 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:46:21.989 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 12ms reading results.
2025-10-02 18:46:21.989 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:46:21.990 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:46:22.022 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 18:46:22.051 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 18:46:22.053 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 18:46:22.055 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 18:46:22.056 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 18:46:22.165 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 18:46:22.176 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 18:46:22.184 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:46:22.184 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:46:22.184 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:46:22.184 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:46:22.185 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:46:22.185 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:46:22.266 +07:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:46:22.281 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:46:22.281 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 15ms reading results.
2025-10-02 18:46:22.281 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:46:22.281 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:46:52.193 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 18:46:52.195 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 18:46:52.196 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 18:46:52.201 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 18:46:52.202 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 18:46:52.277 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 31028.5242ms
2025-10-02 18:46:52.277 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:46:52.280 +07:00 [DBG] Connection id "0HNG1L4F3JQ14" completed keep alive response.
2025-10-02 18:46:52.281 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:46:52.281 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:46:52.282 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 18:46:52.283 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 31359.2239ms
2025-10-02 18:46:54.486 +07:00 [DBG] Connection id "0HNG1L4F3JQ14" received FIN.
2025-10-02 18:46:54.487 +07:00 [DBG] Connection id "0HNG1L4F3JQ14" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:46:54.488 +07:00 [DBG] Connection id "0HNG1L4F3JQ14" disconnecting.
2025-10-02 18:46:54.488 +07:00 [DBG] Connection id "0HNG1L4F3JQ14" stopped.
2025-10-02 18:49:31.284 +07:00 [DBG] Connection id "0HNG1L4F3JQ15" accepted.
2025-10-02 18:49:31.284 +07:00 [DBG] Connection id "0HNG1L4F3JQ15" started.
2025-10-02 18:49:31.289 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 18:49:31.289 +07:00 [DBG] POST requests are not supported
2025-10-02 18:49:31.289 +07:00 [DBG] POST requests are not supported
2025-10-02 18:49:31.290 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 18:49:31.290 +07:00 [INF] CORS policy execution successful.
2025-10-02 18:49:31.301 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:49:31.301 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:49:31.302 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:49:31.305 +07:00 [DBG] Successfully validated the token.
2025-10-02 18:49:31.306 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 18:49:31.308 +07:00 [DBG] Authorization was successful.
2025-10-02 18:49:31.309 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:49:31.309 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 18:49:31.309 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 18:49:31.309 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 18:49:31.309 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 18:49:31.310 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 18:49:31.310 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 18:49:31.311 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:49:31.314 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:49:31.316 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:49:31.317 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 18:49:31.317 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:49:31.317 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:49:31.317 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:49:31.317 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 18:49:31.318 +07:00 [DBG] Connection id "0HNG1L4F3JQ15", Request id "0HNG1L4F3JQ15:00000001": started reading request body.
2025-10-02 18:49:31.318 +07:00 [DBG] Connection id "0HNG1L4F3JQ15", Request id "0HNG1L4F3JQ15:00000001": done reading request body.
2025-10-02 18:49:31.318 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 18:49:31.318 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:49:31.318 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:49:31.318 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:49:31.319 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:49:31.319 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:49:31.320 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 18:49:31.320 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:49:31.320 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:49:31.320 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:49:31.320 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:49:31.320 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 18:49:31.321 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 18:49:31.343 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:49:31.355 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:49:31.355 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 18:49:31.356 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:49:31.356 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:49:31.356 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:49:31.356 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:49:31.356 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:49:31.357 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:49:31.388 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:49:31.389 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:49:31.389 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:49:31.389 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:49:31.389 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:49:31.391 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:49:31.391 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:49:31.391 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:49:31.391 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:49:31.391 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:49:31.391 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:49:31.490 +07:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:49:31.494 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:49:31.494 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 18:49:31.494 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:49:31.495 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:49:33.947 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 18:49:33.947 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 18:49:33.947 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 18:49:33.948 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 18:49:33.948 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 18:49:33.950 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2639.3792ms
2025-10-02 18:49:33.950 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:49:33.950 +07:00 [DBG] Connection id "0HNG1L4F3JQ15" completed keep alive response.
2025-10-02 18:49:33.950 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:49:33.950 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:49:33.951 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 18:49:33.951 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2661.5786ms
2025-10-02 18:49:34.747 +07:00 [DBG] Connection id "0HNG1L4F3JQ15" received FIN.
2025-10-02 18:49:34.747 +07:00 [DBG] Connection id "0HNG1L4F3JQ15" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:49:34.747 +07:00 [DBG] Connection id "0HNG1L4F3JQ15" disconnecting.
2025-10-02 18:49:34.748 +07:00 [DBG] Connection id "0HNG1L4F3JQ15" stopped.
2025-10-02 18:50:07.362 +07:00 [DBG] Connection id "0HNG1L4F3JQ16" accepted.
2025-10-02 18:50:07.363 +07:00 [DBG] Connection id "0HNG1L4F3JQ16" started.
2025-10-02 18:50:07.363 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 18:50:07.363 +07:00 [DBG] POST requests are not supported
2025-10-02 18:50:07.363 +07:00 [DBG] POST requests are not supported
2025-10-02 18:50:07.364 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 18:50:07.364 +07:00 [INF] CORS policy execution successful.
2025-10-02 18:50:07.364 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:50:07.364 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:50:07.364 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:50:07.368 +07:00 [DBG] Successfully validated the token.
2025-10-02 18:50:07.368 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 18:50:07.371 +07:00 [DBG] Authorization was successful.
2025-10-02 18:50:07.402 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:50:07.405 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 18:50:07.405 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 18:50:07.405 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 18:50:07.405 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 18:50:07.405 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 18:50:07.405 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 18:50:07.405 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:50:07.422 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:50:07.422 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:50:07.422 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 18:50:07.423 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:50:07.423 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:50:07.423 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:50:07.423 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 18:50:07.423 +07:00 [DBG] Connection id "0HNG1L4F3JQ16", Request id "0HNG1L4F3JQ16:00000001": started reading request body.
2025-10-02 18:50:07.423 +07:00 [DBG] Connection id "0HNG1L4F3JQ16", Request id "0HNG1L4F3JQ16:00000001": done reading request body.
2025-10-02 18:50:07.423 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 18:50:07.423 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:50:07.424 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:50:07.424 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:50:07.424 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:50:07.424 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:50:07.424 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 18:50:07.424 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:50:07.424 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:50:07.424 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:50:07.424 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:50:07.424 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 18:50:07.424 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 18:50:07.427 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:50:07.431 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:50:07.431 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 18:50:07.431 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:50:07.432 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:50:07.432 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:50:07.432 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:50:07.432 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:50:07.432 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:50:07.467 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:50:07.467 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:50:07.467 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:50:07.467 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:50:07.467 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:50:07.469 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:50:07.469 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:50:07.469 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:50:07.469 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:50:07.469 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:50:07.469 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:50:07.540 +07:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:50:07.547 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:50:07.547 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-10-02 18:50:07.547 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:50:07.547 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:52:26.008 +07:00 [INF] Application is shutting down...
2025-10-02 18:52:26.010 +07:00 [DBG] Hosting stopping
2025-10-02 18:52:56.016 +07:00 [DBG] Some connections failed to close gracefully during server shutdown.
2025-10-02 18:52:56.017 +07:00 [DBG] Connection id "0HNG1L4F3JQ16" sending RST because: "The connection was aborted because the server is shutting down and request processing didn't complete within the time specified by HostOptions.ShutdownTimeout."
2025-10-02 18:52:56.017 +07:00 [DBG] Connection id "0HNG1L4F3JQ16" disconnecting.
2025-10-02 18:52:57.029 +07:00 [DBG] Some connections failed to abort during server shutdown.
2025-10-02 18:52:57.032 +07:00 [DBG] Hosting stopped
2025-10-02 18:53:15.980 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 18:53:16.093 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 18:53:16.383 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.410 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.432 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.435 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.436 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.439 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.718 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.720 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.745 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.745 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.746 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.747 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.755 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.756 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 18:53:16.815 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 18:53:16.815 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 18:53:16.815 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 18:53:16.816 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 18:53:16.816 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 18:53:16.816 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 18:53:16.816 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 18:53:16.816 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 18:53:16.816 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 18:53:16.816 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 18:53:16.817 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 18:53:16.817 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 18:53:16.817 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 18:53:16.817 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 18:53:16.817 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 18:53:16.817 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 18:53:16.818 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 18:53:16.818 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 18:53:16.818 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 18:53:17.024 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:53:17.024 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:53:17.024 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:53:17.024 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:53:17.024 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:53:17.024 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:53:17.025 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:53:17.025 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:53:17.029 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:53:17.029 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:53:17.029 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 18:53:17.230 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:53:17.300 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 18:53:17.489 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:53:17.530 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:53:17.553 +07:00 [DBG] Created DbConnection. (19ms).
2025-10-02 18:53:17.558 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.712 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.715 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:53:17.725 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-02 18:53:17.737 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2025-10-02 18:53:17.745 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:53:17.810 +07:00 [INF] Executed DbCommand (61ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:53:17.862 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:53:17.884 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.895 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 79ms reading results.
2025-10-02 18:53:17.898 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.907 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (8ms).
2025-10-02 18:53:17.911 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.912 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.913 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:53:17.913 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:17.913 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:17.913 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:53:17.916 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:53:17.916 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:53:17.916 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.917 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:53:17.917 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.917 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:53:17.918 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.919 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.920 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:53:17.921 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:17.921 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:17.921 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:53:17.922 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:53:17.923 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:53:17.923 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.924 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 18:53:17.924 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.925 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:53:17.925 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.926 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.926 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:53:17.926 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:17.926 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:17.926 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:53:17.927 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 18:53:17.928 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:53:17.928 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.928 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:53:17.928 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.928 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:53:17.934 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 18:53:17.944 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:53:17.945 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.946 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:17.946 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:53:17.946 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:17.946 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:17.946 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:53:17.958 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:53:17.984 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:53:18.023 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.024 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 65ms reading results.
2025-10-02 18:53:18.024 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.024 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:53:18.027 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 18:53:18.029 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.029 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.030 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:53:18.030 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:18.030 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:18.030 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:53:18.031 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:53:18.031 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:53:18.032 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.032 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:53:18.032 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.032 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:53:18.032 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 18:53:18.033 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.033 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.033 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:53:18.033 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:18.033 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:18.033 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:53:18.034 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:53:18.036 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:53:18.036 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.037 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 18:53:18.037 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.038 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:53:18.039 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.039 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.039 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:53:18.039 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:18.039 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:18.039 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:53:18.041 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 18:53:18.042 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 18:53:18.042 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.042 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 18:53:18.042 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.042 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:53:18.043 +07:00 [INF] Data seeding completed successfully
2025-10-02 18:53:18.044 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:53:18.046 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:18.047 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 18:53:18.068 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 18:53:18.251 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 18:53:18.389 +07:00 [DBG] Hosting starting
2025-10-02 18:53:18.398 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 18:53:18.400 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 18:53:18.401 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 18:53:18.408 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 18:53:18.411 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 18:53:18.411 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 18:53:18.416 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 18:53:18.421 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 18:53:18.422 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 18:53:18.424 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 18:53:18.425 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 18:53:18.428 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 18:53:18.430 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 18:53:18.431 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 18:53:18.491 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 18:53:18.491 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 18:53:18.491 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 18:53:18.491 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 18:53:18.492 +07:00 [INF] Hosting environment: Development
2025-10-02 18:53:18.492 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 18:53:18.494 +07:00 [DBG] Hosting started
2025-10-02 18:53:18.627 +07:00 [DBG] Connection id "0HNG1L93LHO9S" accepted.
2025-10-02 18:53:18.628 +07:00 [DBG] Connection id "0HNG1L93LHO9S" started.
2025-10-02 18:53:18.675 +07:00 [DBG] Connection id "0HNG1L93LHO9T" accepted.
2025-10-02 18:53:18.675 +07:00 [DBG] Connection id "0HNG1L93LHO9T" started.
2025-10-02 18:53:18.710 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 18:53:18.718 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 18:53:18.952 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 18:53:18.983 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 18:53:18.984 +07:00 [DBG] Connection id "0HNG1L93LHO9S" completed keep alive response.
2025-10-02 18:53:18.988 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 284.1075ms
2025-10-02 18:53:19.001 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 18:53:19.007 +07:00 [DBG] Connection id "0HNG1L93LHO9S" completed keep alive response.
2025-10-02 18:53:19.030 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 29.3693ms
2025-10-02 18:53:19.207 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 18:53:19.601 +07:00 [DBG] Connection id "0HNG1L93LHO9S" completed keep alive response.
2025-10-02 18:53:19.602 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 394.4967ms
2025-10-02 18:53:20.238 +07:00 [DBG] Connection id "0HNG1L93LHO9T" received FIN.
2025-10-02 18:53:20.238 +07:00 [DBG] Connection id "0HNG1L93LHO9S" received FIN.
2025-10-02 18:53:20.240 +07:00 [DBG] Connection id "0HNG1L93LHO9T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:53:20.240 +07:00 [DBG] Connection id "0HNG1L93LHO9S" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:53:20.241 +07:00 [DBG] Connection id "0HNG1L93LHO9S" disconnecting.
2025-10-02 18:53:20.241 +07:00 [DBG] Connection id "0HNG1L93LHO9T" disconnecting.
2025-10-02 18:53:20.243 +07:00 [DBG] Connection id "0HNG1L93LHO9S" stopped.
2025-10-02 18:53:20.243 +07:00 [DBG] Connection id "0HNG1L93LHO9T" stopped.
2025-10-02 18:53:31.855 +07:00 [DBG] Connection id "0HNG1L93LHO9U" accepted.
2025-10-02 18:53:31.855 +07:00 [DBG] Connection id "0HNG1L93LHO9U" started.
2025-10-02 18:53:31.856 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 18:53:31.873 +07:00 [DBG] POST requests are not supported
2025-10-02 18:53:31.875 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 18:53:31.876 +07:00 [DBG] POST requests are not supported
2025-10-02 18:53:31.880 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 18:53:31.881 +07:00 [INF] CORS policy execution successful.
2025-10-02 18:53:31.935 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:53:31.936 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 18:53:31.937 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:53:32.022 +07:00 [DBG] Successfully validated the token.
2025-10-02 18:53:32.023 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 18:53:32.031 +07:00 [DBG] Authorization was successful.
2025-10-02 18:53:32.037 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:53:32.055 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 18:53:32.056 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 18:53:32.057 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 18:53:32.058 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 18:53:32.058 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 18:53:32.058 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 18:53:32.060 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:53:32.244 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 18:53:32.254 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:53:32.258 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 18:53:32.260 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:53:32.262 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:53:32.263 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 18:53:32.264 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 18:53:32.301 +07:00 [DBG] Connection id "0HNG1L93LHO9U", Request id "0HNG1L93LHO9U:00000001": started reading request body.
2025-10-02 18:53:32.319 +07:00 [DBG] Connection id "0HNG1L93LHO9U", Request id "0HNG1L93LHO9U:00000001": done reading request body.
2025-10-02 18:53:32.338 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 18:53:32.339 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:53:32.340 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:53:32.340 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 18:53:32.351 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 18:53:32.352 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:53:32.353 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 18:53:32.354 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:53:32.354 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:53:32.354 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 18:53:32.354 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 18:53:32.357 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 18:53:32.358 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 18:53:32.438 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 18:53:32.448 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 18:53:32.458 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 18:53:32.518 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 18:53:32.521 +07:00 [DBG] Creating DbConnection.
2025-10-02 18:53:32.521 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 18:53:32.521 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:32.522 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:32.522 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:53:32.522 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:32.522 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:32.523 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:53:32.546 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 18:53:32.553 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:53:32.554 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-10-02 18:53:32.554 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:32.554 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:53:32.565 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 18:53:32.572 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 18:53:32.572 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 18:53:32.573 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 18:53:32.574 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 18:53:32.649 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 18:53:32.656 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 18:53:32.668 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:32.669 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:32.669 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 18:53:32.669 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:32.669 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 18:53:32.670 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:53:32.726 +07:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 18:53:32.742 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 18:53:32.742 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 15ms reading results.
2025-10-02 18:53:32.742 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:53:32.742 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 18:57:44.792 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 18:57:44.794 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 18:57:44.795 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 18:57:44.798 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 18:57:44.800 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 18:57:44.921 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 252834.1206ms
2025-10-02 18:57:44.922 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 18:57:44.926 +07:00 [DBG] Connection id "0HNG1L93LHO9U" completed keep alive response.
2025-10-02 18:57:44.927 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 18:57:44.927 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 18:57:44.927 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 18:57:44.929 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 253047.5703ms
2025-10-02 18:57:50.661 +07:00 [DBG] Connection id "0HNG1L93LHO9U" received FIN.
2025-10-02 18:57:50.661 +07:00 [DBG] Connection id "0HNG1L93LHO9U" disconnecting.
2025-10-02 18:57:50.663 +07:00 [DBG] Connection id "0HNG1L93LHO9U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 18:57:50.676 +07:00 [DBG] Connection id "0HNG1L93LHO9U" stopped.
2025-10-02 19:03:28.123 +07:00 [INF] Application is shutting down...
2025-10-02 19:03:28.125 +07:00 [DBG] Hosting stopping
2025-10-02 19:03:28.135 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 19:03:28.157 +07:00 [DBG] Hosting stopped
2025-10-02 19:05:07.319 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 19:05:07.425 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 19:05:07.693 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:07.717 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:07.742 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:07.746 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:07.746 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:07.747 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:08.032 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:08.034 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:08.067 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:08.068 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:08.068 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:08.070 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:08.080 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:08.081 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:05:08.160 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 19:05:08.160 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 19:05:08.161 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 19:05:08.161 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 19:05:08.161 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 19:05:08.161 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 19:05:08.161 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 19:05:08.161 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 19:05:08.162 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 19:05:08.162 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 19:05:08.162 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 19:05:08.162 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 19:05:08.163 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 19:05:08.163 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 19:05:08.163 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 19:05:08.163 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 19:05:08.163 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 19:05:08.164 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 19:05:08.164 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 19:05:08.392 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:05:08.392 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:05:08.392 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:05:08.393 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:05:08.393 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:05:08.393 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:05:08.393 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:05:08.393 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:05:08.395 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:05:08.395 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:05:08.396 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:05:08.614 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 19:05:08.707 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 19:05:08.917 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:05:08.960 +07:00 [DBG] Creating DbConnection.
2025-10-02 19:05:08.980 +07:00 [DBG] Created DbConnection. (17ms).
2025-10-02 19:05:08.984 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.171 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.175 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:05:09.181 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-02 19:05:09.195 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2025-10-02 19:05:09.209 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:05:09.277 +07:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:05:09.326 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:05:09.354 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.362 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 80ms reading results.
2025-10-02 19:05:09.365 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.373 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (7ms).
2025-10-02 19:05:09.377 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.378 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.378 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:05:09.379 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.379 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.379 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:05:09.385 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:05:09.387 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:05:09.388 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.389 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 19:05:09.389 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.390 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:05:09.390 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.391 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.391 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:05:09.391 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.391 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.392 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:05:09.393 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:05:09.393 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:05:09.393 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.394 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:05:09.394 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.394 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:05:09.394 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.394 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.395 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:05:09.395 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.395 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.395 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:05:09.396 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:05:09.396 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:05:09.396 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.396 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:05:09.397 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.397 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:05:09.409 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 19:05:09.417 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:05:09.419 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.420 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.420 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:05:09.421 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.421 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.421 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:05:09.431 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:05:09.467 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:05:09.529 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.529 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 97ms reading results.
2025-10-02 19:05:09.529 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.530 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:05:09.534 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 19:05:09.544 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.545 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.545 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:05:09.545 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.545 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.545 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:05:09.549 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:05:09.549 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:05:09.550 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.550 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:05:09.550 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.550 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:05:09.551 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 19:05:09.551 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.552 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.553 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:05:09.554 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.555 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 19:05:09.556 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:05:09.561 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:05:09.562 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:05:09.563 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.563 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 19:05:09.563 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.563 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:05:09.565 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.565 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.565 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:05:09.566 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.566 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:09.566 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:05:09.568 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:05:09.571 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:05:09.572 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.574 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 19:05:09.575 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.576 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:05:09.576 +07:00 [INF] Data seeding completed successfully
2025-10-02 19:05:09.579 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 19:05:09.583 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:09.586 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 19:05:09.629 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 19:05:10.026 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 19:05:10.280 +07:00 [DBG] Hosting starting
2025-10-02 19:05:10.305 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 19:05:10.308 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 19:05:10.309 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 19:05:10.312 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 19:05:10.315 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 19:05:10.316 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 19:05:10.322 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 19:05:10.326 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 19:05:10.326 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 19:05:10.328 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 19:05:10.328 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 19:05:10.331 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 19:05:10.334 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 19:05:10.335 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 19:05:10.391 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 19:05:10.391 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 19:05:10.391 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 19:05:10.392 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 19:05:10.392 +07:00 [INF] Hosting environment: Development
2025-10-02 19:05:10.392 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 19:05:10.394 +07:00 [DBG] Hosting started
2025-10-02 19:05:10.553 +07:00 [DBG] Connection id "0HNG1LFNR0FU9" accepted.
2025-10-02 19:05:10.555 +07:00 [DBG] Connection id "0HNG1LFNR0FU9" started.
2025-10-02 19:05:10.684 +07:00 [DBG] Connection id "0HNG1LFNR0FUA" accepted.
2025-10-02 19:05:10.687 +07:00 [DBG] Connection id "0HNG1LFNR0FUA" started.
2025-10-02 19:05:10.881 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 19:05:10.912 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 19:05:11.273 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 19:05:11.319 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 19:05:11.320 +07:00 [DBG] Connection id "0HNG1LFNR0FU9" completed keep alive response.
2025-10-02 19:05:11.325 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 457.4163ms
2025-10-02 19:05:11.342 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 19:05:11.356 +07:00 [DBG] Connection id "0HNG1LFNR0FU9" completed keep alive response.
2025-10-02 19:05:11.357 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 15.0081ms
2025-10-02 19:05:11.544 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 19:05:12.095 +07:00 [DBG] Connection id "0HNG1LFNR0FU9" completed keep alive response.
2025-10-02 19:05:12.096 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 551.33ms
2025-10-02 19:05:27.665 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 19:05:27.667 +07:00 [DBG] POST requests are not supported
2025-10-02 19:05:27.669 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 19:05:27.669 +07:00 [DBG] POST requests are not supported
2025-10-02 19:05:27.671 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 19:05:27.671 +07:00 [INF] CORS policy execution successful.
2025-10-02 19:05:27.729 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:05:27.731 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:05:27.735 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:05:27.823 +07:00 [DBG] Successfully validated the token.
2025-10-02 19:05:27.825 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 19:05:27.832 +07:00 [DBG] Authorization was successful.
2025-10-02 19:05:27.839 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:05:27.860 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 19:05:27.864 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 19:05:27.865 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 19:05:27.866 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 19:05:27.866 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 19:05:27.867 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 19:05:27.869 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:05:28.007 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:05:28.028 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:05:28.045 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 19:05:28.055 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:05:28.056 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:05:28.056 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:05:28.056 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 19:05:28.075 +07:00 [DBG] Connection id "0HNG1LFNR0FU9", Request id "0HNG1LFNR0FU9:00000004": started reading request body.
2025-10-02 19:05:28.076 +07:00 [DBG] Connection id "0HNG1LFNR0FU9", Request id "0HNG1LFNR0FU9:00000004": done reading request body.
2025-10-02 19:05:28.091 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 19:05:28.092 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:05:28.093 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:05:28.094 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:05:28.145 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:05:28.148 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:05:28.150 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 19:05:28.152 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:05:28.152 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:05:28.153 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:05:28.153 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:05:28.158 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 19:05:28.162 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 19:05:28.261 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 19:05:28.269 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 19:05:28.283 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 19:05:28.340 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:05:28.348 +07:00 [DBG] Creating DbConnection.
2025-10-02 19:05:28.349 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 19:05:28.349 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:28.350 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:28.350 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:05:28.350 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:28.350 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:28.351 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:05:28.370 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:05:28.374 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:05:28.375 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 19:05:28.375 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:28.375 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:05:28.385 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 19:05:28.392 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 19:05:28.392 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 19:05:28.396 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 19:05:28.397 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 19:05:28.474 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 19:05:28.499 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 19:05:28.512 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:28.512 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:28.513 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:05:28.513 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:28.513 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:05:28.514 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:05:28.573 +07:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:05:28.587 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:05:28.587 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 13ms reading results.
2025-10-02 19:05:28.587 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:05:28.588 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:06:37.348 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 19:06:37.350 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 19:06:37.350 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 19:06:37.352 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 19:06:37.352 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 19:06:37.421 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 69545.3237ms
2025-10-02 19:06:37.422 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:06:37.426 +07:00 [DBG] Connection id "0HNG1LFNR0FU9" completed keep alive response.
2025-10-02 19:06:37.427 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 19:06:37.428 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:06:37.428 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 19:06:37.429 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 69758.1306ms
2025-10-02 19:07:22.186 +07:00 [DBG] Connection id "0HNG1LFNR0FUA" disconnecting.
2025-10-02 19:07:22.187 +07:00 [DBG] Connection id "0HNG1LFNR0FUA" stopped.
2025-10-02 19:07:22.189 +07:00 [DBG] Connection id "0HNG1LFNR0FUA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 19:08:48.805 +07:00 [DBG] Connection id "0HNG1LFNR0FU9" disconnecting.
2025-10-02 19:08:48.806 +07:00 [DBG] Connection id "0HNG1LFNR0FU9" stopped.
2025-10-02 19:08:48.806 +07:00 [DBG] Connection id "0HNG1LFNR0FU9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 19:22:42.348 +07:00 [INF] Application is shutting down...
2025-10-02 19:22:42.350 +07:00 [DBG] Hosting stopping
2025-10-02 19:22:42.360 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 19:22:42.383 +07:00 [DBG] Hosting stopped
2025-10-02 19:27:46.331 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 19:27:46.441 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 19:27:46.795 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:46.834 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:46.854 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:46.858 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:46.858 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:46.859 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:47.223 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:47.225 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:47.251 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:47.252 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:47.252 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:47.254 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:47.259 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:47.260 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:27:47.329 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 19:27:47.329 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 19:27:47.330 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 19:27:47.330 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 19:27:47.330 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 19:27:47.330 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 19:27:47.330 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 19:27:47.330 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 19:27:47.331 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 19:27:47.331 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 19:27:47.331 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 19:27:47.331 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 19:27:47.331 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 19:27:47.331 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 19:27:47.332 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 19:27:47.332 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 19:27:47.332 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 19:27:47.332 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 19:27:47.332 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 19:27:47.572 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:27:47.572 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:27:47.573 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:27:47.573 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:27:47.573 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:27:47.573 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:27:47.574 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:27:47.574 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:27:47.574 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:27:47.574 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:27:47.575 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:27:47.871 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 19:27:48.005 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 19:27:48.317 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:27:48.375 +07:00 [DBG] Creating DbConnection.
2025-10-02 19:27:48.402 +07:00 [DBG] Created DbConnection. (24ms).
2025-10-02 19:27:48.406 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.612 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.617 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:27:48.626 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-02 19:27:48.638 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-10-02 19:27:48.648 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:27:48.834 +07:00 [INF] Executed DbCommand (185ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:27:48.906 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:27:48.932 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.938 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 100ms reading results.
2025-10-02 19:27:48.941 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.948 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (6ms).
2025-10-02 19:27:48.951 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.952 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.952 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:27:48.952 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:48.953 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:48.953 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:27:48.958 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:27:48.959 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:27:48.960 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.960 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 19:27:48.961 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.961 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:27:48.962 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.963 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.963 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:27:48.963 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:48.964 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:48.964 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:27:48.966 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:27:48.966 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:27:48.967 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.967 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:27:48.967 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.967 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:27:48.968 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.968 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.968 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:27:48.968 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:48.968 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:48.968 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:27:48.970 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:27:48.970 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:27:48.970 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.970 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:27:48.971 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:48.971 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:27:48.986 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 19:27:48.998 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:27:49.001 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.001 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.001 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:27:49.001 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:49.001 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:49.001 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:27:49.009 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:27:49.066 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:27:49.119 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.119 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 109ms reading results.
2025-10-02 19:27:49.119 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.119 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:27:49.124 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 19:27:49.128 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.129 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.129 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:27:49.129 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:49.129 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:49.129 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:27:49.135 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:27:49.135 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:27:49.135 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.136 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:27:49.136 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.136 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:27:49.136 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 19:27:49.137 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.137 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.137 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:27:49.137 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:49.137 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:49.138 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:27:49.141 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:27:49.142 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:27:49.143 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.143 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 19:27:49.143 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.143 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:27:49.144 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.144 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.144 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:27:49.144 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:49.145 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:27:49.145 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:27:49.151 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:27:49.151 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:27:49.152 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.153 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 19:27:49.153 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.153 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:27:49.154 +07:00 [INF] Data seeding completed successfully
2025-10-02 19:27:49.156 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 19:27:49.158 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:27:49.160 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 19:27:49.193 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 19:27:49.620 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 19:27:49.964 +07:00 [DBG] Hosting starting
2025-10-02 19:27:49.982 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 19:27:49.985 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 19:27:49.986 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 19:27:49.996 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 19:27:50.002 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 19:27:50.003 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 19:27:50.014 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 19:27:50.021 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 19:27:50.022 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 19:27:50.026 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 19:27:50.030 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 19:27:50.035 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 19:27:50.040 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 19:27:50.042 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 19:27:50.289 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 19:27:50.289 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 19:27:50.289 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 19:27:50.290 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 19:27:50.290 +07:00 [INF] Hosting environment: Development
2025-10-02 19:27:50.290 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 19:27:50.295 +07:00 [DBG] Hosting started
2025-10-02 19:27:50.566 +07:00 [DBG] Connection id "0HNG1LSD53C1F" accepted.
2025-10-02 19:27:50.567 +07:00 [DBG] Connection id "0HNG1LSD53C1F" started.
2025-10-02 19:27:50.635 +07:00 [DBG] Connection id "0HNG1LSD53C1G" accepted.
2025-10-02 19:27:50.636 +07:00 [DBG] Connection id "0HNG1LSD53C1G" started.
2025-10-02 19:27:50.769 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 19:27:50.803 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 19:27:51.114 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 19:27:51.147 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 19:27:51.148 +07:00 [DBG] Connection id "0HNG1LSD53C1F" completed keep alive response.
2025-10-02 19:27:51.152 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 409.337ms
2025-10-02 19:27:51.244 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 19:27:51.250 +07:00 [DBG] Connection id "0HNG1LSD53C1F" completed keep alive response.
2025-10-02 19:27:51.251 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 5.8263ms
2025-10-02 19:27:51.791 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 19:27:52.250 +07:00 [DBG] Connection id "0HNG1LSD53C1F" completed keep alive response.
2025-10-02 19:27:52.251 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 460.1749ms
2025-10-02 19:27:59.069 +07:00 [DBG] Connection id "0HNG1LSD53C1G" received FIN.
2025-10-02 19:27:59.069 +07:00 [DBG] Connection id "0HNG1LSD53C1F" received FIN.
2025-10-02 19:27:59.071 +07:00 [DBG] Connection id "0HNG1LSD53C1F" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 19:27:59.071 +07:00 [DBG] Connection id "0HNG1LSD53C1G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 19:27:59.071 +07:00 [DBG] Connection id "0HNG1LSD53C1G" disconnecting.
2025-10-02 19:27:59.071 +07:00 [DBG] Connection id "0HNG1LSD53C1F" disconnecting.
2025-10-02 19:27:59.073 +07:00 [DBG] Connection id "0HNG1LSD53C1G" stopped.
2025-10-02 19:27:59.073 +07:00 [DBG] Connection id "0HNG1LSD53C1F" stopped.
2025-10-02 19:28:13.311 +07:00 [DBG] Connection id "0HNG1LSD53C1H" accepted.
2025-10-02 19:28:13.312 +07:00 [DBG] Connection id "0HNG1LSD53C1H" started.
2025-10-02 19:28:13.313 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 19:28:13.316 +07:00 [DBG] POST requests are not supported
2025-10-02 19:28:13.318 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 19:28:13.319 +07:00 [DBG] POST requests are not supported
2025-10-02 19:28:13.320 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 19:28:13.320 +07:00 [INF] CORS policy execution successful.
2025-10-02 19:28:13.405 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:28:13.406 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:28:13.407 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:28:13.506 +07:00 [DBG] Successfully validated the token.
2025-10-02 19:28:13.507 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 19:28:13.513 +07:00 [DBG] Authorization was successful.
2025-10-02 19:28:13.527 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:28:13.561 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 19:28:13.564 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 19:28:13.565 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 19:28:13.569 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 19:28:13.570 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 19:28:13.571 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 19:28:13.574 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:28:13.730 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:28:13.738 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:28:13.740 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 19:28:13.742 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:28:13.743 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:28:13.743 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:28:13.743 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 19:28:13.757 +07:00 [DBG] Connection id "0HNG1LSD53C1H", Request id "0HNG1LSD53C1H:00000001": started reading request body.
2025-10-02 19:28:13.757 +07:00 [DBG] Connection id "0HNG1LSD53C1H", Request id "0HNG1LSD53C1H:00000001": done reading request body.
2025-10-02 19:28:13.766 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 19:28:13.767 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:28:13.768 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:28:13.768 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:28:13.776 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:28:13.777 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:28:13.778 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 19:28:13.780 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:28:13.781 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:28:13.781 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:28:13.782 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:28:13.788 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 19:28:13.789 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 19:28:13.869 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 19:28:13.919 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 19:28:13.953 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 19:28:14.076 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:28:14.079 +07:00 [DBG] Creating DbConnection.
2025-10-02 19:28:14.080 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 19:28:14.080 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:28:14.081 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:28:14.082 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:28:14.082 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:28:14.084 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 19:28:14.086 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:28:14.132 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:28:14.149 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:28:14.150 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 17ms reading results.
2025-10-02 19:28:14.152 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:28:14.153 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:28:14.168 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 19:28:14.184 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 19:28:14.185 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 19:28:14.187 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 19:28:14.190 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 19:28:14.333 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 19:28:14.350 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 19:28:14.366 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:28:14.367 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:28:14.367 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:28:14.368 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:28:14.371 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-02 19:28:14.372 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:28:14.480 +07:00 [INF] Executed DbCommand (109ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:28:14.500 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:28:14.500 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 18ms reading results.
2025-10-02 19:28:14.501 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:28:14.501 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:28:57.219 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 19:28:57.221 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 19:28:57.221 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 19:28:57.227 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 19:28:57.227 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 19:28:57.300 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 43724.8513ms
2025-10-02 19:28:57.301 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:28:57.304 +07:00 [DBG] Connection id "0HNG1LSD53C1H" completed keep alive response.
2025-10-02 19:28:57.305 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 19:28:57.305 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:28:57.305 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 19:28:57.307 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 43991.5568ms
2025-10-02 19:28:59.128 +07:00 [DBG] Connection id "0HNG1LSD53C1H" received FIN.
2025-10-02 19:28:59.129 +07:00 [DBG] Connection id "0HNG1LSD53C1H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 19:28:59.129 +07:00 [DBG] Connection id "0HNG1LSD53C1H" disconnecting.
2025-10-02 19:28:59.129 +07:00 [DBG] Connection id "0HNG1LSD53C1H" stopped.
2025-10-02 19:33:45.310 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 19:33:45.448 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 19:33:45.809 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:45.839 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:45.860 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:45.866 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:45.867 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:45.870 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:46.133 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:46.134 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:46.171 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:46.172 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:46.172 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:46.174 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:46.185 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:46.186 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:33:46.266 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 19:33:46.266 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 19:33:46.267 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 19:33:46.267 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 19:33:46.267 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 19:33:46.267 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 19:33:46.267 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 19:33:46.267 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 19:33:46.268 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 19:33:46.268 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 19:33:46.268 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 19:33:46.268 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 19:33:46.269 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 19:33:46.269 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 19:33:46.269 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 19:33:46.269 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 19:33:46.269 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 19:33:46.269 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 19:33:46.269 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 19:33:46.463 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:33:46.463 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:33:46.464 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:33:46.464 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:33:46.464 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:33:46.465 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:33:46.465 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:33:46.465 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:33:46.466 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:33:46.466 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:33:46.466 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:33:46.675 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 19:33:46.755 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 19:33:46.962 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:33:47.015 +07:00 [DBG] Creating DbConnection.
2025-10-02 19:33:47.039 +07:00 [DBG] Created DbConnection. (21ms).
2025-10-02 19:33:47.042 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.215 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.219 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:33:47.228 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 19:33:47.238 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2025-10-02 19:33:47.249 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:33:47.319 +07:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:33:47.366 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:33:47.392 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.403 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 76ms reading results.
2025-10-02 19:33:47.407 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.415 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (7ms).
2025-10-02 19:33:47.419 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.420 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.420 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:33:47.420 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.421 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.421 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:33:47.429 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:33:47.431 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:33:47.432 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.432 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 19:33:47.433 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.433 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:33:47.434 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.434 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.434 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:33:47.434 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.434 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.434 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:33:47.436 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:33:47.436 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:33:47.436 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.436 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:33:47.437 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.437 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:33:47.437 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.438 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.438 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:33:47.438 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.438 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.438 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:33:47.439 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:33:47.440 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:33:47.440 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.440 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:33:47.440 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.440 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:33:47.454 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 19:33:47.468 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:33:47.470 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.471 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.471 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:33:47.471 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.471 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.471 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:33:47.490 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:33:47.538 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:33:47.585 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.585 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 95ms reading results.
2025-10-02 19:33:47.585 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.585 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:33:47.589 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 19:33:47.592 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.593 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.593 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:33:47.593 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.593 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.594 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:33:47.600 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:33:47.600 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:33:47.600 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.601 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:33:47.601 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.601 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:33:47.601 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 19:33:47.602 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.602 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.602 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:33:47.602 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.602 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.602 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:33:47.603 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:33:47.604 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:33:47.604 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.604 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:33:47.604 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.604 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:33:47.605 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.605 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.605 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:33:47.605 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.605 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:47.605 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:33:47.607 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:33:47.607 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:33:47.607 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.608 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:33:47.608 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.608 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:33:47.608 +07:00 [INF] Data seeding completed successfully
2025-10-02 19:33:47.611 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 19:33:47.616 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:47.617 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 19:33:47.639 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 19:33:47.889 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 19:33:48.164 +07:00 [DBG] Hosting starting
2025-10-02 19:33:48.182 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 19:33:48.186 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 19:33:48.187 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 19:33:48.195 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 19:33:48.202 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 19:33:48.203 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 19:33:48.214 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 19:33:48.222 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 19:33:48.223 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 19:33:48.226 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 19:33:48.229 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 19:33:48.235 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 19:33:48.240 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 19:33:48.241 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 19:33:48.323 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 19:33:48.324 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 19:33:48.324 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 19:33:48.325 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 19:33:48.325 +07:00 [INF] Hosting environment: Development
2025-10-02 19:33:48.325 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 19:33:48.328 +07:00 [DBG] Hosting started
2025-10-02 19:33:55.876 +07:00 [DBG] Connection id "0HNG1LVQ0UM66" accepted.
2025-10-02 19:33:55.880 +07:00 [DBG] Connection id "0HNG1LVQ0UM66" started.
2025-10-02 19:33:55.915 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 111
2025-10-02 19:33:55.919 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 19:33:55.944 +07:00 [DBG] POST requests are not supported
2025-10-02 19:33:55.945 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 19:33:55.946 +07:00 [DBG] POST requests are not supported
2025-10-02 19:33:55.947 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 19:33:55.947 +07:00 [INF] CORS policy execution successful.
2025-10-02 19:33:56.056 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:33:56.058 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:33:56.059 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:33:56.153 +07:00 [DBG] Successfully validated the token.
2025-10-02 19:33:56.155 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 19:33:56.161 +07:00 [DBG] Authorization was successful.
2025-10-02 19:33:56.168 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:33:56.187 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 19:33:56.190 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 19:33:56.191 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 19:33:56.193 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 19:33:56.194 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 19:33:56.194 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 19:33:56.196 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:33:56.318 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:33:56.327 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:33:56.329 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 19:33:56.332 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:33:56.332 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:33:56.333 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:33:56.333 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 19:33:56.386 +07:00 [DBG] Connection id "0HNG1LVQ0UM66", Request id "0HNG1LVQ0UM66:00000001": started reading request body.
2025-10-02 19:33:56.386 +07:00 [DBG] Connection id "0HNG1LVQ0UM66", Request id "0HNG1LVQ0UM66:00000001": done reading request body.
2025-10-02 19:33:56.395 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 19:33:56.396 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:33:56.396 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:33:56.396 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:33:56.413 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:33:56.414 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:33:56.415 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 19:33:56.416 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:33:56.416 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:33:56.416 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:33:56.417 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:33:56.420 +07:00 [INF] Processing AI suggestion for SubmissionId: 21
2025-10-02 19:33:56.423 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":21,"MaxSuggestions":10,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 19:33:56.509 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 19:33:56.518 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 19:33:56.534 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 19:33:56.599 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:33:56.602 +07:00 [DBG] Creating DbConnection.
2025-10-02 19:33:56.603 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 19:33:56.603 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:56.603 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:56.603 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:33:56.604 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:56.604 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:56.606 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:33:56.643 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:33:56.648 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:33:56.649 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 19:33:56.649 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:56.649 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:33:56.659 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 19:33:56.669 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 19:33:56.670 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 19:33:56.671 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 19:33:56.672 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 19:33:56.776 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 19:33:56.788 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 19:33:56.814 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:56.814 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:56.815 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:33:56.815 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:56.815 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:33:56.815 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:33:56.932 +07:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:33:56.965 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:33:56.965 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 32ms reading results.
2025-10-02 19:33:56.966 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:33:56.966 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:34:38.150 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 19:34:38.151 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 19:34:38.152 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 19:34:38.153 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 19:34:38.154 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 19:34:38.246 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 42046.7246ms
2025-10-02 19:34:38.247 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:34:38.254 +07:00 [DBG] Connection id "0HNG1LVQ0UM66" completed keep alive response.
2025-10-02 19:34:38.255 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 19:34:38.256 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:34:38.256 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 19:34:38.258 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 42342.301ms
2025-10-02 19:34:39.596 +07:00 [DBG] Connection id "0HNG1LVQ0UM66" received FIN.
2025-10-02 19:34:39.598 +07:00 [DBG] Connection id "0HNG1LVQ0UM66" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 19:34:39.599 +07:00 [DBG] Connection id "0HNG1LVQ0UM66" disconnecting.
2025-10-02 19:34:39.600 +07:00 [DBG] Connection id "0HNG1LVQ0UM66" stopped.
2025-10-02 19:38:33.300 +07:00 [DBG] Connection id "0HNG1LVQ0UM67" accepted.
2025-10-02 19:38:33.301 +07:00 [DBG] Connection id "0HNG1LVQ0UM67" started.
2025-10-02 19:38:33.302 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 19:38:33.303 +07:00 [DBG] POST requests are not supported
2025-10-02 19:38:33.303 +07:00 [DBG] POST requests are not supported
2025-10-02 19:38:33.304 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 19:38:33.304 +07:00 [INF] CORS policy execution successful.
2025-10-02 19:38:33.309 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:38:33.310 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:38:33.310 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:38:33.314 +07:00 [DBG] Successfully validated the token.
2025-10-02 19:38:33.314 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 19:38:33.317 +07:00 [DBG] Authorization was successful.
2025-10-02 19:38:33.318 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:38:33.319 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 19:38:33.320 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 19:38:33.320 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 19:38:33.320 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 19:38:33.320 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 19:38:33.321 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 19:38:33.321 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:38:33.325 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:38:33.326 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:38:33.327 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 19:38:33.327 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:38:33.327 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:38:33.327 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:38:33.328 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 19:38:33.328 +07:00 [DBG] Connection id "0HNG1LVQ0UM67", Request id "0HNG1LVQ0UM67:00000001": started reading request body.
2025-10-02 19:38:33.328 +07:00 [DBG] Connection id "0HNG1LVQ0UM67", Request id "0HNG1LVQ0UM67:00000001": done reading request body.
2025-10-02 19:38:33.328 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 19:38:33.328 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:38:33.328 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:38:33.328 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:38:33.329 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:38:33.329 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:38:33.329 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 19:38:33.329 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:38:33.329 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:38:33.329 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:38:33.329 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:38:33.330 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 19:38:33.330 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 19:38:33.348 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 19:38:33.350 +07:00 [DBG] Creating DbConnection.
2025-10-02 19:38:33.350 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 19:38:33.350 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:38:33.355 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:38:33.356 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:38:33.356 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:38:33.356 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:38:33.357 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:38:33.379 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:38:33.380 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:38:33.380 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:38:33.380 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:38:33.380 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:38:33.381 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:38:33.381 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:38:33.381 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:38:33.381 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:38:33.381 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:38:33.382 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:38:33.437 +07:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:38:33.440 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:38:33.440 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 19:38:33.441 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:38:33.441 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:38:56.760 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 19:38:56.760 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 19:38:56.760 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 19:38:56.761 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 19:38:56.761 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 19:38:56.762 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 23439.5834ms
2025-10-02 19:38:56.762 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:38:56.762 +07:00 [DBG] Connection id "0HNG1LVQ0UM67" completed keep alive response.
2025-10-02 19:38:56.763 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 19:38:56.763 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:38:56.763 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 19:38:56.763 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 23459.87ms
2025-10-02 19:39:05.016 +07:00 [DBG] Connection id "0HNG1LVQ0UM67" received FIN.
2025-10-02 19:39:05.017 +07:00 [DBG] Connection id "0HNG1LVQ0UM67" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 19:39:05.018 +07:00 [DBG] Connection id "0HNG1LVQ0UM67" disconnecting.
2025-10-02 19:39:05.018 +07:00 [DBG] Connection id "0HNG1LVQ0UM67" stopped.
2025-10-02 19:39:41.788 +07:00 [DBG] Connection id "0HNG1LVQ0UM68" accepted.
2025-10-02 19:39:41.788 +07:00 [DBG] Connection id "0HNG1LVQ0UM68" started.
2025-10-02 19:39:41.789 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 19:39:41.790 +07:00 [DBG] POST requests are not supported
2025-10-02 19:39:41.790 +07:00 [DBG] POST requests are not supported
2025-10-02 19:39:41.791 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 19:39:41.791 +07:00 [INF] CORS policy execution successful.
2025-10-02 19:39:41.791 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:39:41.791 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:39:41.791 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:39:41.800 +07:00 [DBG] Successfully validated the token.
2025-10-02 19:39:41.801 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 19:39:41.806 +07:00 [DBG] Authorization was successful.
2025-10-02 19:39:41.807 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:39:41.808 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 19:39:41.808 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 19:39:41.809 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 19:39:41.809 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 19:39:41.809 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 19:39:41.809 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 19:39:41.810 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:39:41.828 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:39:41.828 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:39:41.830 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 19:39:41.831 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:39:41.831 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:39:41.831 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:39:41.831 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 19:39:41.831 +07:00 [DBG] Connection id "0HNG1LVQ0UM68", Request id "0HNG1LVQ0UM68:00000001": started reading request body.
2025-10-02 19:39:41.831 +07:00 [DBG] Connection id "0HNG1LVQ0UM68", Request id "0HNG1LVQ0UM68:00000001": done reading request body.
2025-10-02 19:39:41.832 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 19:39:41.832 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:39:41.832 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:39:41.833 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:39:41.836 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:39:41.837 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:39:41.838 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 19:39:41.838 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:39:41.838 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:39:41.838 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:39:41.838 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:39:41.838 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 19:39:41.838 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 19:39:41.841 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 19:39:41.842 +07:00 [DBG] Creating DbConnection.
2025-10-02 19:39:41.842 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 19:39:41.842 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:39:41.842 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:39:41.842 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:39:41.842 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:39:41.842 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:39:41.842 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:39:41.877 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:39:41.877 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:39:41.877 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:39:41.877 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:39:41.877 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:39:41.880 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:39:41.881 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:39:41.881 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:39:41.881 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:39:41.882 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:39:41.882 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:39:41.963 +07:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:39:41.968 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:39:41.968 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 19:39:41.969 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:39:41.969 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:39:44.350 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 19:39:44.351 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 19:39:44.351 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 19:39:44.351 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 19:39:44.351 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 19:39:44.352 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2542.2181ms
2025-10-02 19:39:44.352 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:39:44.352 +07:00 [DBG] Connection id "0HNG1LVQ0UM68" completed keep alive response.
2025-10-02 19:39:44.352 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 19:39:44.353 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:39:44.353 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 19:39:44.353 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2563.6874ms
2025-10-02 19:39:45.095 +07:00 [DBG] Connection id "0HNG1LVQ0UM68" received FIN.
2025-10-02 19:39:45.096 +07:00 [DBG] Connection id "0HNG1LVQ0UM68" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 19:39:45.096 +07:00 [DBG] Connection id "0HNG1LVQ0UM68" disconnecting.
2025-10-02 19:39:45.096 +07:00 [DBG] Connection id "0HNG1LVQ0UM68" stopped.
2025-10-02 19:40:12.197 +07:00 [DBG] Connection id "0HNG1LVQ0UM69" accepted.
2025-10-02 19:40:12.197 +07:00 [DBG] Connection id "0HNG1LVQ0UM69" started.
2025-10-02 19:40:12.213 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 19:40:12.214 +07:00 [DBG] POST requests are not supported
2025-10-02 19:40:12.214 +07:00 [DBG] POST requests are not supported
2025-10-02 19:40:12.214 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 19:40:12.214 +07:00 [INF] CORS policy execution successful.
2025-10-02 19:40:12.215 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:40:12.215 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:40:12.215 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:40:12.218 +07:00 [DBG] Successfully validated the token.
2025-10-02 19:40:12.219 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 19:40:12.220 +07:00 [DBG] Authorization was successful.
2025-10-02 19:40:12.220 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:40:12.221 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 19:40:12.221 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 19:40:12.224 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 19:40:12.224 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 19:40:12.225 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 19:40:12.225 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 19:40:12.225 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:40:12.227 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:40:12.227 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:40:12.227 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 19:40:12.227 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:40:12.228 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:40:12.228 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:40:12.228 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 19:40:12.229 +07:00 [DBG] Connection id "0HNG1LVQ0UM69", Request id "0HNG1LVQ0UM69:00000001": started reading request body.
2025-10-02 19:40:12.229 +07:00 [DBG] Connection id "0HNG1LVQ0UM69", Request id "0HNG1LVQ0UM69:00000001": done reading request body.
2025-10-02 19:40:12.230 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 19:40:12.230 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:40:12.230 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:40:12.230 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:40:12.230 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:40:12.230 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:40:12.231 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 19:40:12.235 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:40:12.236 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:40:12.236 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:40:12.236 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:40:12.237 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 19:40:12.237 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 19:40:12.238 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 19:40:12.239 +07:00 [DBG] Creating DbConnection.
2025-10-02 19:40:12.239 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 19:40:12.239 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:40:12.240 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:40:12.240 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:40:12.240 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:40:12.240 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:40:12.240 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:40:12.250 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:40:12.250 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:40:12.250 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:40:12.251 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:40:12.251 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:40:12.252 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:40:12.252 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:40:12.252 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:40:12.252 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:40:12.252 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:40:12.252 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:40:12.320 +07:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:40:12.322 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:40:12.322 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 19:40:12.322 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:40:12.323 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:40:14.649 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 19:40:14.649 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 19:40:14.649 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 19:40:14.649 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 19:40:14.649 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 19:40:14.650 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2424.8201ms
2025-10-02 19:40:14.650 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:40:14.650 +07:00 [DBG] Connection id "0HNG1LVQ0UM69" completed keep alive response.
2025-10-02 19:40:14.651 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 19:40:14.651 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:40:14.651 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 19:40:14.651 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2437.6703ms
2025-10-02 19:40:15.142 +07:00 [DBG] Connection id "0HNG1LVQ0UM69" received FIN.
2025-10-02 19:40:15.145 +07:00 [DBG] Connection id "0HNG1LVQ0UM69" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 19:40:15.145 +07:00 [DBG] Connection id "0HNG1LVQ0UM69" disconnecting.
2025-10-02 19:40:15.146 +07:00 [DBG] Connection id "0HNG1LVQ0UM69" stopped.
2025-10-02 19:44:36.401 +07:00 [INF] Application is shutting down...
2025-10-02 19:44:36.402 +07:00 [DBG] Hosting stopping
2025-10-02 19:44:36.411 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 19:44:36.432 +07:00 [DBG] Hosting stopped
2025-10-02 19:59:28.203 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 19:59:28.307 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 19:59:28.580 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.607 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.635 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.637 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.638 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.639 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.905 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.906 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.936 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.937 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.937 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.939 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.947 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:28.947 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 19:59:29.000 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 19:59:29.001 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 19:59:29.001 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 19:59:29.001 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 19:59:29.001 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 19:59:29.001 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 19:59:29.001 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 19:59:29.002 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 19:59:29.002 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 19:59:29.002 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 19:59:29.002 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 19:59:29.002 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 19:59:29.002 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 19:59:29.003 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 19:59:29.003 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 19:59:29.003 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 19:59:29.003 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 19:59:29.003 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 19:59:29.003 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 19:59:29.176 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:59:29.177 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:59:29.177 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:59:29.177 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:59:29.177 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:59:29.178 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:59:29.178 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:59:29.178 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:59:29.178 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:59:29.178 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:59:29.179 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 19:59:29.397 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 19:59:29.470 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 19:59:29.633 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:59:29.671 +07:00 [DBG] Creating DbConnection.
2025-10-02 19:59:29.690 +07:00 [DBG] Created DbConnection. (15ms).
2025-10-02 19:59:29.696 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:29.847 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:29.850 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:59:29.856 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 19:59:29.864 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-10-02 19:59:29.871 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:59:29.927 +07:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:59:29.980 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:59:30.004 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.015 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 81ms reading results.
2025-10-02 19:59:30.018 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.026 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (7ms).
2025-10-02 19:59:30.030 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.032 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.032 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:59:30.032 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.033 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.033 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:59:30.036 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:59:30.036 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:59:30.037 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.037 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:59:30.037 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.037 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:59:30.038 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.038 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.038 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:59:30.038 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.039 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.039 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:59:30.040 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:59:30.041 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:59:30.041 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.041 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:59:30.042 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.042 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:59:30.043 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.043 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.043 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:59:30.043 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.044 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.044 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:59:30.046 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 19:59:30.046 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:59:30.046 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.046 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:59:30.047 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.047 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:59:30.055 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 19:59:30.064 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:59:30.065 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.066 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.066 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:59:30.066 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.066 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.066 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:59:30.076 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:59:30.108 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:59:30.147 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.147 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 70ms reading results.
2025-10-02 19:59:30.148 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.148 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:59:30.151 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 19:59:30.153 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.153 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.154 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:59:30.154 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.154 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.154 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:59:30.155 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:59:30.156 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:59:30.156 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.157 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 19:59:30.157 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.157 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:59:30.158 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 19:59:30.159 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.159 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.159 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:59:30.159 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.159 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.159 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:59:30.162 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:59:30.163 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:59:30.163 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.163 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:59:30.164 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.164 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:59:30.164 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.165 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.165 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:59:30.165 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.165 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:30.165 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:59:30.166 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 19:59:30.167 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 19:59:30.167 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.167 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 19:59:30.167 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.167 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:59:30.168 +07:00 [INF] Data seeding completed successfully
2025-10-02 19:59:30.169 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 19:59:30.172 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:30.174 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 19:59:30.196 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 19:59:30.421 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 19:59:30.574 +07:00 [DBG] Hosting starting
2025-10-02 19:59:30.584 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 19:59:30.586 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 19:59:30.587 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 19:59:30.592 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 19:59:30.595 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 19:59:30.595 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 19:59:30.600 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 19:59:30.603 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 19:59:30.604 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 19:59:30.606 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 19:59:30.608 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 19:59:30.612 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 19:59:30.614 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 19:59:30.615 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 19:59:30.670 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 19:59:30.670 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 19:59:30.670 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 19:59:30.670 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 19:59:30.670 +07:00 [INF] Hosting environment: Development
2025-10-02 19:59:30.670 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 19:59:30.672 +07:00 [DBG] Hosting started
2025-10-02 19:59:30.809 +07:00 [DBG] Connection id "0HNG1ME3F7LFB" accepted.
2025-10-02 19:59:30.814 +07:00 [DBG] Connection id "0HNG1ME3F7LFB" started.
2025-10-02 19:59:30.866 +07:00 [DBG] Connection id "0HNG1ME3F7LFC" accepted.
2025-10-02 19:59:30.868 +07:00 [DBG] Connection id "0HNG1ME3F7LFC" started.
2025-10-02 19:59:30.943 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 19:59:30.954 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 19:59:31.303 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 19:59:31.330 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 19:59:31.331 +07:00 [DBG] Connection id "0HNG1ME3F7LFB" completed keep alive response.
2025-10-02 19:59:31.362 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 397.1634ms
2025-10-02 19:59:31.391 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 19:59:31.397 +07:00 [DBG] Connection id "0HNG1ME3F7LFB" completed keep alive response.
2025-10-02 19:59:31.401 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 6.6982ms
2025-10-02 19:59:31.994 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 19:59:32.465 +07:00 [DBG] Connection id "0HNG1ME3F7LFB" completed keep alive response.
2025-10-02 19:59:32.465 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 472.006ms
2025-10-02 19:59:37.115 +07:00 [DBG] Connection id "0HNG1ME3F7LFB" received FIN.
2025-10-02 19:59:37.115 +07:00 [DBG] Connection id "0HNG1ME3F7LFC" received FIN.
2025-10-02 19:59:37.117 +07:00 [DBG] Connection id "0HNG1ME3F7LFC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 19:59:37.117 +07:00 [DBG] Connection id "0HNG1ME3F7LFB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 19:59:37.118 +07:00 [DBG] Connection id "0HNG1ME3F7LFB" disconnecting.
2025-10-02 19:59:37.118 +07:00 [DBG] Connection id "0HNG1ME3F7LFC" disconnecting.
2025-10-02 19:59:37.120 +07:00 [DBG] Connection id "0HNG1ME3F7LFB" stopped.
2025-10-02 19:59:37.120 +07:00 [DBG] Connection id "0HNG1ME3F7LFC" stopped.
2025-10-02 19:59:39.513 +07:00 [DBG] Connection id "0HNG1ME3F7LFD" accepted.
2025-10-02 19:59:39.513 +07:00 [DBG] Connection id "0HNG1ME3F7LFD" started.
2025-10-02 19:59:39.515 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 19:59:39.518 +07:00 [DBG] POST requests are not supported
2025-10-02 19:59:39.520 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 19:59:39.521 +07:00 [DBG] POST requests are not supported
2025-10-02 19:59:39.524 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 19:59:39.525 +07:00 [INF] CORS policy execution successful.
2025-10-02 19:59:39.608 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:59:39.609 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 19:59:39.610 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:59:39.725 +07:00 [DBG] Successfully validated the token.
2025-10-02 19:59:39.726 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 19:59:39.732 +07:00 [DBG] Authorization was successful.
2025-10-02 19:59:39.743 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 19:59:39.764 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 19:59:39.765 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 19:59:39.766 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 19:59:39.768 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 19:59:39.769 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 19:59:39.769 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 19:59:39.774 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:59:39.976 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 19:59:39.996 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:59:40.007 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 19:59:40.018 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:59:40.019 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:59:40.020 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 19:59:40.020 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 19:59:40.037 +07:00 [DBG] Connection id "0HNG1ME3F7LFD", Request id "0HNG1ME3F7LFD:00000001": started reading request body.
2025-10-02 19:59:40.037 +07:00 [DBG] Connection id "0HNG1ME3F7LFD", Request id "0HNG1ME3F7LFD:00000001": done reading request body.
2025-10-02 19:59:40.048 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 19:59:40.049 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:59:40.049 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:59:40.050 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 19:59:40.071 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 19:59:40.074 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:59:40.075 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 19:59:40.077 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:59:40.077 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:59:40.078 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 19:59:40.078 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 19:59:40.085 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 19:59:40.089 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 19:59:40.187 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 19:59:40.197 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 19:59:40.213 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 19:59:40.287 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 19:59:40.291 +07:00 [DBG] Creating DbConnection.
2025-10-02 19:59:40.292 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 19:59:40.292 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:40.292 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:40.293 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:59:40.293 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:40.293 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:40.294 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:59:40.323 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 19:59:40.327 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:59:40.328 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 19:59:40.328 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:40.328 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 19:59:40.339 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 19:59:40.356 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 19:59:40.356 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 19:59:40.357 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 19:59:40.358 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 19:59:40.439 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 19:59:40.449 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 19:59:40.458 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:40.458 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:40.458 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 19:59:40.458 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:40.458 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 19:59:40.459 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:59:40.544 +07:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 19:59:40.560 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 19:59:40.560 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 15ms reading results.
2025-10-02 19:59:40.561 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 19:59:40.561 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:00:07.423 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:00:07.424 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:00:07.425 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:00:07.427 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:00:07.427 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:00:07.510 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 27736.429ms
2025-10-02 20:00:07.511 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:00:07.514 +07:00 [DBG] Connection id "0HNG1ME3F7LFD" completed keep alive response.
2025-10-02 20:00:07.514 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:00:07.515 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:00:07.515 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:00:07.516 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 28000.0525ms
2025-10-02 20:00:17.179 +07:00 [DBG] Connection id "0HNG1ME3F7LFD" received FIN.
2025-10-02 20:00:17.180 +07:00 [DBG] Connection id "0HNG1ME3F7LFD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:00:17.180 +07:00 [DBG] Connection id "0HNG1ME3F7LFD" disconnecting.
2025-10-02 20:00:17.181 +07:00 [DBG] Connection id "0HNG1ME3F7LFD" stopped.
2025-10-02 20:01:04.823 +07:00 [DBG] Connection id "0HNG1ME3F7LFE" accepted.
2025-10-02 20:01:04.823 +07:00 [DBG] Connection id "0HNG1ME3F7LFE" started.
2025-10-02 20:01:04.824 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:01:04.825 +07:00 [DBG] POST requests are not supported
2025-10-02 20:01:04.825 +07:00 [DBG] POST requests are not supported
2025-10-02 20:01:04.826 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:01:04.826 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:01:04.850 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:01:04.852 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:01:04.863 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:01:04.867 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:01:04.867 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:01:04.872 +07:00 [DBG] Authorization was successful.
2025-10-02 20:01:04.873 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:01:04.874 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:01:04.874 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:01:04.874 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:01:04.874 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:01:04.874 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:01:04.875 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:01:04.875 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:01:04.877 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:01:04.878 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:01:04.878 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:01:04.879 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:01:04.879 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:01:04.879 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:01:04.879 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:01:04.879 +07:00 [DBG] Connection id "0HNG1ME3F7LFE", Request id "0HNG1ME3F7LFE:00000001": started reading request body.
2025-10-02 20:01:04.880 +07:00 [DBG] Connection id "0HNG1ME3F7LFE", Request id "0HNG1ME3F7LFE:00000001": done reading request body.
2025-10-02 20:01:04.880 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:01:04.880 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:01:04.880 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:01:04.880 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:01:04.881 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:01:04.881 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:01:04.881 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:01:04.881 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:01:04.882 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:01:04.882 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:01:04.882 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:01:04.882 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:01:04.883 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:01:04.899 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:01:04.903 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:01:04.904 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:01:04.905 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:04.905 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:04.905 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:01:04.905 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:01:04.906 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:01:04.906 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:01:04.931 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:01:04.932 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:01:04.932 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:01:04.932 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:04.933 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:01:04.935 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:04.936 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:04.936 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:01:04.936 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:01:04.937 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 20:01:04.938 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:01:05.022 +07:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:01:05.026 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:01:05.027 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 20:01:05.027 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:05.027 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:01:06.708 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:01:06.708 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:01:06.709 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:01:06.709 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:01:06.709 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:01:06.710 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1835.6141ms
2025-10-02 20:01:06.711 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:01:06.712 +07:00 [DBG] Connection id "0HNG1ME3F7LFE" completed keep alive response.
2025-10-02 20:01:06.712 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:01:06.713 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:06.713 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:01:06.713 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1888.542ms
2025-10-02 20:01:07.279 +07:00 [DBG] Connection id "0HNG1ME3F7LFE" received FIN.
2025-10-02 20:01:07.279 +07:00 [DBG] Connection id "0HNG1ME3F7LFE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:01:07.280 +07:00 [DBG] Connection id "0HNG1ME3F7LFE" disconnecting.
2025-10-02 20:01:07.280 +07:00 [DBG] Connection id "0HNG1ME3F7LFE" stopped.
2025-10-02 20:01:19.463 +07:00 [DBG] Connection id "0HNG1ME3F7LFF" accepted.
2025-10-02 20:01:19.464 +07:00 [DBG] Connection id "0HNG1ME3F7LFF" started.
2025-10-02 20:01:19.464 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:01:19.464 +07:00 [DBG] POST requests are not supported
2025-10-02 20:01:19.464 +07:00 [DBG] POST requests are not supported
2025-10-02 20:01:19.465 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:01:19.465 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:01:19.465 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:01:19.465 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:01:19.465 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:01:19.468 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:01:19.468 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:01:19.470 +07:00 [DBG] Authorization was successful.
2025-10-02 20:01:19.471 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:01:19.471 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:01:19.471 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:01:19.471 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:01:19.471 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:01:19.471 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:01:19.472 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:01:19.472 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:01:19.485 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:01:19.486 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:01:19.487 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:01:19.488 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:01:19.488 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:01:19.488 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:01:19.488 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:01:19.488 +07:00 [DBG] Connection id "0HNG1ME3F7LFF", Request id "0HNG1ME3F7LFF:00000001": started reading request body.
2025-10-02 20:01:19.488 +07:00 [DBG] Connection id "0HNG1ME3F7LFF", Request id "0HNG1ME3F7LFF:00000001": done reading request body.
2025-10-02 20:01:19.488 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:01:19.488 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:01:19.488 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:01:19.489 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:01:19.489 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:01:19.489 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:01:19.489 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:01:19.489 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:01:19.489 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:01:19.489 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:01:19.490 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:01:19.490 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:01:19.490 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:01:19.491 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:01:19.492 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:01:19.492 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:01:19.492 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:19.492 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:19.492 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:01:19.492 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:01:19.493 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:01:19.495 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:01:19.525 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:01:19.525 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:01:19.525 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:01:19.525 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:19.525 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:01:19.529 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:19.529 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:19.530 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:01:19.530 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:01:19.530 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:01:19.531 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:01:19.588 +07:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:01:19.590 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:01:19.590 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:01:19.590 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:19.590 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:01:21.431 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:01:21.431 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:01:21.431 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:01:21.432 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:01:21.432 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:01:21.433 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1960.9341ms
2025-10-02 20:01:21.433 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:01:21.433 +07:00 [DBG] Connection id "0HNG1ME3F7LFF" completed keep alive response.
2025-10-02 20:01:21.433 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:01:21.433 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:01:21.434 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:01:21.434 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1969.6469ms
2025-10-02 20:01:27.297 +07:00 [DBG] Connection id "0HNG1ME3F7LFF" received FIN.
2025-10-02 20:01:27.298 +07:00 [DBG] Connection id "0HNG1ME3F7LFF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:01:27.298 +07:00 [DBG] Connection id "0HNG1ME3F7LFF" disconnecting.
2025-10-02 20:01:27.298 +07:00 [DBG] Connection id "0HNG1ME3F7LFF" stopped.
2025-10-02 20:02:21.395 +07:00 [DBG] Connection id "0HNG1ME3F7LFG" accepted.
2025-10-02 20:02:21.396 +07:00 [DBG] Connection id "0HNG1ME3F7LFG" started.
2025-10-02 20:02:21.396 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:02:21.397 +07:00 [DBG] POST requests are not supported
2025-10-02 20:02:21.397 +07:00 [DBG] POST requests are not supported
2025-10-02 20:02:21.397 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:02:21.397 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:02:21.397 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:02:21.397 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:02:21.397 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:02:21.397 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:02:21.398 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:02:21.398 +07:00 [DBG] Authorization was successful.
2025-10-02 20:02:21.398 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:02:21.398 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:02:21.398 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:02:21.398 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:02:21.398 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:02:21.398 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:02:21.399 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:02:21.399 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:02:21.399 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:02:21.399 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:02:21.400 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:02:21.400 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:02:21.400 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:02:21.400 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:02:21.400 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:02:21.400 +07:00 [DBG] Connection id "0HNG1ME3F7LFG", Request id "0HNG1ME3F7LFG:00000001": started reading request body.
2025-10-02 20:02:21.400 +07:00 [DBG] Connection id "0HNG1ME3F7LFG", Request id "0HNG1ME3F7LFG:00000001": done reading request body.
2025-10-02 20:02:21.400 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:02:21.400 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:02:21.400 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:02:21.400 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:02:21.401 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:02:21.401 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:02:21.401 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:02:21.401 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:02:21.401 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:02:21.401 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:02:21.401 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:02:21.401 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:02:21.406 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:02:21.407 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:02:21.411 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:02:21.411 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:02:21.411 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:02:21.411 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:02:21.411 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:02:21.411 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:02:21.412 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:02:21.412 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:02:21.443 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:02:21.443 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:02:21.444 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:02:21.444 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:02:21.444 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:02:21.445 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:02:21.445 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:02:21.446 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:02:21.446 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:02:21.446 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:02:21.446 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:02:21.501 +07:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:02:21.502 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:02:21.502 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:02:21.503 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:02:21.503 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:02:23.265 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:02:23.265 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:02:23.266 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:02:23.266 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:02:23.266 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:02:23.267 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1867.9445ms
2025-10-02 20:02:23.267 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:02:23.267 +07:00 [DBG] Connection id "0HNG1ME3F7LFG" completed keep alive response.
2025-10-02 20:02:23.267 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:02:23.268 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:02:23.268 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:02:23.268 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1872.0576ms
2025-10-02 20:03:01.426 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:03:01.427 +07:00 [DBG] POST requests are not supported
2025-10-02 20:03:01.427 +07:00 [DBG] POST requests are not supported
2025-10-02 20:03:01.427 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:03:01.427 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:03:01.427 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:03:01.428 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:03:01.428 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:03:01.429 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:03:01.429 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:03:01.429 +07:00 [DBG] Authorization was successful.
2025-10-02 20:03:01.430 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:03:01.439 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:03:01.439 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:03:01.439 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:03:01.439 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:03:01.440 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:03:01.440 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:03:01.440 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:03:01.441 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:03:01.441 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:03:01.441 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:03:01.441 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:03:01.441 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:03:01.442 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:03:01.442 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:03:01.443 +07:00 [DBG] Connection id "0HNG1ME3F7LFG", Request id "0HNG1ME3F7LFG:00000002": started reading request body.
2025-10-02 20:03:01.444 +07:00 [DBG] Connection id "0HNG1ME3F7LFG", Request id "0HNG1ME3F7LFG:00000002": done reading request body.
2025-10-02 20:03:01.445 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:03:01.445 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:03:01.446 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:03:01.446 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:03:01.448 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:03:01.449 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:03:01.450 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:03:01.450 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:03:01.450 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:03:01.450 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:03:01.451 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:03:01.451 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:03:01.451 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:03:01.454 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:03:01.456 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:03:01.456 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:03:01.456 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:03:01.456 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:03:01.456 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:03:01.457 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:03:01.457 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:03:01.457 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:03:01.463 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:03:01.464 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:03:01.464 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:03:01.464 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:03:01.464 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:03:01.465 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:03:01.465 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:03:01.465 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:03:01.465 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:03:01.465 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:03:01.465 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:03:01.527 +07:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:03:01.528 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:03:01.528 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:03:01.529 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:03:01.529 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:03:03.436 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:03:03.436 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:03:03.436 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:03:03.436 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:03:03.436 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:03:03.447 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2006.9808ms
2025-10-02 20:03:03.447 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:03:03.447 +07:00 [DBG] Connection id "0HNG1ME3F7LFG" completed keep alive response.
2025-10-02 20:03:03.447 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:03:03.447 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:03:03.447 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:03:03.448 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2021.2686ms
2025-10-02 20:03:12.462 +07:00 [DBG] Connection id "0HNG1ME3F7LFG" received FIN.
2025-10-02 20:03:12.462 +07:00 [DBG] Connection id "0HNG1ME3F7LFG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:03:12.463 +07:00 [DBG] Connection id "0HNG1ME3F7LFG" disconnecting.
2025-10-02 20:03:12.463 +07:00 [DBG] Connection id "0HNG1ME3F7LFG" stopped.
2025-10-02 20:06:32.265 +07:00 [DBG] Connection id "0HNG1ME3F7LFH" accepted.
2025-10-02 20:06:32.266 +07:00 [DBG] Connection id "0HNG1ME3F7LFH" started.
2025-10-02 20:06:32.266 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:06:32.266 +07:00 [DBG] POST requests are not supported
2025-10-02 20:06:32.266 +07:00 [DBG] POST requests are not supported
2025-10-02 20:06:32.266 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:06:32.267 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:06:32.267 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:06:32.267 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:06:32.267 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:06:32.267 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:06:32.268 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:06:32.268 +07:00 [DBG] Authorization was successful.
2025-10-02 20:06:32.268 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:06:32.274 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:06:32.274 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:06:32.274 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:06:32.274 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:06:32.274 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:06:32.274 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:06:32.274 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:06:32.275 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:06:32.275 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:06:32.276 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:06:32.276 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:06:32.276 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:06:32.276 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:06:32.277 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:06:32.278 +07:00 [DBG] Connection id "0HNG1ME3F7LFH", Request id "0HNG1ME3F7LFH:00000001": started reading request body.
2025-10-02 20:06:32.278 +07:00 [DBG] Connection id "0HNG1ME3F7LFH", Request id "0HNG1ME3F7LFH:00000001": done reading request body.
2025-10-02 20:06:32.279 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:06:32.279 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:06:32.280 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:06:32.280 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:06:32.282 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:06:32.282 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:06:32.282 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:06:32.282 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:06:32.282 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:06:32.283 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:06:32.283 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:06:32.283 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:06:32.283 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:06:32.284 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:06:32.286 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:06:32.286 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:06:32.286 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:06:32.286 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:06:32.287 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:06:32.287 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:06:32.288 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-02 20:06:32.288 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:06:32.343 +07:00 [INF] Executed DbCommand (55ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:06:32.344 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:06:32.344 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:06:32.344 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:06:32.344 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:06:32.345 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:06:32.345 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:06:32.347 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:06:32.347 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:06:32.348 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:06:32.348 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:06:32.427 +07:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:06:32.430 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:06:32.431 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 20:06:32.431 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:06:32.431 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:06:34.488 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:06:34.488 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:06:34.488 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:06:34.488 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:06:34.488 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:06:34.504 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2229.175ms
2025-10-02 20:06:34.504 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:06:34.504 +07:00 [DBG] Connection id "0HNG1ME3F7LFH" completed keep alive response.
2025-10-02 20:06:34.504 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:06:34.504 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:06:34.505 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:06:34.505 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2238.4247ms
2025-10-02 20:06:37.894 +07:00 [DBG] Connection id "0HNG1ME3F7LFH" received FIN.
2025-10-02 20:06:37.895 +07:00 [DBG] Connection id "0HNG1ME3F7LFH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:06:37.895 +07:00 [DBG] Connection id "0HNG1ME3F7LFH" disconnecting.
2025-10-02 20:06:37.895 +07:00 [DBG] Connection id "0HNG1ME3F7LFH" stopped.
2025-10-02 20:07:10.747 +07:00 [INF] Application is shutting down...
2025-10-02 20:07:10.748 +07:00 [DBG] Hosting stopping
2025-10-02 20:07:10.755 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 20:07:10.760 +07:00 [DBG] Hosting stopped
2025-10-02 20:07:41.091 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 20:07:41.199 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 20:07:41.540 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:41.580 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:41.610 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:41.613 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:41.614 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:41.616 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:41.978 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:41.980 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:42.018 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:42.019 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:42.019 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:42.021 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:42.032 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:42.033 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 20:07:42.133 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 20:07:42.133 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 20:07:42.134 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 20:07:42.134 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 20:07:42.134 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 20:07:42.134 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 20:07:42.134 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 20:07:42.134 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 20:07:42.134 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 20:07:42.135 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 20:07:42.135 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 20:07:42.135 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 20:07:42.135 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 20:07:42.135 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 20:07:42.135 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 20:07:42.136 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 20:07:42.136 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 20:07:42.136 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 20:07:42.136 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 20:07:42.382 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 20:07:42.382 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 20:07:42.383 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 20:07:42.383 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 20:07:42.383 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 20:07:42.384 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 20:07:42.384 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 20:07:42.384 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 20:07:42.384 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 20:07:42.385 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 20:07:42.385 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 20:07:42.589 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:07:42.665 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 20:07:42.878 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 20:07:42.933 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:07:42.952 +07:00 [DBG] Created DbConnection. (16ms).
2025-10-02 20:07:42.957 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.110 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.113 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:07:43.119 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-02 20:07:43.126 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-10-02 20:07:43.133 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 20:07:43.182 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 20:07:43.255 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 20:07:43.286 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.297 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 107ms reading results.
2025-10-02 20:07:43.302 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.310 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (7ms).
2025-10-02 20:07:43.314 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.315 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.315 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:07:43.315 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.316 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.316 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 20:07:43.322 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 20:07:43.324 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 20:07:43.325 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.325 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 20:07:43.326 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.326 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:07:43.328 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.328 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.328 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:07:43.329 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.329 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.329 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 20:07:43.332 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 20:07:43.333 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 20:07:43.333 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.334 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:07:43.334 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.334 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:07:43.335 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.335 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.335 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:07:43.335 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.336 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.336 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 20:07:43.339 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 20:07:43.340 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 20:07:43.341 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.341 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:07:43.341 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.342 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:07:43.350 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 20:07:43.360 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 20:07:43.361 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.362 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.362 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:07:43.362 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.362 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.362 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 20:07:43.365 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 20:07:43.410 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 20:07:43.454 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.455 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 88ms reading results.
2025-10-02 20:07:43.455 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.455 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:07:43.460 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 20:07:43.466 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.467 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.467 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:07:43.467 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.467 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.468 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 20:07:43.474 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 20:07:43.475 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 20:07:43.475 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.476 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:07:43.476 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.477 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:07:43.477 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 20:07:43.478 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.478 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.478 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:07:43.479 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.479 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.479 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 20:07:43.483 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 20:07:43.483 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 20:07:43.484 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.485 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:07:43.485 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.485 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:07:43.486 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.486 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.486 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:07:43.486 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.486 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:07:43.486 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 20:07:43.493 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 20:07:43.494 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 20:07:43.495 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.495 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:07:43.495 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.495 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:07:43.496 +07:00 [INF] Data seeding completed successfully
2025-10-02 20:07:43.498 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:07:43.501 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:07:43.502 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 20:07:43.529 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 20:07:43.796 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 20:07:43.952 +07:00 [DBG] Hosting starting
2025-10-02 20:07:43.963 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 20:07:43.965 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 20:07:43.966 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 20:07:43.972 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 20:07:43.977 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 20:07:43.978 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 20:07:43.983 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 20:07:43.986 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 20:07:43.987 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 20:07:43.990 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 20:07:43.992 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 20:07:43.996 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 20:07:43.998 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 20:07:43.999 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 20:07:44.105 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 20:07:44.106 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 20:07:44.106 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 20:07:44.106 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 20:07:44.106 +07:00 [INF] Hosting environment: Development
2025-10-02 20:07:44.106 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 20:07:44.109 +07:00 [DBG] Hosting started
2025-10-02 20:07:44.266 +07:00 [DBG] Connection id "0HNG1MIMH6NV8" accepted.
2025-10-02 20:07:44.269 +07:00 [DBG] Connection id "0HNG1MIMH6NV8" started.
2025-10-02 20:07:44.332 +07:00 [DBG] Connection id "0HNG1MIMH6NV9" accepted.
2025-10-02 20:07:44.333 +07:00 [DBG] Connection id "0HNG1MIMH6NV9" started.
2025-10-02 20:07:44.431 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 20:07:44.452 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 20:07:44.727 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 20:07:44.763 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 20:07:44.764 +07:00 [DBG] Connection id "0HNG1MIMH6NV8" completed keep alive response.
2025-10-02 20:07:44.781 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 347.1488ms
2025-10-02 20:07:44.833 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 20:07:44.837 +07:00 [DBG] Connection id "0HNG1MIMH6NV8" completed keep alive response.
2025-10-02 20:07:44.840 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 7.3242ms
2025-10-02 20:07:44.976 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 20:07:45.528 +07:00 [DBG] Connection id "0HNG1MIMH6NV8" completed keep alive response.
2025-10-02 20:07:45.528 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 551.5433ms
2025-10-02 20:07:53.028 +07:00 [DBG] Connection id "0HNG1MIMH6NV9" received FIN.
2025-10-02 20:07:53.028 +07:00 [DBG] Connection id "0HNG1MIMH6NV8" received FIN.
2025-10-02 20:07:53.031 +07:00 [DBG] Connection id "0HNG1MIMH6NV9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:07:53.031 +07:00 [DBG] Connection id "0HNG1MIMH6NV8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:07:53.032 +07:00 [DBG] Connection id "0HNG1MIMH6NV8" disconnecting.
2025-10-02 20:07:53.032 +07:00 [DBG] Connection id "0HNG1MIMH6NV9" disconnecting.
2025-10-02 20:07:53.033 +07:00 [DBG] Connection id "0HNG1MIMH6NV9" stopped.
2025-10-02 20:07:53.033 +07:00 [DBG] Connection id "0HNG1MIMH6NV8" stopped.
2025-10-02 20:08:01.048 +07:00 [DBG] Connection id "0HNG1MIMH6NVA" accepted.
2025-10-02 20:08:01.048 +07:00 [DBG] Connection id "0HNG1MIMH6NVA" started.
2025-10-02 20:08:01.049 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:08:01.052 +07:00 [DBG] POST requests are not supported
2025-10-02 20:08:01.064 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 20:08:01.065 +07:00 [DBG] POST requests are not supported
2025-10-02 20:08:01.067 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:08:01.070 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:08:01.133 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:08:01.134 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:08:01.135 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:08:01.242 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:08:01.243 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:08:01.251 +07:00 [DBG] Authorization was successful.
2025-10-02 20:08:01.260 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:08:01.276 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:08:01.280 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:08:01.281 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:08:01.282 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:08:01.283 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:08:01.283 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:08:01.285 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:08:01.407 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:08:01.413 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:08:01.416 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:08:01.419 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:08:01.419 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:08:01.419 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:08:01.419 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:08:01.430 +07:00 [DBG] Connection id "0HNG1MIMH6NVA", Request id "0HNG1MIMH6NVA:00000001": started reading request body.
2025-10-02 20:08:01.431 +07:00 [DBG] Connection id "0HNG1MIMH6NVA", Request id "0HNG1MIMH6NVA:00000001": done reading request body.
2025-10-02 20:08:01.438 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:08:01.438 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:08:01.438 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:08:01.439 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:08:01.446 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:08:01.448 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:08:01.449 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:08:01.451 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:08:01.451 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:08:01.451 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:08:01.452 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:08:01.454 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:08:01.456 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:08:01.524 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:08:01.535 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-10-02 20:08:01.555 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 20:08:01.630 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.PotentialDuplicate (string), 36], [Property: Topic.Problem (string), 37], [Property: Topic.SemesterId (int) Required FK Index, 38], [Property: Topic.SupervisorId (int) Required FK Index, 39], [Property: Topic.VN_title (string), 40] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 20:08:01.633 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:08:01.634 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:08:01.634 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:08:01.634 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:08:01.635 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:08:01.635 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:08:01.635 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:08:01.636 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:08:01.667 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:08:01.672 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:08:01.672 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 5ms reading results.
2025-10-02 20:08:01.672 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:08:01.673 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:08:01.681 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-10-02 20:08:01.689 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-10-02 20:08:01.690 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-10-02 20:08:01.690 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-10-02 20:08:01.691 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-10-02 20:08:01.759 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-02 20:08:01.772 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 20:08:01.788 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:08:01.788 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:08:01.789 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:08:01.789 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:08:01.789 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:08:01.789 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:08:01.890 +07:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:08:01.909 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:08:01.910 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 18ms reading results.
2025-10-02 20:08:01.911 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:08:01.912 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-10-02 20:08:29.159 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:08:29.160 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:08:29.161 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:08:29.162 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:08:29.163 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:08:29.237 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 27950.5876ms
2025-10-02 20:08:29.238 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:08:29.240 +07:00 [DBG] Connection id "0HNG1MIMH6NVA" completed keep alive response.
2025-10-02 20:08:29.240 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:08:29.241 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:08:29.241 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:08:29.242 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 28191.6679ms
2025-10-02 20:08:33.102 +07:00 [DBG] Connection id "0HNG1MIMH6NVA" received FIN.
2025-10-02 20:08:33.102 +07:00 [DBG] Connection id "0HNG1MIMH6NVA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:08:33.103 +07:00 [DBG] Connection id "0HNG1MIMH6NVA" disconnecting.
2025-10-02 20:08:33.103 +07:00 [DBG] Connection id "0HNG1MIMH6NVA" stopped.
2025-10-02 20:10:35.292 +07:00 [DBG] Connection id "0HNG1MIMH6NVB" accepted.
2025-10-02 20:10:35.292 +07:00 [DBG] Connection id "0HNG1MIMH6NVB" started.
2025-10-02 20:10:35.293 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:10:35.293 +07:00 [DBG] POST requests are not supported
2025-10-02 20:10:35.293 +07:00 [DBG] POST requests are not supported
2025-10-02 20:10:35.294 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:10:35.294 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:10:35.295 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:10:35.295 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:10:35.296 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:10:35.301 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:10:35.301 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:10:35.307 +07:00 [DBG] Authorization was successful.
2025-10-02 20:10:35.309 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:10:35.325 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:10:35.328 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:10:35.328 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:10:35.329 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:10:35.329 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:10:35.330 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:10:35.330 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:10:35.334 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:10:35.335 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:10:35.335 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:10:35.335 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:10:35.335 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:10:35.336 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:10:35.336 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:10:35.337 +07:00 [DBG] Connection id "0HNG1MIMH6NVB", Request id "0HNG1MIMH6NVB:00000001": started reading request body.
2025-10-02 20:10:35.337 +07:00 [DBG] Connection id "0HNG1MIMH6NVB", Request id "0HNG1MIMH6NVB:00000001": done reading request body.
2025-10-02 20:10:35.340 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:10:35.340 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:10:35.340 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:10:35.341 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:10:35.344 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:10:35.344 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:10:35.345 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:10:35.345 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:10:35.345 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:10:35.345 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:10:35.345 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:10:35.346 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:10:35.346 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:10:35.363 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:10:35.365 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:10:35.365 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:10:35.365 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:10:35.366 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:10:35.366 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:10:35.366 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:10:35.366 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:10:35.366 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:10:35.398 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:10:35.398 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:10:35.399 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:10:35.399 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:10:35.399 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:10:35.400 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:10:35.401 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:10:35.401 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:10:35.401 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:10:35.401 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:10:35.401 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:10:35.476 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:10:35.481 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:10:35.481 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 20:10:35.481 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:10:35.481 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:10:37.529 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:10:37.529 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:10:37.530 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:10:37.530 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:10:37.530 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:10:37.551 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2221.3671ms
2025-10-02 20:10:37.552 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:10:37.552 +07:00 [DBG] Connection id "0HNG1MIMH6NVB" completed keep alive response.
2025-10-02 20:10:37.552 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:10:37.553 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:10:37.553 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:10:37.554 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2260.623ms
2025-10-02 20:10:43.285 +07:00 [DBG] Connection id "0HNG1MIMH6NVB" received FIN.
2025-10-02 20:10:43.286 +07:00 [DBG] Connection id "0HNG1MIMH6NVB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:10:43.289 +07:00 [DBG] Connection id "0HNG1MIMH6NVB" disconnecting.
2025-10-02 20:10:43.289 +07:00 [DBG] Connection id "0HNG1MIMH6NVB" stopped.
2025-10-02 20:17:55.022 +07:00 [DBG] Connection id "0HNG1MIMH6NVC" accepted.
2025-10-02 20:17:55.022 +07:00 [DBG] Connection id "0HNG1MIMH6NVC" started.
2025-10-02 20:17:55.022 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:17:55.023 +07:00 [DBG] POST requests are not supported
2025-10-02 20:17:55.023 +07:00 [DBG] POST requests are not supported
2025-10-02 20:17:55.023 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:17:55.024 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:17:55.024 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:17:55.024 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:17:55.024 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:17:55.028 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:17:55.041 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:17:55.059 +07:00 [DBG] Authorization was successful.
2025-10-02 20:17:55.061 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:17:55.071 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:17:55.071 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:17:55.072 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:17:55.072 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:17:55.072 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:17:55.072 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:17:55.072 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:17:55.080 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:17:55.081 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:17:55.081 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:17:55.081 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:17:55.081 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:17:55.081 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:17:55.081 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:17:55.083 +07:00 [DBG] Connection id "0HNG1MIMH6NVC", Request id "0HNG1MIMH6NVC:00000001": started reading request body.
2025-10-02 20:17:55.083 +07:00 [DBG] Connection id "0HNG1MIMH6NVC", Request id "0HNG1MIMH6NVC:00000001": done reading request body.
2025-10-02 20:17:55.085 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:17:55.085 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:17:55.085 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:17:55.086 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:17:55.087 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:17:55.088 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:17:55.088 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:17:55.088 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:17:55.088 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:17:55.089 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:17:55.089 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:17:55.089 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:17:55.090 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:17:55.095 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:17:55.096 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:17:55.097 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:17:55.097 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:17:55.114 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:17:55.114 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:17:55.114 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:17:55.114 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:17:55.114 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:17:55.145 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:17:55.146 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:17:55.146 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:17:55.146 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:17:55.146 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:17:55.148 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:17:55.148 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:17:55.148 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:17:55.148 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:17:55.148 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:17:55.148 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:17:55.254 +07:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:17:55.257 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:17:55.257 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 20:17:55.257 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:17:55.258 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:17:57.411 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:17:57.412 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:17:57.412 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:17:57.412 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:17:57.412 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:17:57.434 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2361.1999ms
2025-10-02 20:17:57.434 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:17:57.434 +07:00 [DBG] Connection id "0HNG1MIMH6NVC" completed keep alive response.
2025-10-02 20:17:57.435 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:17:57.435 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:17:57.435 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:17:57.436 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2413.1554ms
2025-10-02 20:18:14.787 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:18:14.787 +07:00 [DBG] POST requests are not supported
2025-10-02 20:18:14.787 +07:00 [DBG] POST requests are not supported
2025-10-02 20:18:14.787 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:18:14.787 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:18:14.796 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:18:14.796 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:18:14.796 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:18:14.796 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:18:14.797 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:18:14.797 +07:00 [DBG] Authorization was successful.
2025-10-02 20:18:14.798 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:18:14.798 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:18:14.798 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:18:14.799 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:18:14.799 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:18:14.799 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:18:14.799 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:18:14.799 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:18:14.800 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:18:14.800 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:18:14.800 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:18:14.800 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:18:14.800 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:18:14.800 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:18:14.800 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:18:14.801 +07:00 [DBG] Connection id "0HNG1MIMH6NVC", Request id "0HNG1MIMH6NVC:00000002": started reading request body.
2025-10-02 20:18:14.801 +07:00 [DBG] Connection id "0HNG1MIMH6NVC", Request id "0HNG1MIMH6NVC:00000002": done reading request body.
2025-10-02 20:18:14.801 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:18:14.801 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:18:14.801 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:18:14.801 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:18:14.801 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:18:14.802 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:18:14.802 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:18:14.802 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:18:14.802 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:18:14.803 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:18:14.803 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:18:14.803 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:18:14.804 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:18:14.805 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:18:14.808 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:18:14.808 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:18:14.808 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:18:14.809 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:18:14.809 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:18:14.809 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:18:14.809 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:18:14.810 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:18:14.849 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:18:14.850 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:18:14.850 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:18:14.850 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:18:14.850 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:18:14.850 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:18:14.850 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:18:14.851 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:18:14.851 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:18:14.851 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:18:14.851 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:18:14.926 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:18:14.928 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:18:14.928 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:18:14.928 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:18:14.928 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:18:16.586 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:18:16.586 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:18:16.586 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:18:16.586 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:18:16.586 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:18:16.587 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1788.1824ms
2025-10-02 20:18:16.587 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:18:16.587 +07:00 [DBG] Connection id "0HNG1MIMH6NVC" completed keep alive response.
2025-10-02 20:18:16.588 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:18:16.588 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:18:16.588 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:18:16.588 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1801.3151ms
2025-10-02 20:18:39.170 +07:00 [DBG] Connection id "0HNG1MIMH6NVC" received FIN.
2025-10-02 20:18:39.171 +07:00 [DBG] Connection id "0HNG1MIMH6NVC" disconnecting.
2025-10-02 20:18:39.171 +07:00 [DBG] Connection id "0HNG1MIMH6NVC" stopped.
2025-10-02 20:18:39.174 +07:00 [DBG] Connection id "0HNG1MIMH6NVC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:21:37.341 +07:00 [DBG] Connection id "0HNG1MIMH6NVD" accepted.
2025-10-02 20:21:37.341 +07:00 [DBG] Connection id "0HNG1MIMH6NVD" started.
2025-10-02 20:21:37.342 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:21:37.342 +07:00 [DBG] POST requests are not supported
2025-10-02 20:21:37.342 +07:00 [DBG] POST requests are not supported
2025-10-02 20:21:37.342 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:21:37.342 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:21:37.342 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:21:37.342 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:21:37.343 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:21:37.343 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:21:37.344 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:21:37.344 +07:00 [DBG] Authorization was successful.
2025-10-02 20:21:37.344 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:21:37.380 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:21:37.380 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:21:37.381 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:21:37.381 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:21:37.381 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:21:37.381 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:21:37.381 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:21:37.382 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:21:37.382 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:21:37.382 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:21:37.382 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:21:37.382 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:21:37.382 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:21:37.382 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:21:37.383 +07:00 [DBG] Connection id "0HNG1MIMH6NVD", Request id "0HNG1MIMH6NVD:00000001": started reading request body.
2025-10-02 20:21:37.383 +07:00 [DBG] Connection id "0HNG1MIMH6NVD", Request id "0HNG1MIMH6NVD:00000001": done reading request body.
2025-10-02 20:21:37.384 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:21:37.385 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:21:37.385 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:21:37.385 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:21:37.386 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:21:37.386 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:21:37.386 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:21:37.386 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:21:37.386 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:21:37.386 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:21:37.386 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:21:37.386 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:21:37.386 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:21:37.388 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:21:37.390 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:21:37.390 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:21:37.390 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:21:37.390 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:21:37.391 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:21:37.391 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:21:37.391 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:21:37.391 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:21:37.416 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:21:37.417 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:21:37.417 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:21:37.417 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:21:37.417 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:21:37.418 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:21:37.418 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:21:37.418 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:21:37.418 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:21:37.419 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:21:37.419 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:21:37.493 +07:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:21:37.496 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:21:37.496 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 20:21:37.496 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:21:37.496 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:21:46.310 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:21:46.310 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:21:46.311 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:21:46.311 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:21:46.311 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:21:46.342 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 8960.9982ms
2025-10-02 20:21:46.343 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:21:46.344 +07:00 [DBG] Connection id "0HNG1MIMH6NVD" completed keep alive response.
2025-10-02 20:21:46.345 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:21:46.345 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:21:46.346 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:21:46.346 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 9003.8936ms
2025-10-02 20:23:17.857 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:23:17.858 +07:00 [DBG] POST requests are not supported
2025-10-02 20:23:17.858 +07:00 [DBG] POST requests are not supported
2025-10-02 20:23:17.858 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:23:17.858 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:23:17.864 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:23:17.864 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:23:17.864 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:23:17.865 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:23:17.865 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:23:17.865 +07:00 [DBG] Authorization was successful.
2025-10-02 20:23:17.866 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:23:17.866 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:23:17.866 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:23:17.866 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:23:17.866 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:23:17.866 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:23:17.866 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:23:17.866 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:23:17.867 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:23:17.867 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:23:17.867 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:23:17.867 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:23:17.867 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:23:17.868 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:23:17.868 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:23:17.868 +07:00 [DBG] Connection id "0HNG1MIMH6NVD", Request id "0HNG1MIMH6NVD:00000002": started reading request body.
2025-10-02 20:23:17.868 +07:00 [DBG] Connection id "0HNG1MIMH6NVD", Request id "0HNG1MIMH6NVD:00000002": done reading request body.
2025-10-02 20:23:17.868 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:23:17.868 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:23:17.868 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:23:17.868 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:23:17.869 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:23:17.869 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:23:17.869 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:23:17.869 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:23:17.869 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:23:17.869 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:23:17.869 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:23:17.869 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:23:17.870 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:23:17.872 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:23:17.873 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:23:17.873 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:23:17.873 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:23:17.873 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:23:17.873 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:23:17.874 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:23:17.874 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:23:17.874 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:23:17.889 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:23:17.890 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:23:17.890 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:23:17.890 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:23:17.890 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:23:17.891 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:23:17.891 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:23:17.891 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:23:17.891 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:23:17.891 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:23:17.891 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:23:17.953 +07:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:23:17.954 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:23:17.955 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:23:17.955 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:23:17.955 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:23:21.532 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:23:21.533 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:23:21.533 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:23:21.533 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:23:21.533 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:23:21.534 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3667.4562ms
2025-10-02 20:23:21.534 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:23:21.534 +07:00 [DBG] Connection id "0HNG1MIMH6NVD" completed keep alive response.
2025-10-02 20:23:21.534 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:23:21.534 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:23:21.535 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:23:21.535 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3677.4087ms
2025-10-02 20:25:31.945 +07:00 [DBG] Connection id "0HNG1MIMH6NVD" disconnecting.
2025-10-02 20:25:31.945 +07:00 [DBG] Connection id "0HNG1MIMH6NVD" stopped.
2025-10-02 20:25:31.945 +07:00 [DBG] Connection id "0HNG1MIMH6NVD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:26:51.401 +07:00 [DBG] Connection id "0HNG1MIMH6NVE" accepted.
2025-10-02 20:26:51.401 +07:00 [DBG] Connection id "0HNG1MIMH6NVE" started.
2025-10-02 20:26:51.402 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:26:51.402 +07:00 [DBG] POST requests are not supported
2025-10-02 20:26:51.402 +07:00 [DBG] POST requests are not supported
2025-10-02 20:26:51.402 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:26:51.402 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:26:51.402 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:26:51.402 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:26:51.403 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:26:51.403 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:26:51.403 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:26:51.403 +07:00 [DBG] Authorization was successful.
2025-10-02 20:26:51.404 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:26:51.422 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:26:51.422 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:26:51.423 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:26:51.423 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:26:51.423 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:26:51.423 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:26:51.424 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:26:51.425 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:26:51.426 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:26:51.426 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:26:51.430 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:26:51.430 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:26:51.431 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:26:51.431 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:26:51.432 +07:00 [DBG] Connection id "0HNG1MIMH6NVE", Request id "0HNG1MIMH6NVE:00000001": started reading request body.
2025-10-02 20:26:51.432 +07:00 [DBG] Connection id "0HNG1MIMH6NVE", Request id "0HNG1MIMH6NVE:00000001": done reading request body.
2025-10-02 20:26:51.433 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:26:51.433 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:26:51.433 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:26:51.433 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:26:51.435 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:26:51.435 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:26:51.435 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:26:51.435 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:26:51.435 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:26:51.435 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:26:51.435 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:26:51.435 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:26:51.435 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:26:51.437 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:26:51.441 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:26:51.442 +07:00 [DBG] Created DbConnection. (1ms).
2025-10-02 20:26:51.444 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:26:51.446 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:26:51.447 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:26:51.447 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:26:51.447 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:26:51.448 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:26:51.460 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:26:51.460 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:26:51.460 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:26:51.461 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:26:51.461 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:26:51.461 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:26:51.461 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:26:51.461 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:26:51.461 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:26:51.461 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:26:51.461 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:26:51.509 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:26:51.511 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:26:51.511 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:26:51.511 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:26:51.511 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:26:55.292 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:26:55.292 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:26:55.292 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:26:55.292 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:26:55.292 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:26:55.299 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3876.1805ms
2025-10-02 20:26:55.299 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:26:55.300 +07:00 [DBG] Connection id "0HNG1MIMH6NVE" completed keep alive response.
2025-10-02 20:26:55.300 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:26:55.300 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:26:55.300 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:26:55.300 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3897.9881ms
2025-10-02 20:28:01.444 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:28:01.445 +07:00 [DBG] POST requests are not supported
2025-10-02 20:28:01.448 +07:00 [DBG] POST requests are not supported
2025-10-02 20:28:01.448 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:28:01.448 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:28:01.475 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:28:01.475 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:28:01.475 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:28:01.476 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:28:01.476 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:28:01.476 +07:00 [DBG] Authorization was successful.
2025-10-02 20:28:01.477 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:28:01.477 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:28:01.477 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:28:01.477 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:28:01.477 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:28:01.477 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:28:01.477 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:28:01.477 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:28:01.478 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:28:01.478 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:28:01.478 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:28:01.478 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:28:01.478 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:28:01.478 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:28:01.478 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:28:01.479 +07:00 [DBG] Connection id "0HNG1MIMH6NVE", Request id "0HNG1MIMH6NVE:00000002": started reading request body.
2025-10-02 20:28:01.481 +07:00 [DBG] Connection id "0HNG1MIMH6NVE", Request id "0HNG1MIMH6NVE:00000002": done reading request body.
2025-10-02 20:28:01.481 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:28:01.481 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:28:01.482 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:28:01.482 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:28:01.484 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:28:01.485 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:28:01.487 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:28:01.487 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:28:01.488 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:28:01.488 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:28:01.488 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:28:01.488 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:28:01.489 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:28:01.490 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:28:01.491 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:28:01.491 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:28:01.491 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:01.491 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:01.491 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:28:01.491 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:28:01.491 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:28:01.491 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:28:01.503 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:28:01.503 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:28:01.504 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:28:01.504 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:01.504 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:28:01.504 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:01.505 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:01.505 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:28:01.505 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:28:01.505 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:28:01.505 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:28:01.568 +07:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:28:01.570 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:28:01.570 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:28:01.570 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:01.570 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:28:04.538 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:28:04.538 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:28:04.538 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:28:04.538 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:28:04.538 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:28:04.539 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3061.5552ms
2025-10-02 20:28:04.539 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:28:04.539 +07:00 [DBG] Connection id "0HNG1MIMH6NVE" completed keep alive response.
2025-10-02 20:28:04.539 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:28:04.540 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:04.540 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:28:04.540 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3095.5865ms
2025-10-02 20:28:40.319 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:28:40.319 +07:00 [DBG] POST requests are not supported
2025-10-02 20:28:40.319 +07:00 [DBG] POST requests are not supported
2025-10-02 20:28:40.319 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:28:40.319 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:28:40.319 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:28:40.319 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:28:40.320 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:28:40.320 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:28:40.320 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:28:40.321 +07:00 [DBG] Authorization was successful.
2025-10-02 20:28:40.321 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:28:40.321 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:28:40.321 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:28:40.321 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:28:40.321 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:28:40.322 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:28:40.322 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:28:40.322 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:28:40.323 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:28:40.323 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:28:40.323 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:28:40.323 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:28:40.323 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:28:40.323 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:28:40.323 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:28:40.324 +07:00 [DBG] Connection id "0HNG1MIMH6NVE", Request id "0HNG1MIMH6NVE:00000003": started reading request body.
2025-10-02 20:28:40.324 +07:00 [DBG] Connection id "0HNG1MIMH6NVE", Request id "0HNG1MIMH6NVE:00000003": done reading request body.
2025-10-02 20:28:40.324 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:28:40.324 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:28:40.324 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:28:40.324 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:28:40.324 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:28:40.324 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:28:40.324 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:28:40.324 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:28:40.324 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:28:40.324 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:28:40.324 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:28:40.325 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:28:40.325 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:28:40.326 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:28:40.327 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:28:40.330 +07:00 [DBG] Created DbConnection. (3ms).
2025-10-02 20:28:40.330 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:40.331 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:40.331 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:28:40.331 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:28:40.331 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:28:40.331 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:28:40.366 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:28:40.367 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:28:40.367 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:28:40.367 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:40.367 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:28:40.368 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:40.368 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:40.368 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:28:40.368 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:28:40.368 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:28:40.368 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:28:40.418 +07:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:28:40.420 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:28:40.420 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:28:40.420 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:40.420 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:28:45.420 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:28:45.420 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:28:45.420 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:28:45.421 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:28:45.421 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:28:45.421 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5099.1165ms
2025-10-02 20:28:45.422 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:28:45.422 +07:00 [DBG] Connection id "0HNG1MIMH6NVE" completed keep alive response.
2025-10-02 20:28:45.422 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:28:45.422 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:28:45.422 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:28:45.422 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 5103.2031ms
2025-10-02 20:30:56.393 +07:00 [DBG] Connection id "0HNG1MIMH6NVE" disconnecting.
2025-10-02 20:30:56.393 +07:00 [DBG] Connection id "0HNG1MIMH6NVE" stopped.
2025-10-02 20:30:56.394 +07:00 [DBG] Connection id "0HNG1MIMH6NVE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:32:07.288 +07:00 [DBG] Connection id "0HNG1MIMH6NVF" accepted.
2025-10-02 20:32:07.288 +07:00 [DBG] Connection id "0HNG1MIMH6NVF" started.
2025-10-02 20:32:07.289 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:32:07.289 +07:00 [DBG] POST requests are not supported
2025-10-02 20:32:07.289 +07:00 [DBG] POST requests are not supported
2025-10-02 20:32:07.289 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:32:07.289 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:32:07.289 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:32:07.290 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:32:07.290 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:32:07.291 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:32:07.291 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:32:07.291 +07:00 [DBG] Authorization was successful.
2025-10-02 20:32:07.291 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:32:07.298 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:32:07.299 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:32:07.299 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:32:07.299 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:32:07.299 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:32:07.299 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:32:07.299 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:32:07.300 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:32:07.302 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:32:07.302 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:32:07.303 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:32:07.303 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:32:07.303 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:32:07.303 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:32:07.304 +07:00 [DBG] Connection id "0HNG1MIMH6NVF", Request id "0HNG1MIMH6NVF:00000001": started reading request body.
2025-10-02 20:32:07.304 +07:00 [DBG] Connection id "0HNG1MIMH6NVF", Request id "0HNG1MIMH6NVF:00000001": done reading request body.
2025-10-02 20:32:07.310 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:32:07.310 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:32:07.310 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:32:07.310 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:32:07.316 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:32:07.316 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:32:07.317 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:32:07.317 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:32:07.317 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:32:07.317 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:32:07.318 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:32:07.320 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:32:07.321 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:32:07.330 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:32:07.332 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:32:07.332 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:32:07.332 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:32:07.333 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:32:07.333 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:32:07.333 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:32:07.333 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:32:07.333 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:32:07.342 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:32:07.343 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:32:07.343 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:32:07.343 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:32:07.343 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:32:07.344 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:32:07.344 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:32:07.344 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:32:07.344 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:32:07.344 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:32:07.344 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:32:07.409 +07:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:32:07.410 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:32:07.410 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:32:07.410 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:32:07.411 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:32:11.271 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:32:11.271 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:32:11.272 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:32:11.272 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:32:11.272 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:32:11.278 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3979.4045ms
2025-10-02 20:32:11.279 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:32:11.279 +07:00 [DBG] Connection id "0HNG1MIMH6NVF" completed keep alive response.
2025-10-02 20:32:11.279 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:32:11.279 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:32:11.279 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:32:11.279 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3990.5169ms
2025-10-02 20:34:18.545 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:34:18.546 +07:00 [DBG] POST requests are not supported
2025-10-02 20:34:18.546 +07:00 [DBG] POST requests are not supported
2025-10-02 20:34:18.546 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:34:18.546 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:34:18.546 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:34:18.546 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:34:18.546 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:34:18.547 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:34:18.547 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:34:18.547 +07:00 [DBG] Authorization was successful.
2025-10-02 20:34:18.548 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:34:18.560 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:34:18.561 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:34:18.561 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:34:18.561 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:34:18.561 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:34:18.562 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:34:18.562 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:34:18.562 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:34:18.562 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:34:18.563 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:34:18.564 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:34:18.564 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:34:18.564 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:34:18.565 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:34:18.568 +07:00 [DBG] Connection id "0HNG1MIMH6NVF", Request id "0HNG1MIMH6NVF:00000002": started reading request body.
2025-10-02 20:34:18.569 +07:00 [DBG] Connection id "0HNG1MIMH6NVF", Request id "0HNG1MIMH6NVF:00000002": done reading request body.
2025-10-02 20:34:18.571 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:34:18.571 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:34:18.571 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:34:18.573 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:34:18.586 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:34:18.586 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:34:18.586 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:34:18.586 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:34:18.586 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:34:18.587 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:34:18.587 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:34:18.588 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:34:18.588 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:34:18.590 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:34:18.591 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:34:18.591 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:34:18.591 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:18.591 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:18.592 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:34:18.592 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:34:18.592 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:34:18.592 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:34:18.601 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:34:18.601 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:34:18.601 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:34:18.601 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:18.601 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:34:18.602 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:18.602 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:18.602 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:34:18.602 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:34:18.603 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:34:18.603 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:34:18.654 +07:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:34:18.655 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:34:18.656 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:34:18.656 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:18.656 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:34:21.705 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:34:21.705 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:34:21.706 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:34:21.706 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:34:21.706 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:34:21.712 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3150.5882ms
2025-10-02 20:34:21.713 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:34:21.713 +07:00 [DBG] Connection id "0HNG1MIMH6NVF" completed keep alive response.
2025-10-02 20:34:21.713 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:34:21.713 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:21.713 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:34:21.713 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3167.7117ms
2025-10-02 20:34:48.174 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:34:48.174 +07:00 [DBG] POST requests are not supported
2025-10-02 20:34:48.174 +07:00 [DBG] POST requests are not supported
2025-10-02 20:34:48.174 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:34:48.174 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:34:48.182 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:34:48.183 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:34:48.183 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:34:48.184 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:34:48.184 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:34:48.184 +07:00 [DBG] Authorization was successful.
2025-10-02 20:34:48.184 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:34:48.184 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:34:48.184 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:34:48.185 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:34:48.185 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:34:48.185 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:34:48.185 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:34:48.185 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:34:48.186 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:34:48.186 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:34:48.186 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:34:48.186 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:34:48.186 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:34:48.186 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:34:48.186 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:34:48.187 +07:00 [DBG] Connection id "0HNG1MIMH6NVF", Request id "0HNG1MIMH6NVF:00000003": started reading request body.
2025-10-02 20:34:48.187 +07:00 [DBG] Connection id "0HNG1MIMH6NVF", Request id "0HNG1MIMH6NVF:00000003": done reading request body.
2025-10-02 20:34:48.187 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:34:48.187 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:34:48.187 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:34:48.187 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:34:48.187 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:34:48.187 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:34:48.188 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:34:48.188 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:34:48.188 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:34:48.188 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:34:48.188 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:34:48.188 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:34:48.189 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:34:48.192 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:34:48.194 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:34:48.194 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:34:48.194 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:48.195 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:48.195 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:34:48.195 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:34:48.195 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:34:48.196 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:34:48.208 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:34:48.209 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:34:48.209 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:34:48.210 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:48.210 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:34:48.213 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:48.215 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:48.216 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:34:48.216 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:34:48.216 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:34:48.216 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:34:48.281 +07:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:34:48.283 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:34:48.283 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 20:34:48.283 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:48.283 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:34:52.894 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:34:52.894 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:34:52.894 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:34:52.894 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:34:52.894 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:34:52.895 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 4709.7372ms
2025-10-02 20:34:52.895 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:34:52.895 +07:00 [DBG] Connection id "0HNG1MIMH6NVF" completed keep alive response.
2025-10-02 20:34:52.895 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:34:52.895 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:34:52.895 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:34:52.895 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 4721.663ms
2025-10-02 20:36:21.926 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-10-02 20:36:21.927 +07:00 [DBG] POST requests are not supported
2025-10-02 20:36:21.927 +07:00 [DBG] POST requests are not supported
2025-10-02 20:36:21.927 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 20:36:21.927 +07:00 [INF] CORS policy execution successful.
2025-10-02 20:36:21.927 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:36:21.927 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-10-02 20:36:21.927 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:36:21.928 +07:00 [DBG] Successfully validated the token.
2025-10-02 20:36:21.928 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 20:36:21.928 +07:00 [DBG] Authorization was successful.
2025-10-02 20:36:21.928 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:36:21.928 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-10-02 20:36:21.928 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 20:36:21.928 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 20:36:21.928 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 20:36:21.928 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 20:36:21.928 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 20:36:21.928 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:36:21.929 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-10-02 20:36:21.929 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:36:21.929 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-10-02 20:36:21.929 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:36:21.929 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:36:21.929 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 20:36:21.929 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 20:36:21.929 +07:00 [DBG] Connection id "0HNG1MIMH6NVF", Request id "0HNG1MIMH6NVF:00000004": started reading request body.
2025-10-02 20:36:21.929 +07:00 [DBG] Connection id "0HNG1MIMH6NVF", Request id "0HNG1MIMH6NVF:00000004": done reading request body.
2025-10-02 20:36:21.930 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-10-02 20:36:21.930 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:36:21.930 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:36:21.930 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-10-02 20:36:21.930 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-10-02 20:36:21.930 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:36:21.930 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-10-02 20:36:21.930 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:36:21.930 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:36:21.930 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-10-02 20:36:21.930 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-10-02 20:36:21.930 +07:00 [INF] Processing AI suggestion for SubmissionId: 22
2025-10-02 20:36:21.930 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":22,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-10-02T11:45:44.0370000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-10-02 20:36:21.931 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 20:36:21.932 +07:00 [DBG] Creating DbConnection.
2025-10-02 20:36:21.932 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 20:36:21.932 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:36:21.932 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:36:21.932 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:36:21.932 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:36:21.932 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:36:21.933 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:36:21.943 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-10-02 20:36:21.944 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:36:21.944 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 20:36:21.944 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:36:21.945 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:36:21.946 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:36:21.946 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:36:21.946 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 20:36:21.946 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:36:21.946 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 20:36:21.946 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:36:22.004 +07:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-10-02 20:36:22.008 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 20:36:22.008 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-10-02 20:36:22.008 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:36:22.008 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 20:36:24.821 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 20:36:24.821 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 20:36:24.821 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 20:36:24.821 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 20:36:24.821 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 20:36:24.822 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2893.3182ms
2025-10-02 20:36:24.822 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-10-02 20:36:24.822 +07:00 [DBG] Connection id "0HNG1MIMH6NVF" completed keep alive response.
2025-10-02 20:36:24.822 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 20:36:24.822 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 20:36:24.822 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 20:36:24.822 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2896.0603ms
2025-10-02 20:38:31.094 +07:00 [INF] Application is shutting down...
2025-10-02 20:38:31.095 +07:00 [DBG] Hosting stopping
2025-10-02 20:38:31.099 +07:00 [DBG] Connection id "0HNG1MIMH6NVF" disconnecting.
2025-10-02 20:38:31.100 +07:00 [DBG] Connection id "0HNG1MIMH6NVF" stopped.
2025-10-02 20:38:31.100 +07:00 [DBG] Connection id "0HNG1MIMH6NVF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 20:38:31.107 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 20:38:31.135 +07:00 [DBG] Hosting stopped
2025-10-02 22:09:01.490 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 22:09:01.612 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 22:09:01.954 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:01.991 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.015 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.021 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.023 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.027 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.319 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.321 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.351 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.352 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.353 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.356 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.364 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.364 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:09:02.426 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 22:09:02.427 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 22:09:02.427 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 22:09:02.427 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 22:09:02.427 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 22:09:02.427 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 22:09:02.427 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 22:09:02.427 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 22:09:02.428 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 22:09:02.428 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 22:09:02.428 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 22:09:02.428 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 22:09:02.428 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 22:09:02.428 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 22:09:02.428 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 22:09:02.429 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 22:09:02.429 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 22:09:02.429 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 22:09:02.429 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 22:09:02.619 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:09:02.620 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:09:02.620 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:09:02.621 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:09:02.621 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:09:02.622 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:09:02.622 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:09:02.622 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:09:02.623 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:09:02.623 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:09:02.623 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:09:02.847 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 22:09:02.969 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 22:09:03.195 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 22:09:03.259 +07:00 [DBG] Creating DbConnection.
2025-10-02 22:09:03.291 +07:00 [DBG] Created DbConnection. (30ms).
2025-10-02 22:09:03.295 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.696 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.700 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:09:03.707 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-02 22:09:03.719 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2025-10-02 22:09:03.728 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:09:03.847 +07:00 [INF] Executed DbCommand (119ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:09:03.892 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:09:03.914 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.922 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 68ms reading results.
2025-10-02 22:09:03.925 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.929 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-10-02 22:09:03.932 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.933 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.934 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:09:03.934 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:03.934 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:03.935 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:09:03.941 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:09:03.942 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:09:03.942 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.943 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:09:03.943 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.943 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:09:03.944 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.944 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.944 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:09:03.944 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:03.944 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:03.945 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:09:03.946 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:09:03.946 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:09:03.946 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.946 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:09:03.946 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.947 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:09:03.947 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.947 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.947 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:09:03.947 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:03.947 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:03.948 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:09:03.949 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:09:03.949 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:09:03.950 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.950 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:09:03.950 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.951 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:09:03.961 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 22:09:03.972 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 22:09:03.973 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.973 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:03.973 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:09:03.974 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:03.974 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:03.974 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:09:03.985 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:09:04.020 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:09:04.063 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.063 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 77ms reading results.
2025-10-02 22:09:04.063 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.063 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:09:04.067 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 22:09:04.073 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.074 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.074 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:09:04.074 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:04.074 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:04.074 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:09:04.078 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:09:04.079 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:09:04.079 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.079 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:09:04.079 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.079 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:09:04.080 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 22:09:04.081 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.081 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.081 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:09:04.081 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:04.081 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:04.081 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:09:04.086 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:09:04.087 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:09:04.087 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.087 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 22:09:04.088 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.088 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:09:04.088 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.089 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.089 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:09:04.089 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:04.089 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:09:04.089 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:09:04.092 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:09:04.093 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:09:04.093 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.093 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:09:04.093 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.093 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:09:04.093 +07:00 [INF] Data seeding completed successfully
2025-10-02 22:09:04.095 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 22:09:04.097 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:09:04.099 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 22:09:04.129 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 22:09:04.384 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 22:09:04.526 +07:00 [DBG] Hosting starting
2025-10-02 22:09:04.539 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 22:09:04.565 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 22:09:04.594 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 22:09:04.628 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 22:09:04.631 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 22:09:04.631 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 22:09:04.639 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 22:09:04.642 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 22:09:04.643 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 22:09:04.644 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 22:09:04.646 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 22:09:04.650 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 22:09:04.653 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 22:09:04.655 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 22:09:04.738 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 22:09:04.739 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 22:09:04.739 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 22:09:04.739 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 22:09:04.739 +07:00 [INF] Hosting environment: Development
2025-10-02 22:09:04.739 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 22:09:04.741 +07:00 [DBG] Hosting started
2025-10-02 22:09:05.199 +07:00 [DBG] Connection id "0HNG1OMGDJ341" accepted.
2025-10-02 22:09:05.201 +07:00 [DBG] Connection id "0HNG1OMGDJ341" started.
2025-10-02 22:09:05.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 22:09:05.677 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 22:09:05.790 +07:00 [DBG] Connection id "0HNG1OMGDJ342" received FIN.
2025-10-02 22:09:05.798 +07:00 [DBG] Connection id "0HNG1OMGDJ342" accepted.
2025-10-02 22:09:05.799 +07:00 [DBG] Connection id "0HNG1OMGDJ342" started.
2025-10-02 22:09:05.800 +07:00 [DBG] Connection id "0HNG1OMGDJ342" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 22:09:05.804 +07:00 [DBG] Connection id "0HNG1OMGDJ342" disconnecting.
2025-10-02 22:09:05.808 +07:00 [DBG] Connection id "0HNG1OMGDJ342" stopped.
2025-10-02 22:09:06.259 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 22:09:06.449 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 22:09:06.450 +07:00 [DBG] Connection id "0HNG1OMGDJ341" completed keep alive response.
2025-10-02 22:09:06.457 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 836.0759ms
2025-10-02 22:09:06.465 +07:00 [DBG] Connection id "0HNG1OMGDJ341" received FIN.
2025-10-02 22:09:06.465 +07:00 [DBG] Connection id "0HNG1OMGDJ341" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 22:09:06.466 +07:00 [DBG] Connection id "0HNG1OMGDJ341" disconnecting.
2025-10-02 22:09:06.468 +07:00 [DBG] Connection id "0HNG1OMGDJ341" stopped.
2025-10-02 22:09:06.942 +07:00 [DBG] Connection id "0HNG1OMGDJ343" accepted.
2025-10-02 22:09:06.942 +07:00 [DBG] Connection id "0HNG1OMGDJ343" started.
2025-10-02 22:09:06.944 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 22:09:06.949 +07:00 [DBG] Connection id "0HNG1OMGDJ343" completed keep alive response.
2025-10-02 22:09:06.950 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 6.1493ms
2025-10-02 22:09:07.254 +07:00 [DBG] Connection id "0HNG1OMGDJ343" received FIN.
2025-10-02 22:09:07.255 +07:00 [DBG] Connection id "0HNG1OMGDJ343" disconnecting.
2025-10-02 22:09:07.255 +07:00 [DBG] Connection id "0HNG1OMGDJ343" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 22:09:07.261 +07:00 [DBG] Connection id "0HNG1OMGDJ343" stopped.
2025-10-02 22:09:07.261 +07:00 [DBG] Connection id "0HNG1OMGDJ344" accepted.
2025-10-02 22:09:07.262 +07:00 [DBG] Connection id "0HNG1OMGDJ344" started.
2025-10-02 22:09:07.263 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 22:09:07.629 +07:00 [DBG] Connection id "0HNG1OMGDJ344" completed keep alive response.
2025-10-02 22:09:07.630 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 367.2157ms
2025-10-02 22:09:50.807 +07:00 [DBG] Connection id "0HNG1OMGDJ344" received FIN.
2025-10-02 22:09:50.808 +07:00 [DBG] Connection id "0HNG1OMGDJ344" disconnecting.
2025-10-02 22:09:50.809 +07:00 [DBG] Connection id "0HNG1OMGDJ344" stopped.
2025-10-02 22:09:50.813 +07:00 [DBG] Connection id "0HNG1OMGDJ344" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 22:12:25.412 +07:00 [INF] Application is shutting down...
2025-10-02 22:12:25.413 +07:00 [DBG] Hosting stopping
2025-10-02 22:12:25.421 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 22:12:25.455 +07:00 [DBG] Hosting stopped
2025-10-02 22:13:46.951 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-02 22:13:47.056 +07:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-02 22:13:47.314 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.336 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.356 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.358 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.358 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.361 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.610 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.611 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.633 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.634 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.634 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.636 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.645 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.646 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-02 22:13:47.705 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-10-02 22:13:47.706 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-10-02 22:13:47.706 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-10-02 22:13:47.706 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-10-02 22:13:47.706 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-10-02 22:13:47.706 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-10-02 22:13:47.706 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-10-02 22:13:47.707 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-10-02 22:13:47.707 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-10-02 22:13:47.707 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-10-02 22:13:47.707 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-10-02 22:13:47.707 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-10-02 22:13:47.707 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-10-02 22:13:47.707 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-10-02 22:13:47.707 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-10-02 22:13:47.708 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-10-02 22:13:47.708 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-10-02 22:13:47.708 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-10-02 22:13:47.708 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-10-02 22:13:47.881 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:13:47.881 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:13:47.882 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:13:47.882 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:13:47.882 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:13:47.882 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:13:47.882 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:13:47.883 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:13:47.883 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:13:47.883 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:13:47.883 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-10-02 22:13:48.056 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 22:13:48.128 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-10-02 22:13:48.312 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 22:13:48.357 +07:00 [DBG] Creating DbConnection.
2025-10-02 22:13:48.382 +07:00 [DBG] Created DbConnection. (18ms).
2025-10-02 22:13:48.385 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.528 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.531 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:13:48.535 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-02 22:13:48.542 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-10-02 22:13:48.550 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:13:48.602 +07:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:13:48.643 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:13:48.666 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.672 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 66ms reading results.
2025-10-02 22:13:48.676 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.682 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (6ms).
2025-10-02 22:13:48.685 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.686 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.686 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:13:48.686 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.686 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.687 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:13:48.689 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:13:48.690 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:13:48.690 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.691 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 22:13:48.691 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.691 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:13:48.692 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.693 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.693 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:13:48.694 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.694 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.694 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:13:48.696 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:13:48.696 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:13:48.696 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.696 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:13:48.697 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.697 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:13:48.697 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.697 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.698 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:13:48.698 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.698 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.698 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:13:48.700 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-10-02 22:13:48.701 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:13:48.701 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.702 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 22:13:48.702 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.704 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-10-02 22:13:48.715 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-10-02 22:13:48.723 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 22:13:48.724 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.725 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.725 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:13:48.725 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.726 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.726 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:13:48.735 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:13:48.763 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:13:48.800 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.801 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 65ms reading results.
2025-10-02 22:13:48.801 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.801 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:13:48.804 +07:00 [INF] Admin user 'admin.capbot@gmail.com' already exists
2025-10-02 22:13:48.806 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.806 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.806 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:13:48.807 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.807 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.807 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:13:48.808 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:13:48.809 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:13:48.809 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.810 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:13:48.810 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.810 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:13:48.811 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-10-02 22:13:48.811 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.812 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.812 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:13:48.812 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.812 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.812 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:13:48.814 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:13:48.815 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:13:48.815 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.815 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:13:48.816 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.816 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:13:48.816 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.816 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.816 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:13:48.816 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.817 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:13:48.817 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:13:48.818 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:13:48.818 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:13:48.818 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.819 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:13:48.819 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.819 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:13:48.819 +07:00 [INF] Data seeding completed successfully
2025-10-02 22:13:48.821 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 22:13:48.824 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:13:48.825 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-02 22:13:48.842 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-10-02 22:13:49.016 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-10-02 22:13:49.138 +07:00 [DBG] Hosting starting
2025-10-02 22:13:49.148 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-30a711c8-7ddc-4a0d-8c07-4439effde9db.xml'.
2025-10-02 22:13:49.151 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-732ee668-a56c-4fc9-b9d2-4188dc372919.xml'.
2025-10-02 22:13:49.151 +07:00 [DBG] Reading data from file 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys\key-ad0e504d-5eaf-4fbc-adde-d8f26319af02.xml'.
2025-10-02 22:13:49.156 +07:00 [DBG] Found key {30a711c8-7ddc-4a0d-8c07-4439effde9db}.
2025-10-02 22:13:49.160 +07:00 [DBG] Found key {732ee668-a56c-4fc9-b9d2-4188dc372919}.
2025-10-02 22:13:49.161 +07:00 [DBG] Found key {ad0e504d-5eaf-4fbc-adde-d8f26319af02}.
2025-10-02 22:13:49.166 +07:00 [DBG] Considering key {30a711c8-7ddc-4a0d-8c07-4439effde9db} with expiration date 2025-11-11 18:32:26Z as default key.
2025-10-02 22:13:49.169 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 22:13:49.170 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-10-02 22:13:49.172 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-02 22:13:49.173 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-10-02 22:13:49.175 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-10-02 22:13:49.181 +07:00 [DBG] Using key {30a711c8-7ddc-4a0d-8c07-4439effde9db} as the default key.
2025-10-02 22:13:49.182 +07:00 [DBG] Key ring with default key {30a711c8-7ddc-4a0d-8c07-4439effde9db} was loaded during application startup.
2025-10-02 22:13:49.241 +07:00 [INF] Now listening on: http://localhost:5207
2025-10-02 22:13:49.241 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-10-02 22:13:49.241 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-10-02 22:13:49.242 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-02 22:13:49.242 +07:00 [INF] Hosting environment: Development
2025-10-02 22:13:49.242 +07:00 [INF] Content root path: C:\Users\acer\Downloads\CBAI_API\capbot.api
2025-10-02 22:13:49.245 +07:00 [DBG] Hosting started
2025-10-02 22:13:49.382 +07:00 [DBG] Connection id "0HNG1OP53P201" accepted.
2025-10-02 22:13:49.383 +07:00 [DBG] Connection id "0HNG1OP53P201" started.
2025-10-02 22:13:49.457 +07:00 [DBG] Connection id "0HNG1OP53P202" accepted.
2025-10-02 22:13:49.457 +07:00 [DBG] Connection id "0HNG1OP53P202" started.
2025-10-02 22:13:49.534 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-10-02 22:13:49.541 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-02 22:13:49.734 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-10-02 22:13:49.753 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-10-02 22:13:49.755 +07:00 [DBG] Connection id "0HNG1OP53P201" completed keep alive response.
2025-10-02 22:13:49.775 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 237.6743ms
2025-10-02 22:13:49.796 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-10-02 22:13:49.801 +07:00 [DBG] Connection id "0HNG1OP53P201" completed keep alive response.
2025-10-02 22:13:49.804 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 6.0519ms
2025-10-02 22:13:49.948 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-10-02 22:13:50.331 +07:00 [DBG] Connection id "0HNG1OP53P201" completed keep alive response.
2025-10-02 22:13:50.332 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 383.4242ms
2025-10-02 22:13:51.191 +07:00 [DBG] Connection id "0HNG1OP53P201" received FIN.
2025-10-02 22:13:51.191 +07:00 [DBG] Connection id "0HNG1OP53P202" received FIN.
2025-10-02 22:13:51.193 +07:00 [DBG] Connection id "0HNG1OP53P202" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 22:13:51.193 +07:00 [DBG] Connection id "0HNG1OP53P201" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 22:13:51.194 +07:00 [DBG] Connection id "0HNG1OP53P202" disconnecting.
2025-10-02 22:13:51.194 +07:00 [DBG] Connection id "0HNG1OP53P201" disconnecting.
2025-10-02 22:13:51.195 +07:00 [DBG] Connection id "0HNG1OP53P201" stopped.
2025-10-02 22:13:51.195 +07:00 [DBG] Connection id "0HNG1OP53P202" stopped.
2025-10-02 22:14:03.537 +07:00 [DBG] Connection id "0HNG1OP53P203" accepted.
2025-10-02 22:14:03.538 +07:00 [DBG] Connection id "0HNG1OP53P203" started.
2025-10-02 22:14:03.540 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/auth/login - application/json 97
2025-10-02 22:14:03.551 +07:00 [DBG] POST requests are not supported
2025-10-02 22:14:03.554 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-02 22:14:03.557 +07:00 [DBG] POST requests are not supported
2025-10-02 22:14:03.559 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 22:14:03.560 +07:00 [INF] CORS policy execution successful.
2025-10-02 22:14:03.615 +07:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2025-10-02 22:14:03.616 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2025-10-02 22:14:03.618 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 22:14:03.661 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-02 22:14:03.672 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 22:14:03.693 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Entities.DTOs.Auth.LoginDTO) on controller CapBot.api.Controllers.AuthController (CapBot.api).
2025-10-02 22:14:03.695 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 22:14:03.696 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 22:14:03.697 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 22:14:03.697 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 22:14:03.697 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 22:14:03.701 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-10-02 22:14:03.707 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-10-02 22:14:03.712 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-10-02 22:14:03.713 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' using the name '' in request data ...
2025-10-02 22:14:03.715 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 22:14:03.715 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 22:14:03.715 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 22:14:03.715 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 22:14:03.729 +07:00 [DBG] Connection id "0HNG1OP53P203", Request id "0HNG1OP53P203:00000001": started reading request body.
2025-10-02 22:14:03.729 +07:00 [DBG] Connection id "0HNG1OP53P203", Request id "0HNG1OP53P203:00000001": done reading request body.
2025-10-02 22:14:03.740 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.Auth.LoginDTO'
2025-10-02 22:14:03.740 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 22:14:03.740 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 22:14:03.741 +07:00 [DBG] Attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-10-02 22:14:03.748 +07:00 [DBG] Done attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 22:14:03.824 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 22:14:03.825 +07:00 [DBG] Creating DbConnection.
2025-10-02 22:14:03.826 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 22:14:03.826 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:14:03.826 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:14:03.827 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:14:03.827 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:14:03.827 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:14:03.827 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:14:03.854 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:14:03.855 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:14:03.856 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:14:03.857 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-10-02 22:14:03.857 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:14:03.858 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:14:03.883 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .Join(
        inner: DbSet<Role>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-10-02 22:14:03.926 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Name
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 22:14:03.928 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:14:03.928 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:14:03.928 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:14:03.929 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:14:03.929 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:14:03.930 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-10-02 22:14:03.944 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-10-02 22:14:03.945 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:14:03.946 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 22:14:03.946 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:14:03.946 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:14:04.041 +07:00 [DBG] Invalid password for user.
2025-10-02 22:14:04.045 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 22:14:04.046 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 22:14:04.047 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 22:14:04.057 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 22:14:04.058 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 22:14:04.093 +07:00 [INF] Executed action CapBot.api.Controllers.AuthController.Login (CapBot.api) in 392.97ms
2025-10-02 22:14:04.094 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 22:14:04.097 +07:00 [DBG] Connection id "0HNG1OP53P203" completed keep alive response.
2025-10-02 22:14:04.097 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 22:14:04.098 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:14:04.098 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 22:14:04.100 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/auth/login - 401 null application/json; charset=utf-8 559.9058ms
2025-10-02 22:14:11.218 +07:00 [DBG] Connection id "0HNG1OP53P203" received FIN.
2025-10-02 22:14:11.219 +07:00 [DBG] Connection id "0HNG1OP53P203" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 22:14:11.220 +07:00 [DBG] Connection id "0HNG1OP53P203" disconnecting.
2025-10-02 22:14:11.220 +07:00 [DBG] Connection id "0HNG1OP53P203" stopped.
2025-10-02 22:14:44.573 +07:00 [DBG] Connection id "0HNG1OP53P204" accepted.
2025-10-02 22:14:44.574 +07:00 [DBG] Connection id "0HNG1OP53P204" started.
2025-10-02 22:14:44.574 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/auth/login - application/json 112
2025-10-02 22:14:44.574 +07:00 [DBG] POST requests are not supported
2025-10-02 22:14:44.575 +07:00 [DBG] POST requests are not supported
2025-10-02 22:14:44.575 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 22:14:44.576 +07:00 [INF] CORS policy execution successful.
2025-10-02 22:14:44.581 +07:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2025-10-02 22:14:44.581 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2025-10-02 22:14:44.581 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 22:14:44.585 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-02 22:14:44.586 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 22:14:44.587 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Entities.DTOs.Auth.LoginDTO) on controller CapBot.api.Controllers.AuthController (CapBot.api).
2025-10-02 22:14:44.587 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 22:14:44.588 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 22:14:44.588 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 22:14:44.589 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 22:14:44.590 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 22:14:44.591 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-10-02 22:14:44.601 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-10-02 22:14:44.602 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-10-02 22:14:44.603 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' using the name '' in request data ...
2025-10-02 22:14:44.603 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 22:14:44.603 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 22:14:44.603 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 22:14:44.603 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 22:14:44.604 +07:00 [DBG] Connection id "0HNG1OP53P204", Request id "0HNG1OP53P204:00000001": started reading request body.
2025-10-02 22:14:44.604 +07:00 [DBG] Connection id "0HNG1OP53P204", Request id "0HNG1OP53P204:00000001": done reading request body.
2025-10-02 22:14:44.615 +07:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to App.Entities.Enums.SystemRoles. Path: $.role | LineNumber: 3 | BytePositionInLine: 25.
2025-10-02 22:14:44.616 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 22:14:44.616 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 22:14:44.617 +07:00 [DBG] Attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-10-02 22:14:44.618 +07:00 [DBG] Done attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 22:14:44.622 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 22:14:44.623 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 22:14:44.623 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 22:14:44.623 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 22:14:44.623 +07:00 [INF] Executing UnprocessableEntityObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 22:14:44.630 +07:00 [INF] Executed action CapBot.api.Controllers.AuthController.Login (CapBot.api) in 39.9926ms
2025-10-02 22:14:44.631 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 22:14:44.631 +07:00 [DBG] Connection id "0HNG1OP53P204" completed keep alive response.
2025-10-02 22:14:44.631 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/auth/login - 422 null application/json; charset=utf-8 57.1177ms
2025-10-02 22:15:10.327 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/auth/login - application/json 112
2025-10-02 22:15:10.327 +07:00 [DBG] POST requests are not supported
2025-10-02 22:15:10.327 +07:00 [DBG] POST requests are not supported
2025-10-02 22:15:10.328 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-10-02 22:15:10.328 +07:00 [INF] CORS policy execution successful.
2025-10-02 22:15:10.328 +07:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2025-10-02 22:15:10.329 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2025-10-02 22:15:10.329 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 22:15:10.331 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-02 22:15:10.332 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 22:15:10.332 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Entities.DTOs.Auth.LoginDTO) on controller CapBot.api.Controllers.AuthController (CapBot.api).
2025-10-02 22:15:10.332 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 22:15:10.332 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 22:15:10.332 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 22:15:10.333 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 22:15:10.333 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 22:15:10.333 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-10-02 22:15:10.356 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-10-02 22:15:10.356 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-10-02 22:15:10.356 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' using the name '' in request data ...
2025-10-02 22:15:10.357 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 22:15:10.357 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 22:15:10.357 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-10-02 22:15:10.357 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-02 22:15:10.357 +07:00 [DBG] Connection id "0HNG1OP53P204", Request id "0HNG1OP53P204:00000002": started reading request body.
2025-10-02 22:15:10.357 +07:00 [DBG] Connection id "0HNG1OP53P204", Request id "0HNG1OP53P204:00000002": done reading request body.
2025-10-02 22:15:10.357 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.Auth.LoginDTO'
2025-10-02 22:15:10.357 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 22:15:10.357 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 22:15:10.357 +07:00 [DBG] Attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-10-02 22:15:10.358 +07:00 [DBG] Done attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-10-02 22:15:10.381 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 22:15:10.383 +07:00 [DBG] Creating DbConnection.
2025-10-02 22:15:10.383 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 22:15:10.383 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:10.383 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:10.383 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:15:10.383 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:10.383 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:10.383 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:15:10.386 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-10-02 22:15:10.387 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-02 22:15:10.387 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:15:10.387 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:15:10.387 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:10.387 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:15:10.389 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:10.389 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:10.389 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:15:10.389 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:10.389 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:10.389 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-10-02 22:15:10.400 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-10-02 22:15:10.400 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:15:10.400 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:15:10.401 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:10.401 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:15:10.511 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 22:15:10.512 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 22:15:10.512 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 22:15:10.512 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 22:15:10.512 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 22:15:10.523 +07:00 [INF] Executed action CapBot.api.Controllers.AuthController.Login (CapBot.api) in 189.5268ms
2025-10-02 22:15:10.523 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-10-02 22:15:10.523 +07:00 [DBG] Connection id "0HNG1OP53P204" completed keep alive response.
2025-10-02 22:15:10.523 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 22:15:10.524 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:10.524 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 22:15:10.524 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/auth/login - 200 null application/json; charset=utf-8 196.7293ms
2025-10-02 22:15:47.481 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/topic/detail/22 - null null
2025-10-02 22:15:47.482 +07:00 [DBG] The request path /api/topic/detail/22 does not match a supported file type
2025-10-02 22:15:47.482 +07:00 [DBG] The request path /api/topic/detail/22 does not match a supported file type
2025-10-02 22:15:47.482 +07:00 [DBG] 1 candidate(s) found for the request path '/api/topic/detail/22'
2025-10-02 22:15:47.482 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.TopicController.GetDetail (CapBot.api)' with route pattern 'api/topic/detail/{topicId}' is valid for the request path '/api/topic/detail/22'
2025-10-02 22:15:47.483 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.TopicController.GetDetail (CapBot.api)'
2025-10-02 22:15:47.536 +07:00 [DBG] Successfully validated the token.
2025-10-02 22:15:47.539 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 22:15:47.541 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.TopicController.GetDetail (CapBot.api)'
2025-10-02 22:15:47.547 +07:00 [INF] Route matched with {action = "GetDetail", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDetail(Int32) on controller CapBot.api.Controllers.TopicController (CapBot.api).
2025-10-02 22:15:47.547 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 22:15:47.547 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 22:15:47.547 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 22:15:47.548 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 22:15:47.548 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 22:15:47.548 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.TopicController (CapBot.api)
2025-10-02 22:15:47.565 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.TopicController (CapBot.api)
2025-10-02 22:15:47.565 +07:00 [DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
2025-10-02 22:15:47.565 +07:00 [DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
2025-10-02 22:15:47.566 +07:00 [DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
2025-10-02 22:15:47.566 +07:00 [DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
2025-10-02 22:15:47.566 +07:00 [DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
2025-10-02 22:15:47.566 +07:00 [DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
2025-10-02 22:15:47.579 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 22:15:47.587 +07:00 [DBG] Compiling query expression: 
'DbSet<Topic>()
    .AsNoTracking()
    .Include(x => x.Supervisor)
    .Include(x => x.Category)
    .Include(x => x.Semester)
    .Include(x => x.TopicVersions)
    .Where(x => x.Id == __topicId_0 && x.IsActive && x.DeletedAt == null)
    .FirstOrDefault()'
2025-10-02 22:15:47.600 +07:00 [DBG] Including navigation: 'Topic.Supervisor'.
2025-10-02 22:15:47.602 +07:00 [DBG] Including navigation: 'Topic.Category'.
2025-10-02 22:15:47.605 +07:00 [DBG] Including navigation: 'Topic.Semester'.
2025-10-02 22:15:47.607 +07:00 [DBG] Including navigation: 'Topic.TopicVersions'.
2025-10-02 22:15:47.689 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Topic>(
    asyncEnumerable: new SingleQueryingEnumerable<Topic>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Topic.Abbreviation (string), 1], [Property: Topic.CategoryId (int?) FK Index, 2], [Property: Topic.Content (string), 3], [Property: Topic.Context (string), 4], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 5], [Property: Topic.CreatedBy (string), 6], [Property: Topic.DeletedAt (DateTime?), 7], [Property: Topic.Description (string), 8], [Property: Topic.EN_Title (string) Required MaxLength(500), 9], [Property: Topic.IsActive (bool) Required, 10], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 11], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 12], [Property: Topic.LastModifiedAt (DateTime?), 13], [Property: Topic.LastModifiedBy (string), 14], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 15], [Property: Topic.Objectives (string), 16], [Property: Topic.PotentialDuplicate (string), 17], [Property: Topic.Problem (string), 18], [Property: Topic.SemesterId (int) Required FK Index, 19], [Property: Topic.SupervisorId (int) Required FK Index, 20], [Property: Topic.VN_title (string), 21] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: User.AccessFailedCount (int) Required, 23], [Property: User.ConcurrencyStamp (string), 24], [Property: User.CreatedAt (DateTime) Required, 25], [Property: User.DeletedAt (DateTime?), 26], [Property: User.Email (string), 27], [Property: User.EmailConfirmed (bool) Required, 28], [Property: User.LastModifiedAt (DateTime) Required, 29], [Property: User.LastModifiedBy (string), 30], [Property: User.LockoutEnabled (bool) Required, 31], [Property: User.LockoutEnd (DateTimeOffset?), 32], [Property: User.NormalizedEmail (string), 33], [Property: User.NormalizedUserName (string), 34], [Property: User.PasswordHash (string), 35], [Property: User.PhoneNumber (string), 36], [Property: User.PhoneNumberConfirmed (bool) Required, 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UserName (string), 40] }
                2 -> Dictionary<IProperty, int> { [Property: TopicCategory.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: TopicCategory.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 42], [Property: TopicCategory.CreatedBy (string), 43], [Property: TopicCategory.DeletedAt (DateTime?), 44], [Property: TopicCategory.Description (string), 45], [Property: TopicCategory.IsActive (bool) Required, 46], [Property: TopicCategory.LastModifiedAt (DateTime?), 47], [Property: TopicCategory.LastModifiedBy (string), 48], [Property: TopicCategory.Name (string) Required MaxLength(100), 49] }
                3 -> Dictionary<IProperty, int> { [Property: Semester.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 50], [Property: Semester.CreatedAt (DateTime) Required, 51], [Property: Semester.CreatedBy (string), 52], [Property: Semester.DeletedAt (DateTime?), 53], [Property: Semester.Description (string), 54], [Property: Semester.EndDate (DateTime) Required, 55], [Property: Semester.IsActive (bool) Required, 56], [Property: Semester.LastModifiedAt (DateTime?), 57], [Property: Semester.LastModifiedBy (string), 58], [Property: Semester.Name (string) Required Index MaxLength(50), 59], [Property: Semester.StartDate (DateTime) Required, 60] }
                4 -> 0
                5 -> 22
                6 -> 41
                7 -> 50
                8 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 61], [Property: TopicVersion.Content (string), 62], [Property: TopicVersion.Context (string), 63], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 64], [Property: TopicVersion.CreatedBy (string), 65], [Property: TopicVersion.DeletedAt (DateTime?), 66], [Property: TopicVersion.Description (string), 67], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 68], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 69], [Property: TopicVersion.ExpectedOutcomes (string), 70], [Property: TopicVersion.IsActive (bool) Required, 71], [Property: TopicVersion.LastModifiedAt (DateTime?), 72], [Property: TopicVersion.LastModifiedBy (string), 73], [Property: TopicVersion.Methodology (string), 74], [Property: TopicVersion.Objectives (string), 75], [Property: TopicVersion.PotentialDuplicate (string), 76], [Property: TopicVersion.Problem (string), 77], [Property: TopicVersion.Requirements (string), 78], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 79], [Property: TopicVersion.SubmittedAt (DateTime?), 80], [Property: TopicVersion.SubmittedBy (int?) FK Index, 81], [Property: TopicVersion.TopicId (int) Required FK Index, 82], [Property: TopicVersion.VN_title (string), 83], [Property: TopicVersion.VersionNumber (int) Required Index, 84] }
                9 -> 61
            SELECT t1.Id, t1.Abbreviation, t1.CategoryId, t1.Content, t1.Context, t1.CreatedAt, t1.CreatedBy, t1.DeletedAt, t1.Description, t1.EN_Title, t1.IsActive, t1.IsApproved, t1.IsLegacy, t1.LastModifiedAt, t1.LastModifiedBy, t1.MaxStudents, t1.Objectives, t1.PotentialDuplicate, t1.Problem, t1.SemesterId, t1.SupervisorId, t1.VN_title, t1.Id0, t1.AccessFailedCount, t1.ConcurrencyStamp, t1.CreatedAt0, t1.DeletedAt0, t1.Email, t1.EmailConfirmed, t1.LastModifiedAt0, t1.LastModifiedBy0, t1.LockoutEnabled, t1.LockoutEnd, t1.NormalizedEmail, t1.NormalizedUserName, t1.PasswordHash, t1.PhoneNumber, t1.PhoneNumberConfirmed, t1.SecurityStamp, t1.TwoFactorEnabled, t1.UserName, t1.Id1, t1.CreatedAt1, t1.CreatedBy0, t1.DeletedAt1, t1.Description0, t1.IsActive0, t1.LastModifiedAt1, t1.LastModifiedBy1, t1.Name, t1.Id2, t1.CreatedAt2, t1.CreatedBy1, t1.DeletedAt2, t1.Description1, t1.EndDate, t1.IsActive1, t1.LastModifiedAt2, t1.LastModifiedBy2, t1.Name0, t1.StartDate, t2.Id, t2.Content, t2.Context, t2.CreatedAt, t2.CreatedBy, t2.DeletedAt, t2.Description, t2.DocumentUrl, t2.EN_Title, t2.ExpectedOutcomes, t2.IsActive, t2.LastModifiedAt, t2.LastModifiedBy, t2.Methodology, t2.Objectives, t2.PotentialDuplicate, t2.Problem, t2.Requirements, t2.Status, t2.SubmittedAt, t2.SubmittedBy, t2.TopicId, t2.VN_title, t2.VersionNumber
            FROM 
            (
                SELECT TOP(1) t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.PotentialDuplicate, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title, u.Id AS Id0, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DeletedAt AS DeletedAt0, u.Email, u.EmailConfirmed, u.LastModifiedAt AS LastModifiedAt0, u.LastModifiedBy AS LastModifiedBy0, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, t0.Id AS Id1, t0.CreatedAt AS CreatedAt1, t0.CreatedBy AS CreatedBy0, t0.DeletedAt AS DeletedAt1, t0.Description AS Description0, t0.IsActive AS IsActive0, t0.LastModifiedAt AS LastModifiedAt1, t0.LastModifiedBy AS LastModifiedBy1, t0.Name, s.Id AS Id2, s.CreatedAt AS CreatedAt2, s.CreatedBy AS CreatedBy1, s.DeletedAt AS DeletedAt2, s.Description AS Description1, s.EndDate, s.IsActive AS IsActive1, s.LastModifiedAt AS LastModifiedAt2, s.LastModifiedBy AS LastModifiedBy2, s.Name AS Name0, s.StartDate
                FROM topics AS t
                INNER JOIN users AS u ON t.SupervisorId == u.Id
                LEFT JOIN topic_categories AS t0 ON t.CategoryId == t0.Id
                INNER JOIN semesters AS s ON t.SemesterId == s.Id
                WHERE ((t.Id == @__topicId_0) && t.IsActive) && (t.DeletedAt == NULL)
            ) AS t1
            LEFT JOIN topic_versions AS t2 ON t1.Id == t2.TopicId
            ORDER BY t1.Id ASC, t1.Id0 ASC, t1.Id1 ASC, t1.Id2 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Topic>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 22:15:47.700 +07:00 [DBG] Creating DbConnection.
2025-10-02 22:15:47.700 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 22:15:47.701 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:47.701 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:47.701 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:15:47.701 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:47.701 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:47.701 +07:00 [DBG] Executing DbCommand [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[PotentialDuplicate], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title], [t1].[Id0], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DeletedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[LastModifiedAt0], [t1].[LastModifiedBy0], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UserName], [t1].[Id1], [t1].[CreatedAt1], [t1].[CreatedBy0], [t1].[DeletedAt1], [t1].[Description0], [t1].[IsActive0], [t1].[LastModifiedAt1], [t1].[LastModifiedBy1], [t1].[Name], [t1].[Id2], [t1].[CreatedAt2], [t1].[CreatedBy1], [t1].[DeletedAt2], [t1].[Description1], [t1].[EndDate], [t1].[IsActive1], [t1].[LastModifiedAt2], [t1].[LastModifiedBy2], [t1].[Name0], [t1].[StartDate], [t2].[Id], [t2].[Content], [t2].[Context], [t2].[CreatedAt], [t2].[CreatedBy], [t2].[DeletedAt], [t2].[Description], [t2].[DocumentUrl], [t2].[EN_Title], [t2].[ExpectedOutcomes], [t2].[IsActive], [t2].[LastModifiedAt], [t2].[LastModifiedBy], [t2].[Methodology], [t2].[Objectives], [t2].[PotentialDuplicate], [t2].[Problem], [t2].[Requirements], [t2].[Status], [t2].[SubmittedAt], [t2].[SubmittedBy], [t2].[TopicId], [t2].[VN_title], [t2].[VersionNumber]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title], [u].[Id] AS [Id0], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DeletedAt] AS [DeletedAt0], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt] AS [LastModifiedAt0], [u].[LastModifiedBy] AS [LastModifiedBy0], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [t0].[Id] AS [Id1], [t0].[CreatedAt] AS [CreatedAt1], [t0].[CreatedBy] AS [CreatedBy0], [t0].[DeletedAt] AS [DeletedAt1], [t0].[Description] AS [Description0], [t0].[IsActive] AS [IsActive0], [t0].[LastModifiedAt] AS [LastModifiedAt1], [t0].[LastModifiedBy] AS [LastModifiedBy1], [t0].[Name], [s].[Id] AS [Id2], [s].[CreatedAt] AS [CreatedAt2], [s].[CreatedBy] AS [CreatedBy1], [s].[DeletedAt] AS [DeletedAt2], [s].[Description] AS [Description1], [s].[EndDate], [s].[IsActive] AS [IsActive1], [s].[LastModifiedAt] AS [LastModifiedAt2], [s].[LastModifiedBy] AS [LastModifiedBy2], [s].[Name] AS [Name0], [s].[StartDate]
    FROM [topics] AS [t]
    INNER JOIN [users] AS [u] ON [t].[SupervisorId] = [u].[Id]
    LEFT JOIN [topic_categories] AS [t0] ON [t].[CategoryId] = [t0].[Id]
    INNER JOIN [semesters] AS [s] ON [t].[SemesterId] = [s].[Id]
    WHERE [t].[Id] = @__topicId_0 AND [t].[IsActive] = CAST(1 AS bit) AND [t].[DeletedAt] IS NULL
) AS [t1]
LEFT JOIN [topic_versions] AS [t2] ON [t1].[Id] = [t2].[TopicId]
ORDER BY [t1].[Id], [t1].[Id0], [t1].[Id1], [t1].[Id2]
2025-10-02 22:15:47.743 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[PotentialDuplicate], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title], [t1].[Id0], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DeletedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[LastModifiedAt0], [t1].[LastModifiedBy0], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UserName], [t1].[Id1], [t1].[CreatedAt1], [t1].[CreatedBy0], [t1].[DeletedAt1], [t1].[Description0], [t1].[IsActive0], [t1].[LastModifiedAt1], [t1].[LastModifiedBy1], [t1].[Name], [t1].[Id2], [t1].[CreatedAt2], [t1].[CreatedBy1], [t1].[DeletedAt2], [t1].[Description1], [t1].[EndDate], [t1].[IsActive1], [t1].[LastModifiedAt2], [t1].[LastModifiedBy2], [t1].[Name0], [t1].[StartDate], [t2].[Id], [t2].[Content], [t2].[Context], [t2].[CreatedAt], [t2].[CreatedBy], [t2].[DeletedAt], [t2].[Description], [t2].[DocumentUrl], [t2].[EN_Title], [t2].[ExpectedOutcomes], [t2].[IsActive], [t2].[LastModifiedAt], [t2].[LastModifiedBy], [t2].[Methodology], [t2].[Objectives], [t2].[PotentialDuplicate], [t2].[Problem], [t2].[Requirements], [t2].[Status], [t2].[SubmittedAt], [t2].[SubmittedBy], [t2].[TopicId], [t2].[VN_title], [t2].[VersionNumber]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title], [u].[Id] AS [Id0], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DeletedAt] AS [DeletedAt0], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt] AS [LastModifiedAt0], [u].[LastModifiedBy] AS [LastModifiedBy0], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [t0].[Id] AS [Id1], [t0].[CreatedAt] AS [CreatedAt1], [t0].[CreatedBy] AS [CreatedBy0], [t0].[DeletedAt] AS [DeletedAt1], [t0].[Description] AS [Description0], [t0].[IsActive] AS [IsActive0], [t0].[LastModifiedAt] AS [LastModifiedAt1], [t0].[LastModifiedBy] AS [LastModifiedBy1], [t0].[Name], [s].[Id] AS [Id2], [s].[CreatedAt] AS [CreatedAt2], [s].[CreatedBy] AS [CreatedBy1], [s].[DeletedAt] AS [DeletedAt2], [s].[Description] AS [Description1], [s].[EndDate], [s].[IsActive] AS [IsActive1], [s].[LastModifiedAt] AS [LastModifiedAt2], [s].[LastModifiedBy] AS [LastModifiedBy2], [s].[Name] AS [Name0], [s].[StartDate]
    FROM [topics] AS [t]
    INNER JOIN [users] AS [u] ON [t].[SupervisorId] = [u].[Id]
    LEFT JOIN [topic_categories] AS [t0] ON [t].[CategoryId] = [t0].[Id]
    INNER JOIN [semesters] AS [s] ON [t].[SemesterId] = [s].[Id]
    WHERE [t].[Id] = @__topicId_0 AND [t].[IsActive] = CAST(1 AS bit) AND [t].[DeletedAt] IS NULL
) AS [t1]
LEFT JOIN [topic_versions] AS [t2] ON [t1].[Id] = [t2].[TopicId]
ORDER BY [t1].[Id], [t1].[Id0], [t1].[Id1], [t1].[Id2]
2025-10-02 22:15:47.744 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:15:47.744 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:15:47.744 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:47.744 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:15:47.745 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 22:15:47.745 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 22:15:47.745 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 22:15:47.745 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 22:15:47.745 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 22:15:47.745 +07:00 [INF] Executed action CapBot.api.Controllers.TopicController.GetDetail (CapBot.api) in 197.441ms
2025-10-02 22:15:47.745 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.TopicController.GetDetail (CapBot.api)'
2025-10-02 22:15:47.745 +07:00 [DBG] Connection id "0HNG1OP53P204" completed keep alive response.
2025-10-02 22:15:47.746 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 22:15:47.746 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:47.746 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 22:15:47.746 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/topic/detail/22 - 404 null application/json; charset=utf-8 264.4061ms
2025-10-02 22:15:59.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/topic/detail/116 - null null
2025-10-02 22:15:59.218 +07:00 [DBG] The request path /api/topic/detail/116 does not match a supported file type
2025-10-02 22:15:59.218 +07:00 [DBG] The request path /api/topic/detail/116 does not match a supported file type
2025-10-02 22:15:59.220 +07:00 [DBG] 1 candidate(s) found for the request path '/api/topic/detail/116'
2025-10-02 22:15:59.220 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.TopicController.GetDetail (CapBot.api)' with route pattern 'api/topic/detail/{topicId}' is valid for the request path '/api/topic/detail/116'
2025-10-02 22:15:59.220 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.TopicController.GetDetail (CapBot.api)'
2025-10-02 22:15:59.221 +07:00 [DBG] Successfully validated the token.
2025-10-02 22:15:59.221 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 22:15:59.230 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.TopicController.GetDetail (CapBot.api)'
2025-10-02 22:15:59.230 +07:00 [INF] Route matched with {action = "GetDetail", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDetail(Int32) on controller CapBot.api.Controllers.TopicController (CapBot.api).
2025-10-02 22:15:59.230 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 22:15:59.231 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-10-02 22:15:59.231 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 22:15:59.231 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 22:15:59.232 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 22:15:59.232 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.TopicController (CapBot.api)
2025-10-02 22:15:59.239 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.TopicController (CapBot.api)
2025-10-02 22:15:59.240 +07:00 [DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
2025-10-02 22:15:59.241 +07:00 [DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
2025-10-02 22:15:59.241 +07:00 [DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
2025-10-02 22:15:59.241 +07:00 [DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
2025-10-02 22:15:59.241 +07:00 [DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
2025-10-02 22:15:59.241 +07:00 [DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
2025-10-02 22:15:59.243 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 22:15:59.243 +07:00 [DBG] Creating DbConnection.
2025-10-02 22:15:59.244 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 22:15:59.244 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.244 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.244 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:15:59.244 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:59.244 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:59.244 +07:00 [DBG] Executing DbCommand [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[PotentialDuplicate], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title], [t1].[Id0], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DeletedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[LastModifiedAt0], [t1].[LastModifiedBy0], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UserName], [t1].[Id1], [t1].[CreatedAt1], [t1].[CreatedBy0], [t1].[DeletedAt1], [t1].[Description0], [t1].[IsActive0], [t1].[LastModifiedAt1], [t1].[LastModifiedBy1], [t1].[Name], [t1].[Id2], [t1].[CreatedAt2], [t1].[CreatedBy1], [t1].[DeletedAt2], [t1].[Description1], [t1].[EndDate], [t1].[IsActive1], [t1].[LastModifiedAt2], [t1].[LastModifiedBy2], [t1].[Name0], [t1].[StartDate], [t2].[Id], [t2].[Content], [t2].[Context], [t2].[CreatedAt], [t2].[CreatedBy], [t2].[DeletedAt], [t2].[Description], [t2].[DocumentUrl], [t2].[EN_Title], [t2].[ExpectedOutcomes], [t2].[IsActive], [t2].[LastModifiedAt], [t2].[LastModifiedBy], [t2].[Methodology], [t2].[Objectives], [t2].[PotentialDuplicate], [t2].[Problem], [t2].[Requirements], [t2].[Status], [t2].[SubmittedAt], [t2].[SubmittedBy], [t2].[TopicId], [t2].[VN_title], [t2].[VersionNumber]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title], [u].[Id] AS [Id0], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DeletedAt] AS [DeletedAt0], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt] AS [LastModifiedAt0], [u].[LastModifiedBy] AS [LastModifiedBy0], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [t0].[Id] AS [Id1], [t0].[CreatedAt] AS [CreatedAt1], [t0].[CreatedBy] AS [CreatedBy0], [t0].[DeletedAt] AS [DeletedAt1], [t0].[Description] AS [Description0], [t0].[IsActive] AS [IsActive0], [t0].[LastModifiedAt] AS [LastModifiedAt1], [t0].[LastModifiedBy] AS [LastModifiedBy1], [t0].[Name], [s].[Id] AS [Id2], [s].[CreatedAt] AS [CreatedAt2], [s].[CreatedBy] AS [CreatedBy1], [s].[DeletedAt] AS [DeletedAt2], [s].[Description] AS [Description1], [s].[EndDate], [s].[IsActive] AS [IsActive1], [s].[LastModifiedAt] AS [LastModifiedAt2], [s].[LastModifiedBy] AS [LastModifiedBy2], [s].[Name] AS [Name0], [s].[StartDate]
    FROM [topics] AS [t]
    INNER JOIN [users] AS [u] ON [t].[SupervisorId] = [u].[Id]
    LEFT JOIN [topic_categories] AS [t0] ON [t].[CategoryId] = [t0].[Id]
    INNER JOIN [semesters] AS [s] ON [t].[SemesterId] = [s].[Id]
    WHERE [t].[Id] = @__topicId_0 AND [t].[IsActive] = CAST(1 AS bit) AND [t].[DeletedAt] IS NULL
) AS [t1]
LEFT JOIN [topic_versions] AS [t2] ON [t1].[Id] = [t2].[TopicId]
ORDER BY [t1].[Id], [t1].[Id0], [t1].[Id1], [t1].[Id2]
2025-10-02 22:15:59.256 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[PotentialDuplicate], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title], [t1].[Id0], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DeletedAt0], [t1].[Email], [t1].[EmailConfirmed], [t1].[LastModifiedAt0], [t1].[LastModifiedBy0], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UserName], [t1].[Id1], [t1].[CreatedAt1], [t1].[CreatedBy0], [t1].[DeletedAt1], [t1].[Description0], [t1].[IsActive0], [t1].[LastModifiedAt1], [t1].[LastModifiedBy1], [t1].[Name], [t1].[Id2], [t1].[CreatedAt2], [t1].[CreatedBy1], [t1].[DeletedAt2], [t1].[Description1], [t1].[EndDate], [t1].[IsActive1], [t1].[LastModifiedAt2], [t1].[LastModifiedBy2], [t1].[Name0], [t1].[StartDate], [t2].[Id], [t2].[Content], [t2].[Context], [t2].[CreatedAt], [t2].[CreatedBy], [t2].[DeletedAt], [t2].[Description], [t2].[DocumentUrl], [t2].[EN_Title], [t2].[ExpectedOutcomes], [t2].[IsActive], [t2].[LastModifiedAt], [t2].[LastModifiedBy], [t2].[Methodology], [t2].[Objectives], [t2].[PotentialDuplicate], [t2].[Problem], [t2].[Requirements], [t2].[Status], [t2].[SubmittedAt], [t2].[SubmittedBy], [t2].[TopicId], [t2].[VN_title], [t2].[VersionNumber]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title], [u].[Id] AS [Id0], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DeletedAt] AS [DeletedAt0], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt] AS [LastModifiedAt0], [u].[LastModifiedBy] AS [LastModifiedBy0], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [t0].[Id] AS [Id1], [t0].[CreatedAt] AS [CreatedAt1], [t0].[CreatedBy] AS [CreatedBy0], [t0].[DeletedAt] AS [DeletedAt1], [t0].[Description] AS [Description0], [t0].[IsActive] AS [IsActive0], [t0].[LastModifiedAt] AS [LastModifiedAt1], [t0].[LastModifiedBy] AS [LastModifiedBy1], [t0].[Name], [s].[Id] AS [Id2], [s].[CreatedAt] AS [CreatedAt2], [s].[CreatedBy] AS [CreatedBy1], [s].[DeletedAt] AS [DeletedAt2], [s].[Description] AS [Description1], [s].[EndDate], [s].[IsActive] AS [IsActive1], [s].[LastModifiedAt] AS [LastModifiedAt2], [s].[LastModifiedBy] AS [LastModifiedBy2], [s].[Name] AS [Name0], [s].[StartDate]
    FROM [topics] AS [t]
    INNER JOIN [users] AS [u] ON [t].[SupervisorId] = [u].[Id]
    LEFT JOIN [topic_categories] AS [t0] ON [t].[CategoryId] = [t0].[Id]
    INNER JOIN [semesters] AS [s] ON [t].[SemesterId] = [s].[Id]
    WHERE [t].[Id] = @__topicId_0 AND [t].[IsActive] = CAST(1 AS bit) AND [t].[DeletedAt] IS NULL
) AS [t1]
LEFT JOIN [topic_versions] AS [t2] ON [t1].[Id] = [t2].[TopicId]
ORDER BY [t1].[Id], [t1].[Id0], [t1].[Id1], [t1].[Id2]
2025-10-02 22:15:59.267 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.267 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 10ms reading results.
2025-10-02 22:15:59.267 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.267 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:15:59.271 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Phase)
    .Include(s => s.SubmittedByUser)
    .Include(s => s.ReviewerAssignments)
    .Where(s => s.TopicId == __topicId_0 && s.IsActive && s.DeletedAt == null)'
2025-10-02 22:15:59.273 +07:00 [DBG] Including navigation: 'Submission.Phase'.
2025-10-02 22:15:59.274 +07:00 [DBG] Including navigation: 'Submission.SubmittedByUser'.
2025-10-02 22:15:59.274 +07:00 [DBG] Including navigation: 'Submission.ReviewerAssignments'.
2025-10-02 22:15:59.298 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Submission>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            1 -> Dictionary<IProperty, int> { [Property: Phase.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Phase.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Phase.CreatedBy (string), 21], [Property: Phase.DeletedAt (DateTime?), 22], [Property: Phase.EndDate (DateTime) Required, 23], [Property: Phase.IsActive (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 24], [Property: Phase.LastModifiedAt (DateTime?), 25], [Property: Phase.LastModifiedBy (string), 26], [Property: Phase.Name (string) Required MaxLength(100), 27], [Property: Phase.PhaseTypeId (int) Required FK Index, 28], [Property: Phase.SemesterId (int) Required FK Index, 29], [Property: Phase.StartDate (DateTime) Required, 30], [Property: Phase.SubmissionDeadline (DateTime?), 31] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 32], [Property: User.AccessFailedCount (int) Required, 33], [Property: User.ConcurrencyStamp (string), 34], [Property: User.CreatedAt (DateTime) Required, 35], [Property: User.DeletedAt (DateTime?), 36], [Property: User.Email (string), 37], [Property: User.EmailConfirmed (bool) Required, 38], [Property: User.LastModifiedAt (DateTime) Required, 39], [Property: User.LastModifiedBy (string), 40], [Property: User.LockoutEnabled (bool) Required, 41], [Property: User.LockoutEnd (DateTimeOffset?), 42], [Property: User.NormalizedEmail (string), 43], [Property: User.NormalizedUserName (string), 44], [Property: User.PasswordHash (string), 45], [Property: User.PhoneNumber (string), 46], [Property: User.PhoneNumberConfirmed (bool) Required, 47], [Property: User.SecurityStamp (string), 48], [Property: User.TwoFactorEnabled (bool) Required, 49], [Property: User.UserName (string), 50] }
            3 -> 0
            4 -> 19
            5 -> 32
            6 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 51], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 52], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 53], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 54], [Property: ReviewerAssignment.CompletedAt (DateTime?), 55], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 56], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 57], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 58], [Property: ReviewerAssignment.StartedAt (DateTime?), 59], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 60], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 61] }
            7 -> 51
        SELECT s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, p.Id, p.CreatedAt, p.CreatedBy, p.DeletedAt, p.EndDate, p.IsActive, p.LastModifiedAt, p.LastModifiedBy, p.Name, p.PhaseTypeId, p.SemesterId, p.StartDate, p.SubmissionDeadline, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM submissions AS s
        INNER JOIN phases AS p ON s.PhaseId == p.Id
        INNER JOIN users AS u ON s.SubmittedBy == u.Id
        LEFT JOIN reviewer_assignments AS r ON s.Id == r.SubmissionId
        WHERE ((s.TopicId == @__topicId_0) && s.IsActive) && (s.DeletedAt == NULL)
        ORDER BY s.Id ASC, p.Id ASC, u.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 22:15:59.301 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.301 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.301 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:15:59.301 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:59.302 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:59.302 +07:00 [DBG] Executing DbCommand [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [p].[Id], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[EndDate], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Name], [p].[PhaseTypeId], [p].[SemesterId], [p].[StartDate], [p].[SubmissionDeadline], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [submissions] AS [s]
INNER JOIN [phases] AS [p] ON [s].[PhaseId] = [p].[Id]
INNER JOIN [users] AS [u] ON [s].[SubmittedBy] = [u].[Id]
LEFT JOIN [reviewer_assignments] AS [r] ON [s].[Id] = [r].[SubmissionId]
WHERE [s].[TopicId] = @__topicId_0 AND [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
ORDER BY [s].[Id], [p].[Id], [u].[Id]
2025-10-02 22:15:59.329 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [p].[Id], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[EndDate], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Name], [p].[PhaseTypeId], [p].[SemesterId], [p].[StartDate], [p].[SubmissionDeadline], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [submissions] AS [s]
INNER JOIN [phases] AS [p] ON [s].[PhaseId] = [p].[Id]
INNER JOIN [users] AS [u] ON [s].[SubmittedBy] = [u].[Id]
LEFT JOIN [reviewer_assignments] AS [r] ON [s].[Id] = [r].[SubmissionId]
WHERE [s].[TopicId] = @__topicId_0 AND [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
ORDER BY [s].[Id], [p].[Id], [u].[Id]
2025-10-02 22:15:59.334 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.334 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-10-02 22:15:59.334 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.334 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:15:59.339 +07:00 [DBG] Compiling query expression: 
'DbSet<Review>()
    .AsNoTracking()
    .Where(r => __assignmentIds_0.Contains(r.AssignmentId) && r.IsActive)'
2025-10-02 22:15:59.376 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Review>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Review.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.AssignmentId (int) Required FK Index, 1], [Property: Review.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Review.CreatedBy (string), 3], [Property: Review.DeletedAt (DateTime?), 4], [Property: Review.IsActive (bool) Required, 5], [Property: Review.LastModifiedAt (DateTime?), 6], [Property: Review.LastModifiedBy (string), 7], [Property: Review.OverallComment (string), 8], [Property: Review.OverallScore (decimal?), 9], [Property: Review.Recommendation (ReviewRecommendations) Required Index ValueGenerated.OnAdd, 10], [Property: Review.Status (ReviewStatus) Required Index ValueGenerated.OnAdd, 11], [Property: Review.SubmittedAt (DateTime?) Index, 12], [Property: Review.TimeSpentMinutes (int?), 13] }
        SELECT r.Id, r.AssignmentId, r.CreatedAt, r.CreatedBy, r.DeletedAt, r.IsActive, r.LastModifiedAt, r.LastModifiedBy, r.OverallComment, r.OverallScore, r.Recommendation, r.Status, r.SubmittedAt, r.TimeSpentMinutes
        FROM reviews AS r
        WHERE r.AssignmentId IN (
            SELECT a.value
            FROM OPENJSON(@__assignmentIds_0) WITH (value int '') AS a) && r.IsActive), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Review>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 22:15:59.385 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.385 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.385 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:15:59.385 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:59.388 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-02 22:15:59.388 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignmentIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignmentId], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[IsActive], [r].[LastModifiedAt], [r].[LastModifiedBy], [r].[OverallComment], [r].[OverallScore], [r].[Recommendation], [r].[Status], [r].[SubmittedAt], [r].[TimeSpentMinutes]
FROM [reviews] AS [r]
WHERE [r].[AssignmentId] IN (
    SELECT [a].[value]
    FROM OPENJSON(@__assignmentIds_0) WITH ([value] int '$') AS [a]
) AND [r].[IsActive] = CAST(1 AS bit)
2025-10-02 22:15:59.411 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__assignmentIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignmentId], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[IsActive], [r].[LastModifiedAt], [r].[LastModifiedBy], [r].[OverallComment], [r].[OverallScore], [r].[Recommendation], [r].[Status], [r].[SubmittedAt], [r].[TimeSpentMinutes]
FROM [reviews] AS [r]
WHERE [r].[AssignmentId] IN (
    SELECT [a].[value]
    FROM OPENJSON(@__assignmentIds_0) WITH ([value] int '$') AS [a]
) AND [r].[IsActive] = CAST(1 AS bit)
2025-10-02 22:15:59.412 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.412 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 22:15:59.413 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.413 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:15:59.418 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Where(u => __reviewerIds_0.Contains(u.Id))'
2025-10-02 22:15:59.423 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
        FROM users AS u
        WHERE u.Id IN (
            SELECT r.value
            FROM OPENJSON(@__reviewerIds_0) WITH (value int '') AS r)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-10-02 22:15:59.423 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.424 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.424 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:15:59.424 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:59.424 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:59.424 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[Id] IN (
    SELECT [r].[value]
    FROM OPENJSON(@__reviewerIds_0) WITH ([value] int '$') AS [r]
)
2025-10-02 22:15:59.434 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__reviewerIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[Id] IN (
    SELECT [r].[value]
    FROM OPENJSON(@__reviewerIds_0) WITH ([value] int '$') AS [r]
)
2025-10-02 22:15:59.434 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.435 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:15:59.435 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.435 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:15:59.444 +07:00 [DBG] Compiling query expression: 
'DbSet<EntityFile>()
    .AsNoTracking()
    .Include(x => x.File)
    .Where(x => x.EntityId == __p_0 && (int)x.EntityType == 1 && x.IsPrimary)
    .FirstOrDefault()'
2025-10-02 22:15:59.448 +07:00 [DBG] Including navigation: 'EntityFile.File'.
2025-10-02 22:15:59.456 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<EntityFile>(
    asyncEnumerable: new SingleQueryingEnumerable<EntityFile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: EntityFile.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: EntityFile.Caption (string) MaxLength(512), 1], [Property: EntityFile.CreatedAt (DateTime) Required, 2], [Property: EntityFile.EntityId (long) Required Index, 3], [Property: EntityFile.EntityType (EntityType) Required Index, 4], [Property: EntityFile.FileId (long) Required FK Index, 5], [Property: EntityFile.IsPrimary (bool) Required, 6] }
                1 -> Dictionary<IProperty, int> { [Property: AppFile.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: AppFile.Alt (string) MaxLength(255), 8], [Property: AppFile.Checksum (string) MaxLength(128), 9], [Property: AppFile.CreatedAt (DateTime) Required, 10], [Property: AppFile.CreatedBy (string), 11], [Property: AppFile.DeletedAt (DateTime?), 12], [Property: AppFile.FileName (string) Required MaxLength(255), 13], [Property: AppFile.FilePath (string) Required MaxLength(1024), 14], [Property: AppFile.FileSize (long) Required, 15], [Property: AppFile.FileType (FileType) Required, 16], [Property: AppFile.Height (int?), 17], [Property: AppFile.IsActive (bool) Required, 18], [Property: AppFile.LastModifiedAt (DateTime?), 19], [Property: AppFile.LastModifiedBy (string), 20], [Property: AppFile.MimeType (string) MaxLength(255), 21], [Property: AppFile.ThumbnailUrl (string) MaxLength(2048), 22], [Property: AppFile.Url (string) Required MaxLength(2048), 23], [Property: AppFile.Width (int?), 24] }
            SELECT TOP(1) e.Id, e.Caption, e.CreatedAt, e.EntityId, e.EntityType, e.FileId, e.IsPrimary, f.Id, f.Alt, f.Checksum, f.CreatedAt, f.CreatedBy, f.DeletedAt, f.FileName, f.FilePath, f.FileSize, f.FileType, f.Height, f.IsActive, f.LastModifiedAt, f.LastModifiedBy, f.MimeType, f.ThumbnailUrl, f.Url, f.Width
            FROM entity_files AS e
            INNER JOIN files AS f ON e.FileId == f.Id
            WHERE ((e.EntityId == @__p_0) && (e.EntityType == 1)) && e.IsPrimary), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, EntityFile>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 22:15:59.458 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.458 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.458 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:15:59.458 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:59.458 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:15:59.458 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Caption], [e].[CreatedAt], [e].[EntityId], [e].[EntityType], [e].[FileId], [e].[IsPrimary], [f].[Id], [f].[Alt], [f].[Checksum], [f].[CreatedAt], [f].[CreatedBy], [f].[DeletedAt], [f].[FileName], [f].[FilePath], [f].[FileSize], [f].[FileType], [f].[Height], [f].[IsActive], [f].[LastModifiedAt], [f].[LastModifiedBy], [f].[MimeType], [f].[ThumbnailUrl], [f].[Url], [f].[Width]
FROM [entity_files] AS [e]
INNER JOIN [files] AS [f] ON [e].[FileId] = [f].[Id]
WHERE [e].[EntityId] = @__p_0 AND [e].[EntityType] = 1 AND [e].[IsPrimary] = CAST(1 AS bit)
2025-10-02 22:15:59.469 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Caption], [e].[CreatedAt], [e].[EntityId], [e].[EntityType], [e].[FileId], [e].[IsPrimary], [f].[Id], [f].[Alt], [f].[Checksum], [f].[CreatedAt], [f].[CreatedBy], [f].[DeletedAt], [f].[FileName], [f].[FilePath], [f].[FileSize], [f].[FileType], [f].[Height], [f].[IsActive], [f].[LastModifiedAt], [f].[LastModifiedBy], [f].[MimeType], [f].[ThumbnailUrl], [f].[Url], [f].[Width]
FROM [entity_files] AS [e]
INNER JOIN [files] AS [f] ON [e].[FileId] = [f].[Id]
WHERE [e].[EntityId] = @__p_0 AND [e].[EntityType] = 1 AND [e].[IsPrimary] = CAST(1 AS bit)
2025-10-02 22:15:59.470 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.471 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-10-02 22:15:59.471 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.471 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:15:59.490 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 22:15:59.490 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 22:15:59.490 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 22:15:59.490 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 22:15:59.491 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 22:15:59.545 +07:00 [INF] Executed action CapBot.api.Controllers.TopicController.GetDetail (CapBot.api) in 313.0644ms
2025-10-02 22:15:59.545 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.TopicController.GetDetail (CapBot.api)'
2025-10-02 22:15:59.546 +07:00 [DBG] Connection id "0HNG1OP53P204" completed keep alive response.
2025-10-02 22:15:59.547 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 22:15:59.547 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:15:59.548 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 22:15:59.549 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/topic/detail/116 - 200 null application/json; charset=utf-8 330.8713ms
2025-10-02 22:17:04.154 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/submission/detail/22 - null null
2025-10-02 22:17:04.154 +07:00 [DBG] The request path /api/submission/detail/22 does not match a supported file type
2025-10-02 22:17:04.154 +07:00 [DBG] The request path /api/submission/detail/22 does not match a supported file type
2025-10-02 22:17:04.154 +07:00 [DBG] 1 candidate(s) found for the request path '/api/submission/detail/22'
2025-10-02 22:17:04.154 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.SubmissionController.Detail (CapBot.api)' with route pattern 'api/submission/detail/{id}' is valid for the request path '/api/submission/detail/22'
2025-10-02 22:17:04.155 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.SubmissionController.Detail (CapBot.api)'
2025-10-02 22:17:04.155 +07:00 [DBG] Successfully validated the token.
2025-10-02 22:17:04.155 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-10-02 22:17:04.156 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.SubmissionController.Detail (CapBot.api)'
2025-10-02 22:17:04.180 +07:00 [INF] Route matched with {action = "Detail", controller = "Submission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Detail(Int32) on controller CapBot.api.Controllers.SubmissionController (CapBot.api).
2025-10-02 22:17:04.180 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-02 22:17:04.181 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-02 22:17:04.181 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-10-02 22:17:04.181 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-02 22:17:04.181 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-10-02 22:17:04.181 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.SubmissionController (CapBot.api)
2025-10-02 22:17:04.185 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.SubmissionController (CapBot.api)
2025-10-02 22:17:04.185 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-10-02 22:17:04.185 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-10-02 22:17:04.186 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-10-02 22:17:04.186 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-10-02 22:17:04.186 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-10-02 22:17:04.186 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-10-02 22:17:04.193 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-10-02 22:17:04.195 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(x => x.TopicVersion)
    .Include(x => x.Topic)
    .Include(x => x.Phase)
    .Include(x => x.SubmittedByUser)
    .Where(x => x.Id == __id_0 && x.IsActive && x.DeletedAt == null)
    .FirstOrDefault()'
2025-10-02 22:17:04.196 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-10-02 22:17:04.197 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-10-02 22:17:04.197 +07:00 [DBG] Including navigation: 'Submission.Phase'.
2025-10-02 22:17:04.199 +07:00 [DBG] Including navigation: 'Submission.SubmittedByUser'.
2025-10-02 22:17:04.218 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: TopicVersion.Content (string), 20], [Property: TopicVersion.Context (string), 21], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: TopicVersion.CreatedBy (string), 23], [Property: TopicVersion.DeletedAt (DateTime?), 24], [Property: TopicVersion.Description (string), 25], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 26], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 27], [Property: TopicVersion.ExpectedOutcomes (string), 28], [Property: TopicVersion.IsActive (bool) Required, 29], [Property: TopicVersion.LastModifiedAt (DateTime?), 30], [Property: TopicVersion.LastModifiedBy (string), 31], [Property: TopicVersion.Methodology (string), 32], [Property: TopicVersion.Objectives (string), 33], [Property: TopicVersion.PotentialDuplicate (string), 34], [Property: TopicVersion.Problem (string), 35], [Property: TopicVersion.Requirements (string), 36], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 37], [Property: TopicVersion.SubmittedAt (DateTime?), 38], [Property: TopicVersion.SubmittedBy (int?) FK Index, 39], [Property: TopicVersion.TopicId (int) Required FK Index, 40], [Property: TopicVersion.VN_title (string), 41], [Property: TopicVersion.VersionNumber (int) Required Index, 42] }
                2 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 43], [Property: Topic.Abbreviation (string), 44], [Property: Topic.CategoryId (int?) FK Index, 45], [Property: Topic.Content (string), 46], [Property: Topic.Context (string), 47], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 48], [Property: Topic.CreatedBy (string), 49], [Property: Topic.DeletedAt (DateTime?), 50], [Property: Topic.Description (string), 51], [Property: Topic.EN_Title (string) Required MaxLength(500), 52], [Property: Topic.IsActive (bool) Required, 53], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 54], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 55], [Property: Topic.LastModifiedAt (DateTime?), 56], [Property: Topic.LastModifiedBy (string), 57], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 58], [Property: Topic.Objectives (string), 59], [Property: Topic.PotentialDuplicate (string), 60], [Property: Topic.Problem (string), 61], [Property: Topic.SemesterId (int) Required FK Index, 62], [Property: Topic.SupervisorId (int) Required FK Index, 63], [Property: Topic.VN_title (string), 64] }
                3 -> Dictionary<IProperty, int> { [Property: Phase.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 65], [Property: Phase.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 66], [Property: Phase.CreatedBy (string), 67], [Property: Phase.DeletedAt (DateTime?), 68], [Property: Phase.EndDate (DateTime) Required, 69], [Property: Phase.IsActive (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 70], [Property: Phase.LastModifiedAt (DateTime?), 71], [Property: Phase.LastModifiedBy (string), 72], [Property: Phase.Name (string) Required MaxLength(100), 73], [Property: Phase.PhaseTypeId (int) Required FK Index, 74], [Property: Phase.SemesterId (int) Required FK Index, 75], [Property: Phase.StartDate (DateTime) Required, 76], [Property: Phase.SubmissionDeadline (DateTime?), 77] }
                4 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 78], [Property: User.AccessFailedCount (int) Required, 79], [Property: User.ConcurrencyStamp (string), 80], [Property: User.CreatedAt (DateTime) Required, 81], [Property: User.DeletedAt (DateTime?), 82], [Property: User.Email (string), 83], [Property: User.EmailConfirmed (bool) Required, 84], [Property: User.LastModifiedAt (DateTime) Required, 85], [Property: User.LastModifiedBy (string), 86], [Property: User.LockoutEnabled (bool) Required, 87], [Property: User.LockoutEnd (DateTimeOffset?), 88], [Property: User.NormalizedEmail (string), 89], [Property: User.NormalizedUserName (string), 90], [Property: User.PasswordHash (string), 91], [Property: User.PhoneNumber (string), 92], [Property: User.PhoneNumberConfirmed (bool) Required, 93], [Property: User.SecurityStamp (string), 94], [Property: User.TwoFactorEnabled (bool) Required, 95], [Property: User.UserName (string), 96] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.PotentialDuplicate, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.PotentialDuplicate, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title, p.Id, p.CreatedAt, p.CreatedBy, p.DeletedAt, p.EndDate, p.IsActive, p.LastModifiedAt, p.LastModifiedBy, p.Name, p.PhaseTypeId, p.SemesterId, p.StartDate, p.SubmissionDeadline, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM submissions AS s
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON s.TopicId == t0.Id
            INNER JOIN phases AS p ON s.PhaseId == p.Id
            INNER JOIN users AS u ON s.SubmittedBy == u.Id
            WHERE ((s.Id == @__id_0) && s.IsActive) && (s.DeletedAt == NULL)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 22:17:04.221 +07:00 [DBG] Creating DbConnection.
2025-10-02 22:17:04.221 +07:00 [DBG] Created DbConnection. (0ms).
2025-10-02 22:17:04.221 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:17:04.221 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:17:04.221 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:17:04.221 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:17:04.221 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:17:04.222 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[PotentialDuplicate], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title], [p].[Id], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[EndDate], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Name], [p].[PhaseTypeId], [p].[SemesterId], [p].[StartDate], [p].[SubmissionDeadline], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [submissions] AS [s]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [s].[TopicId] = [t0].[Id]
INNER JOIN [phases] AS [p] ON [s].[PhaseId] = [p].[Id]
INNER JOIN [users] AS [u] ON [s].[SubmittedBy] = [u].[Id]
WHERE [s].[Id] = @__id_0 AND [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 22:17:04.237 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[PotentialDuplicate], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[PotentialDuplicate], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title], [p].[Id], [p].[CreatedAt], [p].[CreatedBy], [p].[DeletedAt], [p].[EndDate], [p].[IsActive], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Name], [p].[PhaseTypeId], [p].[SemesterId], [p].[StartDate], [p].[SubmissionDeadline], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [submissions] AS [s]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [s].[TopicId] = [t0].[Id]
INNER JOIN [phases] AS [p] ON [s].[PhaseId] = [p].[Id]
INNER JOIN [users] AS [u] ON [s].[SubmittedBy] = [u].[Id]
WHERE [s].[Id] = @__id_0 AND [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL
2025-10-02 22:17:04.238 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:17:04.238 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:17:04.238 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:17:04.238 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:17:04.239 +07:00 [DBG] Compiling query expression: 
'DbSet<EntityFile>()
    .AsNoTracking()
    .Include(x => x.File)
    .Where(x => x.EntityId == __p_0 && (int)x.EntityType == 3 && x.IsPrimary)
    .FirstOrDefault()'
2025-10-02 22:17:04.240 +07:00 [DBG] Including navigation: 'EntityFile.File'.
2025-10-02 22:17:04.247 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<EntityFile>(
    asyncEnumerable: new SingleQueryingEnumerable<EntityFile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: EntityFile.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: EntityFile.Caption (string) MaxLength(512), 1], [Property: EntityFile.CreatedAt (DateTime) Required, 2], [Property: EntityFile.EntityId (long) Required Index, 3], [Property: EntityFile.EntityType (EntityType) Required Index, 4], [Property: EntityFile.FileId (long) Required FK Index, 5], [Property: EntityFile.IsPrimary (bool) Required, 6] }
                1 -> Dictionary<IProperty, int> { [Property: AppFile.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: AppFile.Alt (string) MaxLength(255), 8], [Property: AppFile.Checksum (string) MaxLength(128), 9], [Property: AppFile.CreatedAt (DateTime) Required, 10], [Property: AppFile.CreatedBy (string), 11], [Property: AppFile.DeletedAt (DateTime?), 12], [Property: AppFile.FileName (string) Required MaxLength(255), 13], [Property: AppFile.FilePath (string) Required MaxLength(1024), 14], [Property: AppFile.FileSize (long) Required, 15], [Property: AppFile.FileType (FileType) Required, 16], [Property: AppFile.Height (int?), 17], [Property: AppFile.IsActive (bool) Required, 18], [Property: AppFile.LastModifiedAt (DateTime?), 19], [Property: AppFile.LastModifiedBy (string), 20], [Property: AppFile.MimeType (string) MaxLength(255), 21], [Property: AppFile.ThumbnailUrl (string) MaxLength(2048), 22], [Property: AppFile.Url (string) Required MaxLength(2048), 23], [Property: AppFile.Width (int?), 24] }
            SELECT TOP(1) e.Id, e.Caption, e.CreatedAt, e.EntityId, e.EntityType, e.FileId, e.IsPrimary, f.Id, f.Alt, f.Checksum, f.CreatedAt, f.CreatedBy, f.DeletedAt, f.FileName, f.FilePath, f.FileSize, f.FileType, f.Height, f.IsActive, f.LastModifiedAt, f.LastModifiedBy, f.MimeType, f.ThumbnailUrl, f.Url, f.Width
            FROM entity_files AS e
            INNER JOIN files AS f ON e.FileId == f.Id
            WHERE ((e.EntityId == @__p_0) && (e.EntityType == 3)) && e.IsPrimary), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, EntityFile>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-02 22:17:04.247 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:17:04.248 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:17:04.248 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-02 22:17:04.248 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:17:04.248 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-02 22:17:04.248 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Caption], [e].[CreatedAt], [e].[EntityId], [e].[EntityType], [e].[FileId], [e].[IsPrimary], [f].[Id], [f].[Alt], [f].[Checksum], [f].[CreatedAt], [f].[CreatedBy], [f].[DeletedAt], [f].[FileName], [f].[FilePath], [f].[FileSize], [f].[FileType], [f].[Height], [f].[IsActive], [f].[LastModifiedAt], [f].[LastModifiedBy], [f].[MimeType], [f].[ThumbnailUrl], [f].[Url], [f].[Width]
FROM [entity_files] AS [e]
INNER JOIN [files] AS [f] ON [e].[FileId] = [f].[Id]
WHERE [e].[EntityId] = @__p_0 AND [e].[EntityType] = 3 AND [e].[IsPrimary] = CAST(1 AS bit)
2025-10-02 22:17:04.252 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Caption], [e].[CreatedAt], [e].[EntityId], [e].[EntityType], [e].[FileId], [e].[IsPrimary], [f].[Id], [f].[Alt], [f].[Checksum], [f].[CreatedAt], [f].[CreatedBy], [f].[DeletedAt], [f].[FileName], [f].[FilePath], [f].[FileSize], [f].[FileType], [f].[Height], [f].[IsActive], [f].[LastModifiedAt], [f].[LastModifiedBy], [f].[MimeType], [f].[ThumbnailUrl], [f].[Url], [f].[Width]
FROM [entity_files] AS [e]
INNER JOIN [files] AS [f] ON [e].[FileId] = [f].[Id]
WHERE [e].[EntityId] = @__p_0 AND [e].[EntityType] = 3 AND [e].[IsPrimary] = CAST(1 AS bit)
2025-10-02 22:17:04.253 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-10-02 22:17:04.253 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-10-02 22:17:04.253 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:17:04.253 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-10-02 22:17:04.254 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-02 22:17:04.255 +07:00 [DBG] No information found on request to perform content negotiation.
2025-10-02 22:17:04.255 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-10-02 22:17:04.255 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-02 22:17:04.255 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-10-02 22:17:04.263 +07:00 [INF] Executed action CapBot.api.Controllers.SubmissionController.Detail (CapBot.api) in 81.9079ms
2025-10-02 22:17:04.263 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.SubmissionController.Detail (CapBot.api)'
2025-10-02 22:17:04.263 +07:00 [DBG] Connection id "0HNG1OP53P204" completed keep alive response.
2025-10-02 22:17:04.263 +07:00 [DBG] 'MyDbContext' disposed.
2025-10-02 22:17:04.264 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-10-02 22:17:04.264 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-10-02 22:17:04.264 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/submission/detail/22 - 200 null application/json; charset=utf-8 109.9622ms
2025-10-02 22:17:47.579 +07:00 [DBG] HttpMessageHandler expired after 120000ms for client ''
2025-10-02 22:17:57.588 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:17:57.591 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.2168ms - processed: 0 items - remaining: 1 items
2025-10-02 22:18:07.592 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:18:07.592 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-10-02 22:18:17.602 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:18:17.602 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2025-10-02 22:18:27.606 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:18:27.607 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-10-02 22:18:37.616 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:18:37.616 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0045ms - processed: 0 items - remaining: 1 items
2025-10-02 22:18:47.617 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:18:47.617 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-10-02 22:18:57.632 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:18:57.633 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-10-02 22:19:07.634 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:19:07.635 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0085ms - processed: 0 items - remaining: 1 items
2025-10-02 22:19:15.618 +07:00 [DBG] Connection id "0HNG1OP53P204" disconnecting.
2025-10-02 22:19:15.619 +07:00 [DBG] Connection id "0HNG1OP53P204" stopped.
2025-10-02 22:19:15.619 +07:00 [DBG] Connection id "0HNG1OP53P204" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-02 22:19:17.647 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:19:17.648 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-10-02 22:19:27.649 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:19:27.650 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-10-02 22:19:37.653 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:19:37.653 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-10-02 22:19:47.660 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:19:47.660 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-10-02 22:19:57.666 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:19:57.666 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0058ms - processed: 0 items - remaining: 1 items
2025-10-02 22:20:07.678 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:20:07.679 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0121ms - processed: 0 items - remaining: 1 items
2025-10-02 22:20:17.684 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:20:17.684 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0055ms - processed: 0 items - remaining: 1 items
2025-10-02 22:20:27.685 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:20:27.685 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-10-02 22:20:37.695 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:20:37.695 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-10-02 22:20:47.705 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:20:47.705 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.005ms - processed: 0 items - remaining: 1 items
2025-10-02 22:20:57.716 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:20:57.716 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-10-02 22:21:07.725 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:21:07.725 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.031ms - processed: 0 items - remaining: 1 items
2025-10-02 22:21:17.732 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:21:17.732 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-10-02 22:21:27.742 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:21:27.743 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-10-02 22:21:37.743 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:21:37.743 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-10-02 22:21:47.745 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:21:47.746 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-10-02 22:21:57.762 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:21:57.762 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-10-02 22:22:07.771 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:22:07.771 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-10-02 22:22:17.773 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:22:17.773 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2025-10-02 22:22:27.784 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:22:27.785 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2025-10-02 22:22:37.798 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:22:37.798 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0994ms - processed: 0 items - remaining: 1 items
2025-10-02 22:22:47.810 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:22:47.810 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-10-02 22:22:57.820 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-10-02 22:22:57.821 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0176ms - processed: 0 items - remaining: 1 items
2025-10-02 22:23:04.064 +07:00 [INF] Application is shutting down...
2025-10-02 22:23:04.065 +07:00 [DBG] Hosting stopping
2025-10-02 22:23:04.074 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\acer\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-10-02 22:23:04.082 +07:00 [DBG] Hosting stopped
